var yI=Object.create;var uc=Object.defineProperty,vI=Object.defineProperties,wI=Object.getOwnPropertyDescriptor,EI=Object.getOwnPropertyDescriptors,bI=Object.getOwnPropertyNames,lc=Object.getOwnPropertySymbols,_I=Object.getPrototypeOf,Qd=Object.prototype.hasOwnProperty,Sy=Object.prototype.propertyIsEnumerable;var Dy=(e,t,n)=>t in e?uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,de=(e,t)=>{for(var n in t||={})Qd.call(t,n)&&Dy(e,n,t[n]);if(lc)for(var n of lc(t))Sy.call(t,n)&&Dy(e,n,t[n]);return e},Se=(e,t)=>vI(e,EI(t));var Iy=e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)};var Xd=(e,t)=>{var n={};for(var r in e)Qd.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lc)for(var r of lc(e))t.indexOf(r)<0&&Sy.call(e,r)&&(n[r]=e[r]);return n};var Ms=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),CI=(e,t)=>{for(var n in t)uc(e,n,{get:t[n],enumerable:!0})},DI=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bI(t))!Qd.call(e,o)&&o!==n&&uc(e,o,{get:()=>t[o],enumerable:!(r=wI(t,o))||r.enumerable});return e};var ef=(e,t,n)=>(n=e!=null?yI(_I(e)):{},DI(t||!e||!e.__esModule?uc(n,"default",{value:e,enumerable:!0}):n,e));var eb=Ms((Gr,XE)=>{"use strict";var tu=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global,nu=function(){function e(){this.fetch=!1,this.DOMException=tu.DOMException}return e.prototype=tu,new e}();(function(e){var t=function(n){var r=typeof e<"u"&&e||typeof self<"u"&&self||typeof global<"u"&&global||{},o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function i(R){return R&&DataView.prototype.isPrototypeOf(R)}if(o.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(R){return R&&s.indexOf(Object.prototype.toString.call(R))>-1};function c(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function l(R){return typeof R!="string"&&(R=String(R)),R}function u(R){var A={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return o.iterable&&(A[Symbol.iterator]=function(){return A}),A}function d(R){this.map={},R instanceof d?R.forEach(function(A,M){this.append(M,A)},this):Array.isArray(R)?R.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(A){this.append(A,R[A])},this)}d.prototype.append=function(R,A){R=c(R),A=l(A);var M=this.map[R];this.map[R]=M?M+", "+A:A},d.prototype.delete=function(R){delete this.map[c(R)]},d.prototype.get=function(R){return R=c(R),this.has(R)?this.map[R]:null},d.prototype.has=function(R){return this.map.hasOwnProperty(c(R))},d.prototype.set=function(R,A){this.map[c(R)]=l(A)},d.prototype.forEach=function(R,A){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(A,this.map[M],M,this)},d.prototype.keys=function(){var R=[];return this.forEach(function(A,M){R.push(M)}),u(R)},d.prototype.values=function(){var R=[];return this.forEach(function(A){R.push(A)}),u(R)},d.prototype.entries=function(){var R=[];return this.forEach(function(A,M){R.push([M,A])}),u(R)},o.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function f(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function h(R){return new Promise(function(A,M){R.onload=function(){A(R.result)},R.onerror=function(){M(R.error)}})}function p(R){var A=new FileReader,M=h(A);return A.readAsArrayBuffer(R),M}function g(R){var A=new FileReader,M=h(A),k=/charset=([A-Za-z0-9_-]+)/.exec(R.type),B=k?k[1]:"utf-8";return A.readAsText(R,B),M}function w(R){for(var A=new Uint8Array(R),M=new Array(A.length),k=0;k<A.length;k++)M[k]=String.fromCharCode(A[k]);return M.join("")}function m(R){if(R.slice)return R.slice(0);var A=new Uint8Array(R.byteLength);return A.set(new Uint8Array(R)),A.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:o.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:o.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():o.arrayBuffer&&o.blob&&i(R)?(this._bodyArrayBuffer=m(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||a(R))?this._bodyArrayBuffer=m(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var R=f(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=f(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(o.blob)return this.blob().then(p);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=f(this);if(R)return R;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function O(R){var A=R.toUpperCase();return b.indexOf(A)>-1?A:R}function N(R,A){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var M=A.body;if(R instanceof N){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,A.headers||(this.headers=new d(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!M&&R._bodyInit!=null&&(M=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new d(A.headers)),this.method=O(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in r){var V=new AbortController;return V.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function z(R){var A=new FormData;return R.trim().split("&").forEach(function(M){if(M){var k=M.split("="),B=k.shift().replace(/\+/g," "),V=k.join("=").replace(/\+/g," ");A.append(decodeURIComponent(B),decodeURIComponent(V))}}),A}function q(R){var A=new d,M=R.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var B=k.split(":"),V=B.shift().trim();if(V){var E=B.join(":").trim();try{A.append(V,E)}catch(y){console.warn("Response "+y.message)}}}),A}D.call(N.prototype);function U(R,A){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new d(A.headers),this.url=A.url||"",this._initBody(R)}D.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},U.error=function(){var R=new U(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var W=[301,302,303,307,308];U.redirect=function(R,A){if(W.indexOf(A)===-1)throw new RangeError("Invalid status code");return new U(null,{status:A,headers:{location:R}})},n.DOMException=r.DOMException;try{new n.DOMException}catch{n.DOMException=function(A,M){this.message=A,this.name=M;var k=Error(A);this.stack=k.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function $(R,A){return new Promise(function(M,k){var B=new N(R,A);if(B.signal&&B.signal.aborted)return k(new n.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function E(){V.abort()}V.onload=function(){var S={statusText:V.statusText,headers:q(V.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(V.status<200||V.status>599)?S.status=200:S.status=V.status,S.url="responseURL"in V?V.responseURL:S.headers.get("X-Request-URL");var x="response"in V?V.response:V.responseText;setTimeout(function(){M(new U(x,S))},0)},V.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},V.onabort=function(){setTimeout(function(){k(new n.DOMException("Aborted","AbortError"))},0)};function y(S){try{return S===""&&r.location.href?r.location.href:S}catch{return S}}if(V.open(B.method,y(B.url),!0),B.credentials==="include"?V.withCredentials=!0:B.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(o.blob?V.responseType="blob":o.arrayBuffer&&(V.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof d||r.Headers&&A.headers instanceof r.Headers)){var v=[];Object.getOwnPropertyNames(A.headers).forEach(function(S){v.push(c(S)),V.setRequestHeader(S,l(A.headers[S]))}),B.headers.forEach(function(S,x){v.indexOf(x)===-1&&V.setRequestHeader(x,S)})}else B.headers.forEach(function(S,x){V.setRequestHeader(x,S)});B.signal&&(B.signal.addEventListener("abort",E),V.onreadystatechange=function(){V.readyState===4&&B.signal.removeEventListener("abort",E)}),V.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return $.polyfill=!0,r.fetch||(r.fetch=$,r.Headers=d,r.Request=N,r.Response=U),n.Headers=d,n.Request=N,n.Response=U,n.fetch=$,n}({})})(nu);nu.fetch.ponyfill=!0;delete nu.fetch.polyfill;var Ui=tu.fetch?tu:nu;Gr=Ui.fetch;Gr.default=Ui.fetch;Gr.fetch=Ui.fetch;Gr.Headers=Ui.Headers;Gr.Request=Ui.Request;Gr.Response=Ui.Response;XE.exports=Gr});var nb=Ms((R4,tb)=>{"use strict";var Hi=1e3,zi=Hi*60,Ki=zi*60,Ho=Ki*24,yR=Ho*7,vR=Ho*365.25;tb.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return wR(e);if(n==="number"&&isFinite(e))return t.long?bR(e):ER(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function wR(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*vR;case"weeks":case"week":case"w":return n*yR;case"days":case"day":case"d":return n*Ho;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ki;case"minutes":case"minute":case"mins":case"min":case"m":return n*zi;case"seconds":case"second":case"secs":case"sec":case"s":return n*Hi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function ER(e){var t=Math.abs(e);return t>=Ho?Math.round(e/Ho)+"d":t>=Ki?Math.round(e/Ki)+"h":t>=zi?Math.round(e/zi)+"m":t>=Hi?Math.round(e/Hi)+"s":e+"ms"}function bR(e){var t=Math.abs(e);return t>=Ho?ru(e,t,Ho,"day"):t>=Ki?ru(e,t,Ki,"hour"):t>=zi?ru(e,t,zi,"minute"):t>=Hi?ru(e,t,Hi,"second"):e+" ms"}function ru(e,t,n,r){var o=t>=n*1.5;return Math.round(e/n)+" "+r+(o?"s":"")}});var ob=Ms((O4,rb)=>{"use strict";function _R(e){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=nb(),n.destroy=l,Object.keys(e).forEach(u=>{n[u]=e[u]}),n.names=[],n.skips=[],n.formatters={};function t(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=t;function n(u){let d,f=null,h,p;function g(...w){if(!g.enabled)return;let m=g,D=Number(new Date),b=D-(d||D);m.diff=b,m.prev=d,m.curr=D,d=D,w[0]=n.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let O=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(z,q)=>{if(z==="%%")return"%";O++;let U=n.formatters[q];if(typeof U=="function"){let W=w[O];z=U.call(m,W),w.splice(O,1),O--}return z}),n.formatArgs.call(m,w),(m.log||n.log).apply(m,w)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(h!==n.namespaces&&(h=n.namespaces,p=n.enabled(u)),p),set:w=>{f=w}}),typeof n.init=="function"&&n.init(g),g}function r(u,d){let f=n(this.namespace+(typeof d>"u"?":":d)+u);return f.log=this.log,f}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(let f of d)f[0]==="-"?n.skips.push(f.slice(1)):n.names.push(f)}function i(u,d){let f=0,h=0,p=-1,g=0;for(;f<u.length;)if(h<d.length&&(d[h]===u[f]||d[h]==="*"))d[h]==="*"?(p=h,g=f,h++):(f++,h++);else if(p!==-1)h=p+1,g++,f=g;else return!1;for(;h<d.length&&d[h]==="*";)h++;return h===d.length}function s(){let u=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){for(let d of n.skips)if(i(u,d))return!1;for(let d of n.names)if(i(u,d))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}rb.exports=_R});var ib=Ms((zt,ou)=>{"use strict";zt.formatArgs=DR;zt.save=SR;zt.load=IR;zt.useColors=CR;zt.storage=TR();zt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();zt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function CR(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function DR(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ou.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),e.splice(r,0,t)}zt.log=console.debug||console.log||(()=>{});function SR(e){try{e?zt.storage.setItem("debug",e):zt.storage.removeItem("debug")}catch{}}function IR(){let e;try{e=zt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function TR(){try{return localStorage}catch{}}ou.exports=ob()(zt);var{formatters:MR}=ou.exports;MR.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var cb=Ms((sb,ab)=>{"use strict";(function(e){var t=Object.hasOwnProperty,n=Array.isArray?Array.isArray:function(y){return Object.prototype.toString.call(y)==="[object Array]"},r=10,o=typeof process=="object"&&typeof process.nextTick=="function",i=typeof Symbol=="function",s=typeof Reflect=="object",a=typeof setImmediate=="function",c=a?setImmediate:setTimeout,l=i?s&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(E){var y=Object.getOwnPropertyNames(E);return y.push.apply(y,Object.getOwnPropertySymbols(E)),y}:Object.keys;function u(){this._events={},this._conf&&d.call(this,this._conf)}function d(E){E&&(this._conf=E,E.delimiter&&(this.delimiter=E.delimiter),E.maxListeners!==e&&(this._maxListeners=E.maxListeners),E.wildcard&&(this.wildcard=E.wildcard),E.newListener&&(this._newListener=E.newListener),E.removeListener&&(this._removeListener=E.removeListener),E.verboseMemoryLeak&&(this.verboseMemoryLeak=E.verboseMemoryLeak),E.ignoreErrors&&(this.ignoreErrors=E.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(E,y){var v="(node) warning: possible EventEmitter memory leak detected. "+E+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(v+=" Event name: "+y+"."),typeof process<"u"&&process.emitWarning){var S=new Error(v);S.name="MaxListenersExceededWarning",S.emitter=this,S.count=E,process.emitWarning(S)}else console.error(v),console.trace&&console.trace()}var h=function(E,y,v){var S=arguments.length;switch(S){case 0:return[];case 1:return[E];case 2:return[E,y];case 3:return[E,y,v];default:for(var x=new Array(S);S--;)x[S]=arguments[S];return x}};function p(E,y){for(var v={},S,x=E.length,C=y?y.length:0,_=0;_<x;_++)S=E[_],v[S]=_<C?y[_]:e;return v}function g(E,y,v){this._emitter=E,this._target=y,this._listeners={},this._listenersCount=0;var S,x;if((v.on||v.off)&&(S=v.on,x=v.off),y.addEventListener?(S=y.addEventListener,x=y.removeEventListener):y.addListener?(S=y.addListener,x=y.removeListener):y.on&&(S=y.on,x=y.off),!S&&!x)throw Error("target does not implement any known event API");if(typeof S!="function")throw TypeError("on method must be a function");if(typeof x!="function")throw TypeError("off method must be a function");this._on=S,this._off=x;var C=E._observers;C?C.push(this):E._observers=[this]}Object.assign(g.prototype,{subscribe:function(E,y,v){var S=this,x=this._target,C=this._emitter,_=this._listeners,T=function(){var I=h.apply(null,arguments),P={data:I,name:y,original:E};if(v){var H=v.call(x,P);H!==!1&&C.emit.apply(C,[P.name].concat(I));return}C.emit.apply(C,[y].concat(I))};if(_[E])throw Error("Event '"+E+"' is already listening");this._listenersCount++,C._newListener&&C._removeListener&&!S._onNewListener?(this._onNewListener=function(I){I===y&&_[E]===null&&(_[E]=T,S._on.call(x,E,T))},C.on("newListener",this._onNewListener),this._onRemoveListener=function(I){I===y&&!C.hasListeners(I)&&_[E]&&(_[E]=null,S._off.call(x,E,T))},_[E]=null,C.on("removeListener",this._onRemoveListener)):(_[E]=T,S._on.call(x,E,T))},unsubscribe:function(E){var y=this,v=this._listeners,S=this._emitter,x,C,_=this._off,T=this._target,I;if(E&&typeof E!="string")throw TypeError("event must be a string");function P(){y._onNewListener&&(S.off("newListener",y._onNewListener),S.off("removeListener",y._onRemoveListener),y._onNewListener=null,y._onRemoveListener=null);var H=z.call(S,y);S._observers.splice(H,1)}if(E){if(x=v[E],!x)return;_.call(T,E,x),delete v[E],--this._listenersCount||P()}else{for(C=l(v),I=C.length;I-- >0;)E=C[I],_.call(T,E,v[E]);this._listeners={},this._listenersCount=0,P()}}});function w(E,y,v,S){var x=Object.assign({},y);if(!E)return x;if(typeof E!="object")throw TypeError("options must be an object");var C=Object.keys(E),_=C.length,T,I,P;function H(j){throw Error('Invalid "'+T+'" option value'+(j?". Reason: "+j:""))}for(var F=0;F<_;F++){if(T=C[F],!S&&!t.call(y,T))throw Error('Unknown "'+T+'" option');I=E[T],I!==e&&(P=v[T],x[T]=P?P(I,H):I)}return x}function m(E,y){return(typeof E!="function"||!E.hasOwnProperty("prototype"))&&y("value must be a constructor"),E}function D(E){var y="value must be type of "+E.join("|"),v=E.length,S=E[0],x=E[1];return v===1?function(C,_){if(typeof C===S)return C;_(y)}:v===2?function(C,_){var T=typeof C;if(T===S||T===x)return C;_(y)}:function(C,_){for(var T=typeof C,I=v;I-- >0;)if(T===E[I])return C;_(y)}}var b=D(["function"]),O=D(["object","function"]);function N(E,y,v){var S,x,C=0,_,T=new E(function(I,P,H){v=w(v,{timeout:0,overload:!1},{timeout:function(K,G){return K*=1,(typeof K!="number"||K<0||!Number.isFinite(K))&&G("timeout must be a positive number"),K}}),S=!v.overload&&typeof E.prototype.cancel=="function"&&typeof H=="function";function F(){x&&(x=null),C&&(clearTimeout(C),C=0)}var j=function(K){F(),I(K)},L=function(K){F(),P(K)};S?y(j,L,H):(x=[function(K){L(K||Error("canceled"))}],y(j,L,function(K){if(_)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof K!="function")throw TypeError("onCancel callback must be a function");x.push(K)}),_=!0),v.timeout>0&&(C=setTimeout(function(){var K=Error("timeout");K.code="ETIMEDOUT",C=0,T.cancel(K),P(K)},v.timeout))});return S||(T.cancel=function(I){if(x){for(var P=x.length,H=1;H<P;H++)x[H](I);x[0](I),x=null}}),T}function z(E){var y=this._observers;if(!y)return-1;for(var v=y.length,S=0;S<v;S++)if(y[S]._target===E)return S;return-1}function q(E,y,v,S,x){if(!v)return null;if(S===0){var C=typeof y;if(C==="string"){var _,T,I=0,P=0,H=this.delimiter,F=H.length;if((T=y.indexOf(H))!==-1){_=new Array(5);do _[I++]=y.slice(P,T),P=T+F;while((T=y.indexOf(H,P))!==-1);_[I++]=y.slice(P),y=_,x=I}else y=[y],x=1}else C==="object"?x=y.length:(y=[y],x=1)}var j=null,L,K,G,ee,Q,se=y[S],re=y[S+1],ne,ae;if(S===x)v._listeners&&(typeof v._listeners=="function"?(E&&E.push(v._listeners),j=[v]):(E&&E.push.apply(E,v._listeners),j=[v]));else if(se==="*"){for(ne=l(v),T=ne.length;T-- >0;)L=ne[T],L!=="_listeners"&&(ae=q(E,y,v[L],S+1,x),ae&&(j?j.push.apply(j,ae):j=ae));return j}else if(se==="**"){for(Q=S+1===x||S+2===x&&re==="*",Q&&v._listeners&&(j=q(E,y,v,x,x)),ne=l(v),T=ne.length;T-- >0;)L=ne[T],L!=="_listeners"&&(L==="*"||L==="**"?(v[L]._listeners&&!Q&&(ae=q(E,y,v[L],x,x),ae&&(j?j.push.apply(j,ae):j=ae)),ae=q(E,y,v[L],S,x)):L===re?ae=q(E,y,v[L],S+2,x):ae=q(E,y,v[L],S,x),ae&&(j?j.push.apply(j,ae):j=ae));return j}else v[se]&&(j=q(E,y,v[se],S+1,x));if(K=v["*"],K&&q(E,y,K,S+1,x),G=v["**"],G)if(S<x)for(G._listeners&&q(E,y,G,x,x),ne=l(G),T=ne.length;T-- >0;)L=ne[T],L!=="_listeners"&&(L===re?q(E,y,G[L],S+2,x):L===se?q(E,y,G[L],S+1,x):(ee={},ee[L]=G[L],q(E,y,{"**":ee},S+1,x)));else G._listeners?q(E,y,G,x,x):G["*"]&&G["*"]._listeners&&q(E,y,G["*"],x,x);return j}function U(E,y,v){var S=0,x=0,C,_=this.delimiter,T=_.length,I;if(typeof E=="string")if((C=E.indexOf(_))!==-1){I=new Array(5);do I[S++]=E.slice(x,C),x=C+T;while((C=E.indexOf(_,x))!==-1);I[S++]=E.slice(x)}else I=[E],S=1;else I=E,S=E.length;if(S>1){for(C=0;C+1<S;C++)if(I[C]==="**"&&I[C+1]==="**")return}var P=this.listenerTree,H;for(C=0;C<S;C++)if(H=I[C],P=P[H]||(P[H]={}),C===S-1)return P._listeners?(typeof P._listeners=="function"&&(P._listeners=[P._listeners]),v?P._listeners.unshift(y):P._listeners.push(y),!P._listeners.warned&&this._maxListeners>0&&P._listeners.length>this._maxListeners&&(P._listeners.warned=!0,f.call(this,P._listeners.length,H))):P._listeners=y,!0;return!0}function W(E,y,v,S){for(var x=l(E),C=x.length,_,T,I,P=E._listeners,H;C-- >0;)T=x[C],_=E[T],T==="_listeners"?I=v:I=v?v.concat(T):[T],H=S||typeof T=="symbol",P&&y.push(H?I:I.join(this.delimiter)),typeof _=="object"&&W.call(this,_,y,I,H);return y}function $(E){for(var y=l(E),v=y.length,S,x,C;v-- >0;)x=y[v],S=E[x],S&&(C=!0,x!=="_listeners"&&!$(S)&&delete E[x]);return C}function R(E,y,v){this.emitter=E,this.event=y,this.listener=v}R.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function A(E,y,v){if(v===!0)x=!0;else if(v===!1)S=!0;else{if(!v||typeof v!="object")throw TypeError("options should be an object or true");var S=v.async,x=v.promisify,C=v.nextTick,_=v.objectify}if(S||C||x){var T=y,I=y._origin||y;if(C&&!o)throw Error("process.nextTick is not supported");x===e&&(x=y.constructor.name==="AsyncFunction"),y=function(){var P=arguments,H=this,F=this.event;return x?C?Promise.resolve():new Promise(function(j){c(j)}).then(function(){return H.event=F,T.apply(H,P)}):(C?process.nextTick:c)(function(){H.event=F,T.apply(H,P)})},y._async=!0,y._origin=I}return[y,_?new R(this,E,y):this]}function M(E){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,E)}M.EventEmitter2=M,M.prototype.listenTo=function(E,y,v){if(typeof E!="object")throw TypeError("target musts be an object");var S=this;v=w(v,{on:e,off:e,reducers:e},{on:b,off:b,reducers:O});function x(C){if(typeof C!="object")throw TypeError("events must be an object");var _=v.reducers,T=z.call(S,E),I;T===-1?I=new g(S,E,v):I=S._observers[T];for(var P=l(C),H=P.length,F,j=typeof _=="function",L=0;L<H;L++)F=P[L],I.subscribe(F,C[F]||F,j?_:_&&_[F])}return n(y)?x(p(y)):x(typeof y=="string"?p(y.split(/\s+/)):y),this},M.prototype.stopListeningTo=function(E,y){var v=this._observers;if(!v)return!1;var S=v.length,x,C=!1;if(E&&typeof E!="object")throw TypeError("target should be an object");for(;S-- >0;)x=v[S],(!E||x._target===E)&&(x.unsubscribe(y),C=!0);return C},M.prototype.delimiter=".",M.prototype.setMaxListeners=function(E){E!==e&&(this._maxListeners=E,this._conf||(this._conf={}),this._conf.maxListeners=E)},M.prototype.getMaxListeners=function(){return this._maxListeners},M.prototype.event="",M.prototype.once=function(E,y,v){return this._once(E,y,!1,v)},M.prototype.prependOnceListener=function(E,y,v){return this._once(E,y,!0,v)},M.prototype._once=function(E,y,v,S){return this._many(E,1,y,v,S)},M.prototype.many=function(E,y,v,S){return this._many(E,y,v,!1,S)},M.prototype.prependMany=function(E,y,v,S){return this._many(E,y,v,!0,S)},M.prototype._many=function(E,y,v,S,x){var C=this;if(typeof v!="function")throw new Error("many only accepts instances of Function");function _(){return--y===0&&C.off(E,_),v.apply(this,arguments)}return _._origin=v,this._on(E,_,S,x)},M.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var E=arguments[0],y,v=this.wildcard,S,x,C,_,T;if(E==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(v&&(y=E,E!=="newListener"&&E!=="removeListener"&&typeof E=="object")){if(x=E.length,i){for(C=0;C<x;C++)if(typeof E[C]=="symbol"){T=!0;break}}T||(E=E.join(this.delimiter))}var I=arguments.length,P;if(this._all&&this._all.length)for(P=this._all.slice(),C=0,x=P.length;C<x;C++)switch(this.event=E,I){case 1:P[C].call(this,E);break;case 2:P[C].call(this,E,arguments[1]);break;case 3:P[C].call(this,E,arguments[1],arguments[2]);break;default:P[C].apply(this,arguments)}if(v)P=[],q.call(this,P,y,this.listenerTree,0,x);else if(P=this._events[E],typeof P=="function"){switch(this.event=E,I){case 1:P.call(this);break;case 2:P.call(this,arguments[1]);break;case 3:P.call(this,arguments[1],arguments[2]);break;default:for(S=new Array(I-1),_=1;_<I;_++)S[_-1]=arguments[_];P.apply(this,S)}return!0}else P&&(P=P.slice());if(P&&P.length){if(I>3)for(S=new Array(I-1),_=1;_<I;_++)S[_-1]=arguments[_];for(C=0,x=P.length;C<x;C++)switch(this.event=E,I){case 1:P[C].call(this);break;case 2:P[C].call(this,arguments[1]);break;case 3:P[C].call(this,arguments[1],arguments[2]);break;default:P[C].apply(this,S)}return!0}else if(!this.ignoreErrors&&!this._all&&E==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},M.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var E=arguments[0],y=this.wildcard,v,S,x,C,_,T;if(E==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(y&&(v=E,E!=="newListener"&&E!=="removeListener"&&typeof E=="object")){if(C=E.length,i){for(_=0;_<C;_++)if(typeof E[_]=="symbol"){S=!0;break}}S||(E=E.join(this.delimiter))}var I=[],P=arguments.length,H;if(this._all)for(_=0,C=this._all.length;_<C;_++)switch(this.event=E,P){case 1:I.push(this._all[_].call(this,E));break;case 2:I.push(this._all[_].call(this,E,arguments[1]));break;case 3:I.push(this._all[_].call(this,E,arguments[1],arguments[2]));break;default:I.push(this._all[_].apply(this,arguments))}if(y?(H=[],q.call(this,H,v,this.listenerTree,0)):H=this._events[E],typeof H=="function")switch(this.event=E,P){case 1:I.push(H.call(this));break;case 2:I.push(H.call(this,arguments[1]));break;case 3:I.push(H.call(this,arguments[1],arguments[2]));break;default:for(x=new Array(P-1),T=1;T<P;T++)x[T-1]=arguments[T];I.push(H.apply(this,x))}else if(H&&H.length){if(H=H.slice(),P>3)for(x=new Array(P-1),T=1;T<P;T++)x[T-1]=arguments[T];for(_=0,C=H.length;_<C;_++)switch(this.event=E,P){case 1:I.push(H[_].call(this));break;case 2:I.push(H[_].call(this,arguments[1]));break;case 3:I.push(H[_].call(this,arguments[1],arguments[2]));break;default:I.push(H[_].apply(this,x))}}else if(!this.ignoreErrors&&!this._all&&E==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(I)},M.prototype.on=function(E,y,v){return this._on(E,y,!1,v)},M.prototype.prependListener=function(E,y,v){return this._on(E,y,!0,v)},M.prototype.onAny=function(E){return this._onAny(E,!1)},M.prototype.prependAny=function(E){return this._onAny(E,!0)},M.prototype.addListener=M.prototype.on,M.prototype._onAny=function(E,y){if(typeof E!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),y?this._all.unshift(E):this._all.push(E),this},M.prototype._on=function(E,y,v,S){if(typeof E=="function")return this._onAny(E,y),this;if(typeof y!="function")throw new Error("on only accepts instances of Function");this._events||u.call(this);var x=this,C;return S!==e&&(C=A.call(this,E,y,S),y=C[0],x=C[1]),this._newListener&&this.emit("newListener",E,y),this.wildcard?(U.call(this,E,y,v),x):(this._events[E]?(typeof this._events[E]=="function"&&(this._events[E]=[this._events[E]]),v?this._events[E].unshift(y):this._events[E].push(y),!this._events[E].warned&&this._maxListeners>0&&this._events[E].length>this._maxListeners&&(this._events[E].warned=!0,f.call(this,this._events[E].length,E))):this._events[E]=y,x)},M.prototype.off=function(E,y){if(typeof y!="function")throw new Error("removeListener only takes instances of Function");var v,S=[];if(this.wildcard){var x=typeof E=="string"?E.split(this.delimiter):E.slice();if(S=q.call(this,null,x,this.listenerTree,0),!S)return this}else{if(!this._events[E])return this;v=this._events[E],S.push({_listeners:v})}for(var C=0;C<S.length;C++){var _=S[C];if(v=_._listeners,n(v)){for(var T=-1,I=0,P=v.length;I<P;I++)if(v[I]===y||v[I].listener&&v[I].listener===y||v[I]._origin&&v[I]._origin===y){T=I;break}if(T<0)continue;return this.wildcard?_._listeners.splice(T,1):this._events[E].splice(T,1),v.length===0&&(this.wildcard?delete _._listeners:delete this._events[E]),this._removeListener&&this.emit("removeListener",E,y),this}else(v===y||v.listener&&v.listener===y||v._origin&&v._origin===y)&&(this.wildcard?delete _._listeners:delete this._events[E],this._removeListener&&this.emit("removeListener",E,y))}return this.listenerTree&&$(this.listenerTree),this},M.prototype.offAny=function(E){var y=0,v=0,S;if(E&&this._all&&this._all.length>0){for(S=this._all,y=0,v=S.length;y<v;y++)if(E===S[y])return S.splice(y,1),this._removeListener&&this.emit("removeListenerAny",E),this}else{if(S=this._all,this._removeListener)for(y=0,v=S.length;y<v;y++)this.emit("removeListenerAny",S[y]);this._all=[]}return this},M.prototype.removeListener=M.prototype.off,M.prototype.removeAllListeners=function(E){if(E===e)return!this._events||u.call(this),this;if(this.wildcard){var y=q.call(this,null,E,this.listenerTree,0),v,S;if(!y)return this;for(S=0;S<y.length;S++)v=y[S],v._listeners=null;this.listenerTree&&$(this.listenerTree)}else this._events&&(this._events[E]=null);return this},M.prototype.listeners=function(E){var y=this._events,v,S,x,C,_;if(E===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!y)return[];for(v=l(y),C=v.length,x=[];C-- >0;)S=y[v[C]],typeof S=="function"?x.push(S):x.push.apply(x,S);return x}else{if(this.wildcard){if(_=this.listenerTree,!_)return[];var T=[],I=typeof E=="string"?E.split(this.delimiter):E.slice();return q.call(this,T,I,_,0),T}return y?(S=y[E],S?typeof S=="function"?[S]:S:[]):[]}},M.prototype.eventNames=function(E){var y=this._events;return this.wildcard?W.call(this,this.listenerTree,[],null,E):y?l(y):[]},M.prototype.listenerCount=function(E){return this.listeners(E).length},M.prototype.hasListeners=function(E){if(this.wildcard){var y=[],v=typeof E=="string"?E.split(this.delimiter):E.slice();return q.call(this,y,v,this.listenerTree,0),y.length>0}var S=this._events,x=this._all;return!!(x&&x.length||S&&(E===e?l(S).length:S[E]))},M.prototype.listenersAny=function(){return this._all?this._all:[]},M.prototype.waitFor=function(E,y){var v=this,S=typeof y;return S==="number"?y={timeout:y}:S==="function"&&(y={filter:y}),y=w(y,{timeout:0,filter:e,handleError:!1,Promise,overload:!1},{filter:b,Promise:m}),N(y.Promise,function(x,C,_){function T(){var I=y.filter;if(!(I&&!I.apply(v,arguments)))if(v.off(E,T),y.handleError){var P=arguments[0];P?C(P):x(h.apply(null,arguments).slice(1))}else x(h.apply(null,arguments))}_(function(){v.off(E,T)}),v._on(E,T,!1)},{timeout:y.timeout,overload:y.overload})};function k(E,y,v){v=w(v,{Promise,timeout:0,overload:!1},{Promise:m});var S=v.Promise;return N(S,function(x,C,_){var T;if(typeof E.addEventListener=="function"){T=function(){x(h.apply(null,arguments))},_(function(){E.removeEventListener(y,T)}),E.addEventListener(y,T,{once:!0});return}var I=function(){P&&E.removeListener("error",P),x(h.apply(null,arguments))},P;y!=="error"&&(P=function(H){E.removeListener(y,I),C(H)},E.once("error",P)),_(function(){P&&E.removeListener("error",P),E.removeListener(y,I)}),E.once(y,I)},{timeout:v.timeout,overload:v.overload})}var B=M.prototype;if(Object.defineProperties(M,{defaultMaxListeners:{get:function(){return B._maxListeners},set:function(E){if(typeof E!="number"||E<0||Number.isNaN(E))throw TypeError("n must be a non-negative number");B._maxListeners=E},enumerable:!0},once:{value:k,writable:!0,configurable:!0}}),Object.defineProperties(B,{_maxListeners:{value:r,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return M});else if(typeof sb=="object")ab.exports=M;else{var V=new Function("","return this")();V.EventEmitter2=M}})()});function My(e,t){return Object.is(e,t)}var et=null,dc=!1,rf=1,en=Symbol("SIGNAL");function Ae(e){let t=et;return et=e,t}function xy(){return et}var As={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function of(e){if(dc)throw new Error("");if(et===null)return;et.consumerOnSignalRead(e);let t=et.nextProducerIndex++;if(gc(et),t<et.producerNode.length&&et.producerNode[t]!==e&&xs(et)){let n=et.producerNode[t];pc(n,et.producerIndexOfThis[t])}et.producerNode[t]!==e&&(et.producerNode[t]=e,et.producerIndexOfThis[t]=xs(et)?Ry(e,et,t):0),et.producerLastReadVersion[t]=e.version}function SI(){rf++}function Ay(e){if(!(xs(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===rf)){if(!e.producerMustRecompute(e)&&!af(e)){Ty(e);return}e.producerRecomputeValue(e),Ty(e)}}function ky(e){if(e.liveConsumerNode===void 0)return;let t=dc;dc=!0;try{for(let n of e.liveConsumerNode)n.dirty||II(n)}finally{dc=t}}function Ny(){return et?.consumerAllowSignalWrites!==!1}function II(e){e.dirty=!0,ky(e),e.consumerMarkedDirty?.(e)}function Ty(e){e.dirty=!1,e.lastCleanEpoch=rf}function hc(e){return e&&(e.nextProducerIndex=0),Ae(e)}function sf(e,t){if(Ae(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(xs(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)pc(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function af(e){gc(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Ay(n),r!==n.version))return!0}return!1}function cf(e){if(gc(e),xs(e))for(let t=0;t<e.producerNode.length;t++)pc(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Ry(e,t,n){if(Oy(e),e.liveConsumerNode.length===0&&Py(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Ry(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function pc(e,t){if(Oy(e),e.liveConsumerNode.length===1&&Py(e))for(let r=0;r<e.producerNode.length;r++)pc(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];gc(o),o.producerIndexOfThis[r]=t}}function xs(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function gc(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Oy(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Py(e){return e.producerNode!==void 0}function Ly(e){let t=Object.create(TI);t.computation=e;let n=()=>{if(Ay(t),of(t),t.value===fc)throw t.error;return t.value};return n[en]=t,n}var tf=Symbol("UNSET"),nf=Symbol("COMPUTING"),fc=Symbol("ERRORED"),TI=Se(de({},As),{value:tf,dirty:!0,error:null,equal:My,kind:"computed",producerMustRecompute(e){return e.value===tf||e.value===nf},producerRecomputeValue(e){if(e.value===nf)throw new Error("Detected cycle in computations.");let t=e.value;e.value=nf;let n=hc(e),r,o=!1;try{r=e.computation(),Ae(null),o=t!==tf&&t!==fc&&r!==fc&&e.equal(t,r)}catch(i){r=fc,e.error=i}finally{sf(e,n)}if(o){e.value=t;return}e.value=r,e.version++}});function MI(){throw new Error}var Fy=MI;function By(){Fy()}function jy(e){Fy=e}var xI=null;function Vy(e){let t=Object.create(Uy);t.value=e;let n=()=>(of(t),t.value);return n[en]=t,n}function lf(e,t){Ny()||By(),e.equal(e.value,t)||(e.value=t,AI(e))}function $y(e,t){Ny()||By(),lf(e,t(e.value))}var Uy=Se(de({},As),{equal:My,value:void 0,kind:"signal"});function AI(e){e.version++,SI(),ky(e),xI?.()}function Ie(e){return typeof e=="function"}function mc(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var yc=mc(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ks(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Dt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ie(r))try{r()}catch(i){t=i instanceof yc?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Hy(i)}catch(s){t=t??[],s instanceof yc?t=[...t,...s.errors]:t.push(s)}}if(t)throw new yc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Hy(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ks(n,t)}remove(t){let{_finalizers:n}=this;n&&ks(n,t),t instanceof e&&t._removeParent(this)}};Dt.EMPTY=(()=>{let e=new Dt;return e.closed=!0,e})();var uf=Dt.EMPTY;function vc(e){return e instanceof Dt||e&&"closed"in e&&Ie(e.remove)&&Ie(e.add)&&Ie(e.unsubscribe)}function Hy(e){Ie(e)?e():e.unsubscribe()}var bn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var li={setTimeout(e,t,...n){let{delegate:r}=li;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=li;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function wc(e){li.setTimeout(()=>{let{onUnhandledError:t}=bn;if(t)t(e);else throw e})}function Ns(){}var zy=df("C",void 0,void 0);function Ky(e){return df("E",void 0,e)}function qy(e){return df("N",e,void 0)}function df(e,t,n){return{kind:e,value:t,error:n}}var _o=null;function ui(e){if(bn.useDeprecatedSynchronousErrorHandling){let t=!_o;if(t&&(_o={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=_o;if(_o=null,n)throw r}}else e()}function Wy(e){bn.useDeprecatedSynchronousErrorHandling&&_o&&(_o.errorThrown=!0,_o.error=e)}var Co=class extends Dt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,vc(t)&&t.add(this)):this.destination=RI}static create(t,n,r){return new di(t,n,r)}next(t){this.isStopped?hf(qy(t),this):this._next(t)}error(t){this.isStopped?hf(Ky(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?hf(zy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kI=Function.prototype.bind;function ff(e,t){return kI.call(e,t)}var pf=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ec(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ec(r)}else Ec(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ec(n)}}},di=class extends Co{constructor(t,n,r){super();let o;if(Ie(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&bn.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&ff(t.next,i),error:t.error&&ff(t.error,i),complete:t.complete&&ff(t.complete,i)}):o=t}this.destination=new pf(o)}};function Ec(e){bn.useDeprecatedSynchronousErrorHandling?Wy(e):wc(e)}function NI(e){throw e}function hf(e,t){let{onStoppedNotification:n}=bn;n&&li.setTimeout(()=>n(e,t))}var RI={closed:!0,next:Ns,error:NI,complete:Ns};var fi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bc(e){return e}function Gy(e){return e.length===0?bc:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var Ue=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=PI(n)?n:new di(n,r,o);return ui(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Zy(r),new r((o,i)=>{let s=new di({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fi](){return this}pipe(...n){return Gy(n)(this)}toPromise(n){return n=Zy(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function Zy(e){var t;return(t=e??bn.Promise)!==null&&t!==void 0?t:Promise}function OI(e){return e&&Ie(e.next)&&Ie(e.error)&&Ie(e.complete)}function PI(e){return e&&e instanceof Co||OI(e)&&vc(e)}function LI(e){return Ie(e?.lift)}function ot(e){return t=>{if(LI(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function it(e,t,n,r,o){return new gf(e,t,n,r,o)}var gf=class extends Co{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Yy=mc(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Vt=(()=>{class e extends Ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new _c(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Yy}next(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?uf:(this.currentObservers=null,i.push(n),new Dt(()=>{this.currentObservers=null,ks(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Ue;return n.source=this,n}}return e.create=(t,n)=>new _c(t,n),e})(),_c=class extends Vt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:uf}};var Rs=class extends Vt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var mf={now(){return(mf.delegate||Date).now()},delegate:void 0};var Os=class extends Vt{constructor(t=1/0,n=1/0,r=mf){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;n||(r.push(t),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!t.closed;s+=r?1:2)t.next(i[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*t;if(t<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Jy=new Ue(e=>e.complete());function Qy(e){return e&&Ie(e.schedule)}function yf(e){return e[e.length-1]}function Xy(e){return Ie(yf(e))?e.pop():void 0}function Cc(e){return Qy(yf(e))?e.pop():void 0}function e0(e,t){return typeof yf(e)=="number"?e.pop():t}function n0(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function t0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Do(e){return this instanceof Do?(this.v=e,this):new Do(e)}function r0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(o[h]=function(g){return new Promise(function(w,m){i.push([h,g,w,m])>1||c(h,g)})},p&&(o[h]=p(o[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(i[0][3],g)}}function l(h){h.value instanceof Do?Promise.resolve(h.value.v).then(u,d):f(i[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function o0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof t0=="function"?t0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var Dc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Sc(e){return Ie(e?.then)}function Ic(e){return Ie(e[fi])}function Tc(e){return Symbol.asyncIterator&&Ie(e?.[Symbol.asyncIterator])}function Mc(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xc=FI();function Ac(e){return Ie(e?.[xc])}function kc(e){return r0(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield Do(n.read());if(o)return yield Do(void 0);yield yield Do(r)}}finally{n.releaseLock()}})}function Nc(e){return Ie(e?.getReader)}function Xe(e){if(e instanceof Ue)return e;if(e!=null){if(Ic(e))return BI(e);if(Dc(e))return jI(e);if(Sc(e))return VI(e);if(Tc(e))return i0(e);if(Ac(e))return $I(e);if(Nc(e))return UI(e)}throw Mc(e)}function BI(e){return new Ue(t=>{let n=e[fi]();if(Ie(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jI(e){return new Ue(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function VI(e){return new Ue(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,wc)})}function $I(e){return new Ue(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function i0(e){return new Ue(t=>{HI(e,t).catch(n=>t.error(n))})}function UI(e){return i0(kc(e))}function HI(e,t){var n,r,o,i;return n0(this,void 0,void 0,function*(){try{for(n=o0(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function tn(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Rc(e,t=0){return ot((n,r)=>{n.subscribe(it(r,o=>tn(r,e,()=>r.next(o),t),()=>tn(r,e,()=>r.complete(),t),o=>tn(r,e,()=>r.error(o),t)))})}function Oc(e,t=0){return ot((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function s0(e,t){return Xe(e).pipe(Oc(t),Rc(t))}function a0(e,t){return Xe(e).pipe(Oc(t),Rc(t))}function c0(e,t){return new Ue(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function l0(e,t){return new Ue(n=>{let r;return tn(n,t,()=>{r=e[xc](),tn(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>Ie(r?.return)&&r.return()})}function Pc(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ue(n=>{tn(n,t,()=>{let r=e[Symbol.asyncIterator]();tn(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function u0(e,t){return Pc(kc(e),t)}function d0(e,t){if(e!=null){if(Ic(e))return s0(e,t);if(Dc(e))return c0(e,t);if(Sc(e))return a0(e,t);if(Tc(e))return Pc(e,t);if(Ac(e))return l0(e,t);if(Nc(e))return u0(e,t)}throw Mc(e)}function or(e,t){return t?d0(e,t):Xe(e)}function Lc(...e){let t=Cc(e);return or(e,t)}function Rt(e,t){return ot((n,r)=>{let o=0;n.subscribe(it(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:zI}=Array;function KI(e,t){return zI(t)?e(...t):e(t)}function f0(e){return Rt(t=>KI(e,t))}var{isArray:qI}=Array,{getPrototypeOf:WI,prototype:GI,keys:ZI}=Object;function h0(e){if(e.length===1){let t=e[0];if(qI(t))return{args:t,keys:null};if(YI(t)){let n=ZI(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function YI(e){return e&&typeof e=="object"&&WI(e)===GI}function p0(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function g0(e,t,n,r,o,i,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=g=>l<r?p(g):c.push(g),p=g=>{i&&t.next(g),l++;let w=!1;Xe(n(g,u++)).subscribe(it(t,m=>{o?.(m),i?h(m):t.next(m)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let m=c.shift();s?tn(t,s,()=>p(m)):p(m)}f()}catch(m){t.error(m)}}))};return e.subscribe(it(t,h,()=>{d=!0,f()})),()=>{a?.()}}function hi(e,t,n=1/0){return Ie(t)?hi((r,o)=>Rt((i,s)=>t(r,i,o,s))(Xe(e(r,o))),n):(typeof t=="number"&&(n=t),ot((r,o)=>g0(r,o,e,n)))}function m0(e=1/0){return hi(bc,e)}function vf(...e){let t=Xy(e),{args:n,keys:r}=h0(e),o=new Ue(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Xe(n[u]).subscribe(it(i,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||i.next(r?p0(r,a):a),i.complete())}))}});return t?o.pipe(f0(t)):o}function wf(...e){let t=Cc(e),n=e0(e,1/0),r=e;return r.length?r.length===1?Xe(r[0]):m0(n)(or(r,t)):Jy}function Ef(e,t){return ot((n,r)=>{let o=0;n.subscribe(it(r,i=>e.call(t,i,o++)&&r.next(i)))})}function Fc(e){return ot((t,n)=>{let r=null,o=!1,i;r=t.subscribe(it(n,void 0,void 0,s=>{i=Xe(e(s,Fc(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function bf(e,t){return Ie(t)?hi(e,t,1):hi(e,1)}function _f(e){return ot((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Ps(e,t){return ot((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(it(r,c=>{o?.unsubscribe();let l=0,u=i++;Xe(e(c,u)).subscribe(o=it(r,d=>r.next(t?t(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Cf(e){return ot((t,n)=>{Xe(e).subscribe(it(n,()=>n.complete(),Ns)),!n.closed&&t.subscribe(n)})}var JI="https://g.co/ng/security#xss",ve=class extends Error{code;constructor(t,n){super(vl(t,n)),this.code=t}};function vl(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function qs(e){return{toString:e}.toString()}var Bc="__parameters__";function QI(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function nv(e,t,n){return qs(()=>{let r=QI(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Bc)?c[Bc]:Object.defineProperty(c,Bc,{value:[]})[Bc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function He(e){for(let t in e)if(e[t]===He)return t;throw Error("Could not find renamed property on target object.")}function XI(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $t(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map($t).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function y0(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var eT=He({__forward_ref__:He});function Ro(e){return e.__forward_ref__=Ro,e.toString=function(){return $t(this())},e}function St(e){return rv(e)?e():e}function rv(e){return typeof e=="function"&&e.hasOwnProperty(eT)&&e.__forward_ref__===Ro}function Pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Oo(e){return{providers:e.providers||[],imports:e.imports||[]}}function _h(e){return v0(e,ov)||v0(e,iv)}function v0(e,t){return e.hasOwnProperty(t)?e[t]:null}function tT(e){let t=e&&(e[ov]||e[iv]);return t||null}function w0(e){return e&&(e.hasOwnProperty(E0)||e.hasOwnProperty(nT))?e[E0]:null}var ov=He({\u0275prov:He}),E0=He({\u0275inj:He}),iv=He({ngInjectableDef:He}),nT=He({ngInjectorDef:He}),ge=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sv(e){return e&&!!e.\u0275providers}var rT=He({\u0275cmp:He}),oT=He({\u0275dir:He}),iT=He({\u0275pipe:He});var qc=He({\u0275fac:He}),js=He({__NG_ELEMENT_ID__:He}),b0=He({__NG_ENV_ID__:He});function Wc(e){return typeof e=="string"?e:e==null?"":String(e)}function sT(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Wc(e)}function aT(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ve(-200,e)}function Ch(e,t){throw new ve(-201,!1)}var Te=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Te||{}),Lf;function av(){return Lf}function nn(e){let t=Lf;return Lf=e,t}function cv(e,t,n){let r=_h(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Te.Optional)return null;if(t!==void 0)return t;Ch(e,"Injector")}var cT={},Vs=cT,Ff="__NG_DI_FLAG__",Gc="ngTempTokenPath",lT="ngTokenPath",uT=/\n/gm,dT="\u0275",_0="__source",yi;function fT(){return yi}function Or(e){let t=yi;return yi=e,t}function hT(e,t=Te.Default){if(yi===void 0)throw new ve(-203,!1);return yi===null?cv(e,void 0,t):yi.get(e,t&Te.Optional?null:void 0,t)}function Me(e,t=Te.Default){return(av()||hT)(St(e),t)}function be(e,t=Te.Default){return Me(e,wl(t))}function wl(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Bf(e){let t=[];for(let n=0;n<e.length;n++){let r=St(e[n]);if(Array.isArray(r)){if(r.length===0)throw new ve(900,!1);let o,i=Te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=pT(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}t.push(Me(o,i))}else t.push(Me(r))}return t}function lv(e,t){return e[Ff]=t,e.prototype[Ff]=t,e}function pT(e){return e[Ff]}function gT(e,t,n,r){let o=e[Gc];throw t[_0]&&o.unshift(t[_0]),e.message=mT(`
`+e.message,o,n,r),e[lT]=o,e[Gc]=null,e}function mT(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==dT?e.slice(2):e;let o=$t(t);if(Array.isArray(t))o=t.map($t).join(" -> ");else if(typeof t=="object"){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):$t(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(uT,`
  `)}`}var uv=lv(nv("Optional"),8);var yT=lv(nv("SkipSelf"),4);function wi(e,t){let n=e.hasOwnProperty(qc);return n?e[qc]:null}function Dh(e,t){e.forEach(n=>Array.isArray(n)?Dh(n,t):t(n))}function dv(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Zc(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function vT(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function wT(e,t,n){let r=Ws(e,t);return r>=0?e[r|1]=n:(r=~r,vT(e,r,t,n)),r}function Df(e,t){let n=Ws(e,t);if(n>=0)return e[n|1]}function Ws(e,t){return ET(e,t,1)}function ET(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var Ei={},rn=[],$s=new ge(""),fv=new ge("",-1),hv=new ge(""),Yc=class{get(t,n=Vs){if(n===Vs){let r=new Error(`NullInjectorError: No provider for ${$t(t)}!`);throw r.name="NullInjectorError",r}return n}};function bi(e){return e[rT]||null}function pv(e){return e[oT]||null}function gv(e){return e[iT]||null}function bT(e){let t=bi(e)||pv(e)||gv(e);return t!==null&&t.standalone}function Sh(e){return{\u0275providers:e}}function _T(...e){return{\u0275providers:mv(!0,e),\u0275fromNgModule:!0}}function mv(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return Dh(t,s=>{let a=s;jf(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&yv(o,i),n}function yv(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];Ih(o,i=>{t(i,r)})}}function jf(e,t,n,r){if(e=St(e),!e)return!1;let o=null,i=w0(e),s=!i&&bi(e);if(!i&&!s){let c=e.ngModule;if(i=w0(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)jf(l,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{Dh(i.imports,u=>{jf(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&yv(l,t)}if(!a){let l=wi(o)||(()=>new o);t({provide:o,useFactory:l,deps:rn},o),t({provide:hv,useValue:o,multi:!0},o),t({provide:$s,useValue:()=>Me(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=e;Ih(c,u=>{t(u,l)})}}else return!1;return o!==e&&e.providers!==void 0}function Ih(e,t){for(let n of e)sv(n)&&(n=n.\u0275providers),Array.isArray(n)?Ih(n,t):t(n)}var CT=He({provide:String,useValue:He});function vv(e){return e!==null&&typeof e=="object"&&CT in e}function DT(e){return!!(e&&e.useExisting)}function ST(e){return!!(e&&e.useFactory)}function _i(e){return typeof e=="function"}function IT(e){return!!e.useClass}var El=new ge(""),$c={},TT={},Sf;function Th(){return Sf===void 0&&(Sf=new Yc),Sf}var Ln=class{},Us=class extends Ln{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,$f(t,s=>this.processProvider(s)),this.records.set(fv,pi(void 0,this)),o.has("environment")&&this.records.set(Ln,pi(void 0,this));let i=this.records.get(El);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(hv,rn,Te.Self))}destroy(){Fs(this),this._destroyed=!0;let t=Ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(t)}}onDestroy(t){return Fs(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Fs(this);let n=Or(this),r=nn(void 0),o;try{return t()}finally{Or(n),nn(r)}}get(t,n=Vs,r=Te.Default){if(Fs(this),t.hasOwnProperty(b0))return t[b0](this);r=wl(r);let o,i=Or(this),s=nn(void 0);try{if(!(r&Te.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=NT(t)&&_h(t);l&&this.injectableDefInScope(l)?c=pi(Vf(t),$c):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&Te.Self?Th():this.parent;return n=r&Te.Optional&&n===Vs?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Gc]=a[Gc]||[]).unshift($t(t)),i)throw a;return gT(a,t,"R3InjectorError",this.source)}else throw a}finally{nn(s),Or(i)}}resolveInjectorInitializers(){let t=Ae(null),n=Or(this),r=nn(void 0),o;try{let i=this.get($s,rn,Te.Self);for(let s of i)s()}finally{Or(n),nn(r),Ae(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push($t(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=St(t);let n=_i(t)?t:St(t&&t.provide),r=xT(t);if(!_i(t)&&t.multi===!0){let o=this.records.get(n);o||(o=pi(void 0,$c,!0),o.factory=()=>Bf(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Ae(null);try{return n.value===$c&&(n.value=TT,n.value=n.factory()),typeof n.value=="object"&&n.value&&kT(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ae(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=St(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Vf(e){let t=_h(e),n=t!==null?t.factory:wi(e);if(n!==null)return n;if(e instanceof ge)throw new ve(204,!1);if(e instanceof Function)return MT(e);throw new ve(204,!1)}function MT(e){if(e.length>0)throw new ve(204,!1);let n=tT(e);return n!==null?()=>n.factory(e):()=>new e}function xT(e){if(vv(e))return pi(void 0,e.useValue);{let t=wv(e);return pi(t,$c)}}function wv(e,t,n){let r;if(_i(e)){let o=St(e);return wi(o)||Vf(o)}else if(vv(e))r=()=>St(e.useValue);else if(ST(e))r=()=>e.useFactory(...Bf(e.deps||[]));else if(DT(e))r=()=>Me(St(e.useExisting));else{let o=St(e&&(e.useClass||e.provide));if(AT(e))r=()=>new o(...Bf(e.deps));else return wi(o)||Vf(o)}return r}function Fs(e){if(e.destroyed)throw new ve(205,!1)}function pi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function AT(e){return!!e.deps}function kT(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function NT(e){return typeof e=="function"||typeof e=="object"&&e instanceof ge}function $f(e,t){for(let n of e)Array.isArray(n)?$f(n,t):n&&sv(n)?$f(n.\u0275providers,t):t(n)}function bl(e,t){e instanceof Us&&Fs(e);let n,r=Or(e),o=nn(void 0);try{return t()}finally{Or(r),nn(o)}}function RT(){return av()!==void 0||fT()!=null}function OT(e){return typeof e=="function"}var lr=0,Ne=1,ye=2,It=3,Cn=4,Sn=5,Jc=6,Qc=7,an=8,Hs=9,Fr=10,st=11,zs=12,C0=13,Ai=14,Fn=15,Ci=16,gi=17,Di=18,_l=19,Ev=20,Pr=21,If=22,Xc=23,Ut=24,ir=25,bv=1;var Io=7,el=8,tl=9,sn=10;function Lr(e){return Array.isArray(e)&&typeof e[bv]=="object"}function ur(e){return Array.isArray(e)&&e[bv]===!0}function _v(e){return(e.flags&4)!==0}function Po(e){return e.componentOffset>-1}function Mh(e){return(e.flags&1)===1}function sr(e){return!!e.template}function nl(e){return(e[ye]&512)!==0}function Gs(e){return(e[ye]&256)===256}var Uf=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Cv(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Zs=(()=>{let e=()=>Dv;return e.ngInherit=!0,e})();function Dv(e){return e.type.prototype.ngOnChanges&&(e.setInput=LT),PT}function PT(){let e=Iv(this),t=e?.current;if(t){let n=e.previous;if(n===Ei)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function LT(e,t,n,r,o){let i=this.declaredInputs[r],s=Iv(e)||FT(e,{previous:Ei,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new Uf(l&&l.currentValue,n,c===Ei),Cv(e,t,o,n)}var Sv="__ngSimpleChanges__";function Iv(e){return e[Sv]||null}function FT(e,t){return e[Sv]=t}var D0=null;var on=function(e,t,n){D0?.(e,t,n)},BT="svg",jT="math";function Bn(e){for(;Array.isArray(e);)e=e[lr];return e}function Tv(e,t){return Bn(t[e])}function $n(e,t){return Bn(t[e.index])}function Mv(e,t){return e.data[t]}function jn(e,t){let n=t[e];return Lr(n)?n:n[lr]}function xh(e){return(e[ye]&128)===128}function VT(e){return ur(e[It])}function rl(e,t){return t==null?null:e[t]}function xv(e){e[gi]=0}function Ah(e){e[ye]&1024||(e[ye]|=1024,xh(e)&&Dl(e))}function $T(e,t){for(;e>0;)t=t[Ai],e--;return t}function Cl(e){return!!(e[ye]&9216||e[Ut]?.dirty)}function Hf(e){e[Fr].changeDetectionScheduler?.notify(9),e[ye]&64&&(e[ye]|=1024),Cl(e)&&Dl(e)}function Dl(e){e[Fr].changeDetectionScheduler?.notify(0);let t=To(e);for(;t!==null&&!(t[ye]&8192||(t[ye]|=8192,!xh(t)));)t=To(t)}function Av(e,t){if(Gs(e))throw new ve(911,!1);e[Pr]===null&&(e[Pr]=[]),e[Pr].push(t)}function UT(e,t){if(e[Pr]===null)return;let n=e[Pr].indexOf(t);n!==-1&&e[Pr].splice(n,1)}function To(e){let t=e[It];return ur(t)?t[It]:t}function HT(e){return e[Qc]??=[]}function zT(e){return e.cleanup??=[]}var De={lFrame:jv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zf=!1;function KT(){return De.lFrame.elementDepthCount}function qT(){De.lFrame.elementDepthCount++}function WT(){De.lFrame.elementDepthCount--}function kv(){return De.bindingsEnabled}function GT(){return De.skipHydrationRootTNode!==null}function ZT(e){return De.skipHydrationRootTNode===e}function YT(){De.skipHydrationRootTNode=null}function Ke(){return De.lFrame.lView}function cn(){return De.lFrame.tView}function Lo(e){return De.lFrame.contextLView=e,e[an]}function Fo(e){return De.lFrame.contextLView=null,e}function ln(){let e=Nv();for(;e!==null&&e.type===64;)e=e.parent;return e}function Nv(){return De.lFrame.currentTNode}function JT(){let e=De.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ys(e,t){let n=De.lFrame;n.currentTNode=e,n.isParent=t}function Rv(){return De.lFrame.isParent}function QT(){De.lFrame.isParent=!1}function Ov(){return zf}function S0(e){let t=zf;return zf=e,t}function XT(){return De.lFrame.bindingIndex}function eM(e){return De.lFrame.bindingIndex=e}function kh(){return De.lFrame.bindingIndex++}function Pv(e){let t=De.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function tM(){return De.lFrame.inI18n}function nM(e,t){let n=De.lFrame;n.bindingIndex=n.bindingRootIndex=e,Kf(t)}function rM(){return De.lFrame.currentDirectiveIndex}function Kf(e){De.lFrame.currentDirectiveIndex=e}function oM(e){let t=De.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Lv(e){De.lFrame.currentQueryIndex=e}function iM(e){let t=e[Ne];return t.type===2?t.declTNode:t.type===1?e[Sn]:null}function Fv(e,t,n){if(n&Te.SkipSelf){let o=t,i=e;for(;o=o.parent,o===null&&!(n&Te.Host);)if(o=iM(i),o===null||(i=i[Ai],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=De.lFrame=Bv();return r.currentTNode=t,r.lView=e,!0}function Nh(e){let t=Bv(),n=e[Ne];De.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Bv(){let e=De.lFrame,t=e===null?null:e.child;return t===null?jv(e):t}function jv(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Vv(){let e=De.lFrame;return De.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var $v=Vv;function Rh(){let e=Vv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function sM(e){return(De.lFrame.contextLView=$T(e,De.lFrame.contextLView))[an]}function Bo(){return De.lFrame.selectedIndex}function Mo(e){De.lFrame.selectedIndex=e}function Uv(){let e=De.lFrame;return Mv(e.tView,e.selectedIndex)}function aM(){return De.lFrame.currentNamespace}var Hv=!0;function Oh(){return Hv}function Ph(e){Hv=e}function cM(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=Dv(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function Lh(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Uc(e,t,n){zv(e,t,3,n)}function Hc(e,t,n,r){(e[ye]&3)===n&&zv(e,t,n,r)}function Tf(e,t){let n=e[ye];(n&3)===t&&(n&=16383,n+=1,e[ye]=n)}function zv(e,t,n,r){let o=r!==void 0?e[gi]&65535:0,i=r??-1,s=t.length-1,a=0;for(let c=o;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[gi]+=65536),(a<i||i==-1)&&(lM(e,n,t,c),e[gi]=(e[gi]&4294901760)+c+2),c++}function I0(e,t){on(4,e,t);let n=Ae(null);try{t.call(e)}finally{Ae(n),on(5,e,t)}}function lM(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[ye]>>14<e[gi]>>16&&(e[ye]&3)===t&&(e[ye]+=16384,I0(a,i)):I0(a,i)}var vi=-1,xo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function uM(e){return e instanceof xo}function dM(e){return(e.flags&8)!==0}function fM(e){return(e.flags&16)!==0}function hM(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];gM(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function pM(e){return e===3||e===4||e===6}function gM(e){return e.charCodeAt(0)===64}function Si(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?T0(e,n,o,null,t[++r]):T0(e,n,o,null,null))}}return e}function T0(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(e[i+1]=o);return}else if(r===e[i+1]){e[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),o!==null&&e.splice(i++,0,o)}var Mf={},qf=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=wl(r);let o=this.injector.get(t,Mf,r);return o!==Mf||n===Mf?o:this.parentInjector.get(t,n,r)}};function Kv(e){return e!==vi}function ol(e){return e&32767}function mM(e){return e>>16}function il(e,t){let n=mM(e),r=t;for(;n>0;)r=r[Ai],n--;return r}var Wf=!0;function M0(e){let t=Wf;return Wf=e,t}var yM=256,qv=yM-1,Wv=5,vM=0,Pn={};function wM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(js)&&(r=n[js]),r==null&&(r=n[js]=vM++);let o=r&qv,i=1<<o;t.data[e+(o>>Wv)]|=i}function sl(e,t){let n=Gv(e,t);if(n!==-1)return n;let r=t[Ne];r.firstCreatePass&&(e.injectorIndex=t.length,xf(r.data,e),xf(t,null),xf(r.blueprint,null));let o=Fh(e,t),i=e.injectorIndex;if(Kv(o)){let s=ol(o),a=il(o,t),c=a[Ne].data;for(let l=0;l<8;l++)t[i+l]=a[s+l]|c[s+l]}return t[i+8]=o,i}function xf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Gv(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Fh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=Xv(o),r===null)return vi;if(n++,o=o[Ai],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vi}function Gf(e,t,n){wM(e,t,n)}function Zv(e,t,n){if(n&Te.Optional||e!==void 0)return e;Ch(t,"NodeInjector")}function Yv(e,t,n,r){if(n&Te.Optional&&r===void 0&&(r=null),!(n&(Te.Self|Te.Host))){let o=e[Hs],i=nn(void 0);try{return o?o.get(t,r,n&Te.Optional):cv(t,r,n&Te.Optional)}finally{nn(i)}}return Zv(r,t,n)}function Jv(e,t,n,r=Te.Default,o){if(e!==null){if(t[ye]&2048&&!(r&Te.Self)){let s=DM(e,t,n,r,Pn);if(s!==Pn)return s}let i=Qv(e,t,n,r,Pn);if(i!==Pn)return i}return Yv(t,n,r,o)}function Qv(e,t,n,r,o){let i=_M(n);if(typeof i=="function"){if(!Fv(t,e,r))return r&Te.Host?Zv(o,n,r):Yv(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&Te.Optional))Ch(n);else return s}finally{$v()}}else if(typeof i=="number"){let s=null,a=Gv(e,t),c=vi,l=r&Te.Host?t[Fn][Sn]:null;for((a===-1||r&Te.SkipSelf)&&(c=a===-1?Fh(e,t):t[a+8],c===vi||!A0(r,!1)?a=-1:(s=t[Ne],a=ol(c),t=il(c,t)));a!==-1;){let u=t[Ne];if(x0(i,a,u.data)){let d=EM(a,t,n,s,r,l);if(d!==Pn)return d}c=t[a+8],c!==vi&&A0(r,t[Ne].data[a+8]===l)&&x0(i,a,t)?(s=u,a=ol(c),t=il(c,t)):a=-1}}return o}function EM(e,t,n,r,o,i){let s=t[Ne],a=s.data[e+8],c=r==null?Po(a)&&Wf:r!=s&&(a.type&3)!==0,l=o&Te.Host&&i===a,u=bM(a,s,n,c,l);return u!==null?al(t,s,u,a):Pn}function bM(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,c=e.directiveStart,l=e.directiveEnd,u=i>>20,d=r?a:a+u,f=o?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(o){let h=s[c];if(h&&sr(h)&&h.type===n)return c}return null}function al(e,t,n,r){let o=e[n],i=t.data;if(uM(o)){let s=o;s.resolving&&aT(sT(i[n]));let a=M0(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?nn(s.injectImpl):null,u=Fv(e,r,Te.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&cM(n,i[n],t)}finally{l!==null&&nn(l),M0(a),s.resolving=!1,$v()}}return o}function _M(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(js)?e[js]:void 0;return typeof t=="number"?t>=0?t&qv:CM:t}function x0(e,t,n){let r=1<<e;return!!(n[t+(e>>Wv)]&r)}function A0(e,t){return!(e&Te.Self)&&!(e&Te.Host&&t)}var So=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Jv(this._tNode,this._lView,t,wl(r),n)}};function CM(){return new So(ln(),Ke())}function Sl(e){return qs(()=>{let t=e.prototype.constructor,n=t[qc]||Zf(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[qc]||Zf(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Zf(e){return rv(e)?()=>{let t=Zf(St(e));return t&&t()}:wi(e)}function DM(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[ye]&2048&&!nl(s);){let a=Qv(i,s,n,r|Te.Self,Pn);if(a!==Pn)return a;let c=i.parent;if(!c){let l=s[Ev];if(l){let u=l.get(n,Pn,r);if(u!==Pn)return u}c=Xv(s),s=s[Ai]}i=c}return o}function Xv(e){let t=e[Ne],n=t.type;return n===2?t.declTNode:n===1?e[Sn]:null}function k0(e,t=null,n=null,r){let o=SM(e,t,n,r);return o.resolveInjectorInitializers(),o}function SM(e,t=null,n=null,r,o=new Set){let i=[n||rn,_T(e)];return r=r||(typeof e=="object"?void 0:$t(e)),new Us(i,t||Th(),r||null,o)}var Dn=class e{static THROW_IF_NOT_FOUND=Vs;static NULL=new Yc;static create(t,n){if(Array.isArray(t))return k0({name:""},n,t,"");{let r=t.name??"";return k0({name:r},t.parent,t.providers,r)}}static \u0275prov=Pe({token:e,providedIn:"any",factory:()=>Me(fv)});static __NG_ELEMENT_ID__=-1};var IM=new ge("");IM.__NG_ELEMENT_ID__=e=>{let t=ln();if(t===null)throw new ve(204,!1);if(t.type&2)return t.value;if(e&Te.Optional)return null;throw new ve(204,!1)};var ew=!1,tw=(()=>{class e{static __NG_ELEMENT_ID__=TM;static __NG_ENV_ID__=n=>n}return e})(),Yf=class extends tw{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return Av(this._lView,t),()=>UT(this._lView,t)}};function TM(){return new Yf(Ke())}var Ao=class{},Bh=new ge("",{providedIn:"root",factory:()=>!1});var nw=new ge(""),rw=new ge(""),ki=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Rs(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Pe({token:e,providedIn:"root",factory:()=>new e})}return e})();var Jf=class extends Vt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,RT()&&(this.destroyRef=be(tw,{optional:!0})??void 0,this.pendingTasks=be(ki,{optional:!0})??void 0)}emit(t){let n=Ae(null);try{super.next(t)}finally{Ae(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof Dt&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},dt=Jf;function cl(...e){}function ow(e){let t,n;function r(){e=cl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function N0(e){return queueMicrotask(()=>e()),()=>{e=cl}}var jh="isAngularZone",ll=jh+"_ID",MM=0,tt=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=ew}=t;if(typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,kM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jh)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ve(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,xM,cl,cl);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},xM={};function Vh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function AM(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){ow(()=>{e.callbackScheduled=!1,Qf(e),e.isCheckStableRunning=!0,Vh(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Qf(e)}function kM(e){let t=()=>{AM(e)},n=MM++;e._inner=e._inner.fork({name:"angular",properties:{[jh]:!0,[ll]:n,[ll+n]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(NM(c))return r.invokeTask(i,s,a,c);try{return R0(e),r.invokeTask(i,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),O0(e)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return R0(e),r.invoke(i,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!RM(c)&&t(),O0(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Qf(e),Vh(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Qf(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function R0(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function O0(e){e._nesting--,Vh(e)}var Xf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function NM(e){return iw(e,"__ignore_ng_zone__")}function RM(e){return iw(e,"__scheduler_tick__")}function iw(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Br=class{_console=console;handleError(t){this._console.error("ERROR",t)}},OM=new ge("",{providedIn:"root",factory:()=>{let e=be(tt),t=be(Br);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function PM(){return Il(ln(),Ke())}function Il(e,t){return new Un($n(e,t))}var Un=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=PM}return e})();var P0=new Set;function Js(e){P0.has(e)||(P0.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function LM(e){return typeof e=="function"&&e[en]!==void 0}function Tl(e,t){Js("NgSignals");let n=Vy(e),r=n[en];return t?.equal&&(r.equal=t.equal),n.set=o=>lf(r,o),n.update=o=>$y(r,o),n.asReadonly=FM.bind(n),n}function FM(){let e=this[en];if(e.readonlyFn===void 0){let t=()=>this();t[en]=e,e.readonlyFn=t}return e.readonlyFn}function sw(e){return LM(e)&&typeof e.set=="function"}function aw(e){return(e.flags&128)===128}var cw=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(cw||{}),lw=new Map,BM=0;function jM(){return BM++}function VM(e){lw.set(e[_l],e)}function eh(e){lw.delete(e[_l])}var L0="__ngContext__";function Ni(e,t){Lr(t)?(e[L0]=t[_l],VM(t)):e[L0]=t}function uw(e){return fw(e[zs])}function dw(e){return fw(e[Cn])}function fw(e){for(;e!==null&&!ur(e);)e=e[Cn];return e}var th;function hw(e){th=e}function $M(){if(th!==void 0)return th;if(typeof document<"u")return document;throw new ve(210,!1)}var $h=new ge("",{providedIn:"root",factory:()=>UM}),UM="ng",Uh=new ge(""),$r=new ge("",{providedIn:"platform",factory:()=>"unknown"});var Hh=new ge("",{providedIn:"root",factory:()=>$M().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var HM="h",zM="b";var pw=!1,KM=new ge("",{providedIn:"root",factory:()=>pw});var gw=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(gw||{}),Ml=new ge("");var qM=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Pe({token:e,providedIn:"root",factory:()=>new e})}return e})();var WM=()=>null;function mw(e,t,n=!1){return WM(e,t,n)}function yw(e,t){let n=e.contentQueries;if(n!==null){let r=Ae(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Lv(i),a.contentQueries(2,t[s],s)}}}finally{Ae(r)}}}function nh(e,t,n){Lv(0);let r=Ae(null);try{t(e,n)}finally{Ae(r)}}function vw(e,t,n){if(_v(t)){let r=Ae(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Ae(r)}}}var Vn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Vn||{});var rh=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${JI})`}};function zh(e){return e instanceof rh?e.changingThisBreaksApplicationSecurity:e}var jr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(jr||{});function GM(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var ww="ng-template";function ZM(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&GM(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Kh(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Kh(e){return e.type===4&&e.value!==ww}function YM(e,t,n){let r=e.type===4&&!n?ww:e.value;return t===r}function JM(e,t,n){let r=4,o=e.attrs,i=o!==null?ex(o):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!_n(r)&&!_n(c))return!1;if(s&&_n(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!YM(e,c,n)||c===""&&t.length===1){if(_n(r))return!1;s=!0}}else if(r&8){if(o===null||!ZM(e,o,c,n)){if(_n(r))return!1;s=!0}}else{let l=t[++a],u=QM(c,o,Kh(e),n);if(u===-1){if(_n(r))return!1;s=!0;continue}if(l!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&l!==d){if(_n(r))return!1;s=!0}}}}return _n(r)||s}function _n(e){return(e&1)===0}function QM(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return tx(t,e)}function XM(e,t,n=!1){for(let r=0;r<t.length;r++)if(JM(e,t[r],n))return!0;return!1}function ex(e){for(let t=0;t<e.length;t++){let n=e[t];if(pM(n))return t}return e.length}function tx(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function F0(e,t){return e?":not("+t.trim()+")":t}function nx(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!_n(s)&&(t+=F0(i,o),o=""),r=s,i=i||!_n(r);n++}return o!==""&&(t+=F0(i,o)),t}function rx(e){return e.map(nx).join(",")}function ox(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!_n(o))break;o=i}r++}return n.length&&t.push(1,...n),t}var Ur={};function ix(e,t){return e.createText(t)}function sx(e,t,n){e.setValue(t,n)}function Ew(e,t,n){return e.createElement(t,n)}function ul(e,t,n,r,o){e.insertBefore(t,n,r,o)}function bw(e,t,n){e.appendChild(t,n)}function B0(e,t,n,r,o){r!==null?ul(e,t,n,r,o):bw(e,t,n)}function ax(e,t,n){e.removeChild(null,t,n)}function cx(e,t,n){e.setAttribute(t,"style",n)}function lx(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function _w(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&hM(e,t,r),o!==null&&lx(e,t,o),i!==null&&cx(e,t,i)}function qe(e=1){Cw(cn(),Ke(),Bo()+e,!1)}function Cw(e,t,n,r){if(!r)if((t[ye]&3)===3){let i=e.preOrderCheckHooks;i!==null&&Uc(t,i,n)}else{let i=e.preOrderHooks;i!==null&&Hc(t,i,0,n)}Mo(n)}function Re(e,t=Te.Default){let n=Ke();if(n===null)return Me(e,t);let r=ln();return Jv(r,n,St(e),t)}function Dw(e,t,n,r,o,i){let s=Ae(null);try{let a=null;o&jr.SignalBased&&(a=t[r][en]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&jr.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):Cv(t,a,r,i)}finally{Ae(s)}}function qh(e,t,n,r,o,i,s,a,c,l,u){let d=t.blueprint.slice();return d[lr]=o,d[ye]=r|4|128|8|64|1024,(l!==null||e&&e[ye]&2048)&&(d[ye]|=2048),xv(d),d[It]=d[Ai]=e,d[an]=n,d[Fr]=s||e&&e[Fr],d[st]=a||e&&e[st],d[Hs]=c||e&&e[Hs]||null,d[Sn]=i,d[_l]=jM(),d[Jc]=u,d[Ev]=l,d[Fn]=t.type==2?e[Fn]:d,d}function Sw(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function Iw(e,t,n,r,o){let i=Bo(),s=r&2;try{Mo(-1),s&&t.length>ir&&Cw(e,t,ir,!1),on(s?2:0,o),n(r,o)}finally{Mo(i),on(s?3:1,o)}}function Tw(e,t,n){kv()&&(Ni($n(n,t),t),Mw(e,t,n))}function Mw(e,t,n){Ex(e,t,n),(n.flags&64)===64&&bx(e,t,n)}function xw(e,t,n=$n){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function ux(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Wh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Wh(e,t,n,r,o,i,s,a,c,l,u){let d=ir+r,f=d+o,h=dx(d,f),p=typeof l=="function"?l():l;return h[Ne]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function dx(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ur);return n}function fx(e,t,n,r){let i=r.get(KM,pw)||n===Vn.ShadowDom,s=e.selectRootElement(t,i);return hx(s),s}function hx(e){px(e)}var px=()=>null;function j0(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];if(s===void 0)continue;r??={};let a,c=jr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=i;if(o!==null){if(!o.hasOwnProperty(i))continue;l=o[i]}e===0?V0(r,n,l,a,c):V0(r,n,l,a)}return r}function V0(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],o!==void 0&&i.push(o)}function gx(e,t,n){let r=t.directiveStart,o=t.directiveEnd,i=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<o;u++){let d=i[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=j0(0,d.inputs,u,c,h),l=j0(1,d.outputs,u,l,p);let g=c!==null&&s!==null&&!Kh(t)?Nx(c,u,s):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function mx(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Aw(e,t,n,r,o,i,s,a){let c=$n(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(Zh(e,n,u,r,o),Po(t)&&yx(n,t.index)):t.type&3?(r=mx(r),o=s!=null?s(o,t.value||"",r):o,i.setProperty(c,r,o)):t.type&12}function yx(e,t){let n=jn(t,e);n[ye]&16||(n[ye]|=64)}function kw(e,t,n,r){if(kv()){let o=r===null?null:{"":-1},i=Cx(e,n);if(i!==null){let[s,a]=Rw(e,n,i);Nw(e,t,n,s,o,a)}o&&Sx(n,r,o)}n.mergedAttrs=Si(n.mergedAttrs,n.attrs)}function Nw(e,t,n,r,o,i){for(let l=0;l<r.length;l++)Gf(sl(n,t),e,r[l].type);Tx(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Sw(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Si(n.mergedAttrs,u.hostAttrs),Mx(e,n,t,c,u),Ix(c,u,o),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}gx(e,n,i)}function vx(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;wx(s)!=a&&s.push(a),s.push(n,r,i)}}function wx(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Ex(e,t,n){let r=n.directiveStart,o=n.directiveEnd;Po(n)&&Ax(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||sl(n,t);let i=n.initialInputs;for(let s=r;s<o;s++){let a=e.data[s],c=al(t,e,s,n);if(Ni(c,t),i!==null&&kx(t,s-r,c,a,n,i),sr(a)){let l=jn(n.index,t);l[an]=al(t,e,s,n)}}}function bx(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=rM();try{Mo(i);for(let a=r;a<o;a++){let c=e.data[a],l=t[a];Kf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&_x(c,l)}}finally{Mo(-1),Kf(s)}}function _x(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Cx(e,t){let n=e.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];XM(t,i.selectors,!1)&&(r??=[],sr(i)?r.unshift(i):r.push(i))}return r}function Rw(e,t,n){let r=[],o=null;for(let i of n)i.findHostDirectiveDefs!==null&&(o??=new Map,i.findHostDirectiveDefs(i,r,o)),sr(i)&&(r.push(i),Dx(e,t,r.length-1));return Po(t)?r.push(...n.slice(1)):r.push(...n),[r,o]}function Dx(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Sx(e,t,n){if(t){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new ve(-301,!1);r.push(t[o],i)}}}function Ix(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;sr(t)&&(n[""]=e)}}function Tx(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Mx(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=wi(o.type,!0)),s=new xo(i,sr(o),Re);e.blueprint[r]=s,n[r]=s,vx(e,t,r,Sw(e,n,o.hostVars,Ur),o)}function xx(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Ax(e,t,n){let r=$n(t,e),o=ux(n),i=e[Fr].rendererFactory,s=Gh(e,qh(e,o,null,xx(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=s}function kx(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Dw(r,n,c,l,u,d)}}function Nx(e,t,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let s=e[i];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function Ow(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Gh(e,t){return e[zs]?e[C0][Cn]=t:e[zs]=t,e[C0]=t,t}function Pw(e,t){let n=e[Hs],r=n?n.get(Br,null):null;r&&r.handleError(t)}function Zh(e,t,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],c=n[i++],l=t[s],u=e.data[s];Dw(u,l,r,a,c,o)}}function Rx(e,t){let n=jn(t,e),r=n[Ne];Ox(r,n);let o=n[lr];o!==null&&n[Jc]===null&&(n[Jc]=mw(o,n[Hs])),Yh(r,n,n[an])}function Ox(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Yh(e,t,n){Nh(t);try{let r=e.viewQuery;r!==null&&nh(1,r,n);let o=e.template;o!==null&&Iw(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Di]?.finishViewCreation(e),e.staticContentQueries&&yw(e,t),e.staticViewQueries&&nh(2,e.viewQuery,n);let i=e.components;i!==null&&Px(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[ye]&=-5,Rh()}}function Px(e,t){for(let n=0;n<t.length;n++)Rx(e,t[n])}var ar=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ar||{}),Lx;function Jh(e,t){return Lx(e,t)}function Lw(e){return(e.flags&32)===32}function mi(e,t,n,r,o){if(r!=null){let i,s=!1;ur(r)?i=r:Lr(r)&&(s=!0,r=r[lr]);let a=Bn(r);e===0&&n!==null?o==null?bw(t,n,a):ul(t,n,a,o||null,!0):e===1&&n!==null?ul(t,n,a,o||null,!0):e===2?ax(t,a,s):e===3&&t.destroyNode(a),i!=null&&Zx(t,e,i,n,o)}}function Fx(e,t){Fw(e,t),t[lr]=null,t[Sn]=null}function Bx(e,t,n,r,o,i){r[lr]=o,r[Sn]=t,xl(e,r,n,1,o,i)}function Fw(e,t){t[Fr].changeDetectionScheduler?.notify(10),xl(e,t,t[st],2,null,null)}function jx(e){let t=e[zs];if(!t)return Af(e[Ne],e);for(;t;){let n=null;if(Lr(t))n=t[zs];else{let r=t[sn];r&&(n=r)}if(!n){for(;t&&!t[Cn]&&t!==e;)Lr(t)&&Af(t[Ne],t),t=t[It];t===null&&(t=e),Lr(t)&&Af(t[Ne],t),n=t&&t[Cn]}t=n}}function Vx(e,t,n,r){let o=sn+r,i=n.length;r>0&&(n[o-1][Cn]=t),r<i-sn?(t[Cn]=n[o],dv(n,sn+r,t)):(n.push(t),t[Cn]=null),t[It]=n;let s=t[Ci];s!==null&&n!==s&&Bw(s,t);let a=t[Di];a!==null&&a.insertView(e),Hf(t),t[ye]|=128}function Bw(e,t){let n=e[tl],r=t[It];if(Lr(r))e[ye]|=2;else{let o=r[It][Fn];t[Fn]!==o&&(e[ye]|=2)}n===null?e[tl]=[t]:n.push(t)}function Qh(e,t){let n=e[tl],r=n.indexOf(t);n.splice(r,1)}function oh(e,t){if(e.length<=sn)return;let n=sn+t,r=e[n];if(r){let o=r[Ci];o!==null&&o!==e&&Qh(o,r),t>0&&(e[n-1][Cn]=r[Cn]);let i=Zc(e,sn+t);Fx(r[Ne],r);let s=i[Di];s!==null&&s.detachView(i[Ne]),r[It]=null,r[Cn]=null,r[ye]&=-129}return r}function jw(e,t){if(Gs(t))return;let n=t[st];n.destroyNode&&xl(e,t,n,3,null,null),jx(t)}function Af(e,t){if(Gs(t))return;let n=Ae(null);try{t[ye]&=-129,t[ye]|=256,t[Ut]&&cf(t[Ut]),Ux(e,t),$x(e,t),t[Ne].type===1&&t[st].destroy();let r=t[Ci];if(r!==null&&ur(t[It])){r!==t[It]&&Qh(r,t);let o=t[Di];o!==null&&o.detachView(e)}eh(t)}finally{Ae(n)}}function $x(e,t){let n=e.cleanup,r=t[Qc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Qc]=null);let o=t[Pr];if(o!==null){t[Pr]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[Xc];if(i!==null){t[Xc]=null;for(let s of i)s.destroy()}}function Ux(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof xo)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];on(4,a,c);try{c.call(a)}finally{on(5,a,c)}}else{on(4,o,i);try{i.call(o)}finally{on(5,o,i)}}}}}function Hx(e,t,n){return zx(e,t.parent,n)}function zx(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[lr];if(Po(r)){let{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===Vn.None||o===Vn.Emulated)return null}return $n(r,n)}function Kx(e,t,n){return Wx(e,t,n)}function qx(e,t,n){return e.type&40?$n(e,n):null}var Wx=qx,$0;function Xh(e,t,n,r){let o=Hx(e,r,t),i=t[st],s=r.parent||t[Sn],a=Kx(s,r,t);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)B0(i,o,n[c],a,!1);else B0(i,o,n,a,!1);$0!==void 0&&$0(i,r,t,n,o)}function Bs(e,t){if(t!==null){let n=t.type;if(n&3)return $n(t,e);if(n&4)return ih(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Bs(e,r);{let o=e[t.index];return ur(o)?ih(-1,o):Bn(o)}}else{if(n&128)return Bs(e,t.next);if(n&32)return Jh(t,e)()||Bn(e[t.index]);{let r=Vw(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=To(e[Fn]);return Bs(o,r)}else return Bs(e,t.next)}}}return null}function Vw(e,t){if(t!==null){let r=e[Fn][Sn],o=t.projection;return r.projection[o]}return null}function ih(e,t){let n=sn+e+1;if(n<t.length){let r=t[n],o=r[Ne].firstChild;if(o!==null)return Bs(r,o)}return t[Io]}function ep(e,t,n,r,o,i,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Ni(Bn(a),r),n.flags|=2),!Lw(n))if(c&8)ep(e,t,n.child,r,o,i,!1),mi(t,e,o,a,i);else if(c&32){let l=Jh(n,r),u;for(;u=l();)mi(t,e,o,u,i);mi(t,e,o,a,i)}else c&16?Gx(e,t,r,n,o,i):mi(t,e,o,a,i);n=s?n.projectionNext:n.next}}function xl(e,t,n,r,o,i){ep(n,r,e.firstChild,t,o,i,!1)}function Gx(e,t,n,r,o,i){let s=n[Fn],c=s[Sn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];mi(t,e,o,u,i)}else{let l=c,u=s[It];aw(r)&&(l.flags|=128),ep(e,t,l,u,o,i,!0)}}function Zx(e,t,n,r,o){let i=n[Io],s=Bn(n);i!==s&&mi(t,e,r,i,o);for(let a=sn;a<n.length;a++){let c=n[a];xl(c[Ne],c,e,t,r,i)}}function Yx(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:ar.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=ar.Important),e.setStyle(n,r,o,i))}}function Jx(e,t,n,r){let o=Ae(null);try{let i=t.tView,a=e[ye]&4096?4096:16,c=qh(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Ci]=l;let u=e[Di];return u!==null&&(c[Di]=u.createEmbeddedView(i)),Yh(i,c,n),c}finally{Ae(o)}}function U0(e,t){return!t||t.firstChild===null||aw(e)}function Qx(e,t,n,r=!0){let o=t[Ne];if(Vx(o,t,e,n),r){let s=ih(n,e),a=t[st],c=a.parentNode(e[Io]);c!==null&&Bx(o,e[Sn],a,t,c,s)}let i=t[Jc];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function dl(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(Bn(i)),ur(i)&&Xx(i,r);let s=n.type;if(s&8)dl(e,t,n.child,r);else if(s&32){let a=Jh(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Vw(t,n);if(Array.isArray(a))r.push(...a);else{let c=To(t[Fn]);dl(c[Ne],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function Xx(e,t){for(let n=sn;n<e.length;n++){let r=e[n],o=r[Ne].firstChild;o!==null&&dl(r[Ne],r,o,t)}e[Io]!==e[lr]&&t.push(e[Io])}var $w=[];function eA(e){return e[Ut]??tA(e)}function tA(e){let t=$w.pop()??Object.create(rA);return t.lView=e,t}function nA(e){e.lView[Ut]!==e&&(e.lView=null,$w.push(e))}var rA=Se(de({},As),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Dl(e.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function oA(e){let t=e[Ut]??Object.create(iA);return t.lView=e,t}var iA=Se(de({},As),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=To(e.lView);for(;t&&!Uw(t[Ne]);)t=To(t);t&&Ah(t)},consumerOnSignalRead(){this.lView[Ut]=this}});function Uw(e){return e.type!==2}function Hw(e){if(e[Xc]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Xc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[ye]&8192)}}var sA=100;function zw(e,t=!0,n=0){let o=e[Fr].rendererFactory,i=!1;i||o.begin?.();try{aA(e,n)}catch(s){throw t&&Pw(e,s),s}finally{i||o.end?.()}}function aA(e,t){let n=Ov();try{S0(!0),sh(e,t);let r=0;for(;Cl(e);){if(r===sA)throw new ve(103,!1);r++,sh(e,1)}}finally{S0(n)}}function cA(e,t,n,r){if(Gs(t))return;let o=t[ye],i=!1,s=!1;Nh(t);let a=!0,c=null,l=null;i||(Uw(e)?(l=eA(t),c=hc(l)):xy()===null?(a=!1,l=oA(t),c=hc(l)):t[Ut]&&(cf(t[Ut]),t[Ut]=null));try{xv(t),eM(e.bindingStartIndex),n!==null&&Iw(e,t,n,2,r);let u=(o&3)===3;if(!i)if(u){let h=e.preOrderCheckHooks;h!==null&&Uc(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Hc(t,h,0,null),Tf(t,0)}if(s||lA(t),Hw(t),Kw(t,0),e.contentQueries!==null&&yw(e,t),!i)if(u){let h=e.contentCheckHooks;h!==null&&Uc(t,h)}else{let h=e.contentHooks;h!==null&&Hc(t,h,1),Tf(t,1)}dA(e,t);let d=e.components;d!==null&&Ww(t,d,0);let f=e.viewQuery;if(f!==null&&nh(2,f,r),!i)if(u){let h=e.viewCheckHooks;h!==null&&Uc(t,h)}else{let h=e.viewHooks;h!==null&&Hc(t,h,2),Tf(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[If]){for(let h of t[If])h();t[If]=null}i||(t[ye]&=-73)}catch(u){throw i||Dl(t),u}finally{l!==null&&(sf(l,c),a&&nA(l)),Rh()}}function Kw(e,t){for(let n=uw(e);n!==null;n=dw(n))for(let r=sn;r<n.length;r++){let o=n[r];qw(o,t)}}function lA(e){for(let t=uw(e);t!==null;t=dw(t)){if(!(t[ye]&2))continue;let n=t[tl];for(let r=0;r<n.length;r++){let o=n[r];Ah(o)}}}function uA(e,t,n){let r=jn(t,e);qw(r,n)}function qw(e,t){xh(e)&&sh(e,t)}function sh(e,t){let r=e[Ne],o=e[ye],i=e[Ut],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&af(i)),s||=!1,i&&(i.dirty=!1),e[ye]&=-9217,s)cA(r,e,r.template,e[an]);else if(o&8192){Hw(e),Kw(e,1);let a=r.components;a!==null&&Ww(e,a,1)}}function Ww(e,t,n){for(let r=0;r<t.length;r++)uA(e,t[r],n)}function dA(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Mo(~o);else{let i=o,s=n[++r],a=n[++r];nM(s,i);let c=t[i];on(24,c),a(2,c),on(25,c)}}}finally{Mo(-1)}}function tp(e,t){let n=Ov()?64:1088;for(e[Fr].changeDetectionScheduler?.notify(t);e;){e[ye]|=n;let r=To(e);if(nl(e)&&!r)return e;e=r}return null}var ko=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[Ne];return dl(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[an]}get dirty(){return!!(this._lView[ye]&9280)||!!this._lView[Ut]?.dirty}set context(t){this._lView[an]=t}get destroyed(){return Gs(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[It];if(ur(t)){let n=t[el],r=n?n.indexOf(this):-1;r>-1&&(oh(t,r),Zc(n,r))}this._attachedToViewContainer=!1}jw(this._lView[Ne],this._lView)}onDestroy(t){Av(this._lView,t)}markForCheck(){tp(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Ah(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-129}reattach(){Hf(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,zw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=nl(this._lView),n=this._lView[Ci];n!==null&&!t&&Qh(n,this._lView),Fw(this._lView[Ne],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=t;let n=nl(this._lView),r=this._lView[Ci];r!==null&&!n&&Bw(r,this._lView),Hf(this._lView)}},Al=(()=>{class e{static __NG_ELEMENT_ID__=pA}return e})(),fA=Al,hA=class extends fA{_declarationLView;_declarationTContainer;elementRef;constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let o=Jx(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new ko(o)}};function pA(){return gA(ln(),Ke())}function gA(e,t){return e.type&4?new hA(t,e,Il(e,t)):null}function kl(e,t,n,r,o){let i=e.data[t];if(i===null)i=mA(e,t,n,r,o),tM()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=JT();i.injectorIndex=s===null?-1:s.injectorIndex}return Ys(i,!0),i}function mA(e,t,n,r,o){let i=Nv(),s=Rv(),a=s?i:i&&i.parent,c=e.data[t]=vA(e,a,n,t,r,o);return yA(e,c,i,s),c}function yA(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function vA(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return GT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Q5=new RegExp(`^(\\d+)*(${zM}|${HM})*(.*)`);var wA=()=>null;function H0(e,t){return wA(e,t)}var ah=class{},fl=class{},ch=class{resolveComponentFactory(t){throw Error(`No component factory found for ${$t(t)}.`)}},Vr=class{static NULL=new ch},Ii=class{},jo=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>EA()}return e})();function EA(){let e=Ke(),t=ln(),n=jn(t.index,e);return(Lr(n)?n:e)[st]}var bA=(()=>{class e{static \u0275prov=Pe({token:e,providedIn:"root",factory:()=>null})}return e})();function lh(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=y0(o,a);else if(i==2){let c=a,l=t[++s];r=y0(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}var uh=class extends Vr{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=bi(t);return new hl(n,this.ngModule)}};function z0(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let o=e[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:jr.None;t?n.push({propName:s,templateName:r,isSignal:(a&jr.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function _A(e){let t=e.toLowerCase();return t==="svg"?BT:t==="math"?jT:null}var hl=class extends fl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,r=z0(t.inputs,!0);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return z0(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=rx(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,o){let i=Ae(null);try{o=o||this.ngModule;let s=o instanceof Ln?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new qf(t,s):t,c=a.get(Ii,null);if(c===null)throw new ve(407,!1);let l=a.get(bA,null),u=a.get(Ao,null),d={rendererFactory:c,sanitizer:l,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?fx(f,r,this.componentDef.encapsulation,a):Ew(f,h,_A(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let w=null;p!==null&&(w=mw(p,a,!0));let m=Wh(0,null,null,1,0,null,null,null,null,null,null),D=qh(null,m,null,g,null,null,d,f,a,null,w);D[ir]=p,Nh(D);let b=null;try{let O=r?["ng-version","19.1.4"]:ox(this.componentDef.selectors[0]),N=kl(m,ir,2,"#host",O),[z,q]=Rw(m,N,[this.componentDef]);Nw(m,D,N,z,{},q);for(let U of z)N.mergedAttrs=Si(N.mergedAttrs,U.hostAttrs);N.mergedAttrs=Si(N.mergedAttrs,O),lh(N,N.mergedAttrs,!0),p&&(_w(f,p,N),Ni(p,D)),n!==void 0&&CA(N,this.ngContentSelectors,n),Mw(m,D,N),vw(m,N,D),Lh(m,N),b=jn(N.index,D),D[an]=b[an],Yh(m,D,null)}catch(O){throw b!==null&&eh(b),eh(D),O}finally{Rh()}return new dh(this.componentType,D)}finally{Ae(i)}}},dh=class extends ah{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n){super(),this._rootLView=n,this._tNode=Mv(n[Ne],ir),this.location=Il(this._tNode,n),this.instance=jn(this._tNode.index,n)[an],this.hostView=this.changeDetectorRef=new ko(n,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;Zh(i[Ne],i,o,t,n),this.previousInputValues.set(t,n);let s=jn(this._tNode.index,i);tp(s,1)}}get injector(){return new So(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function CA(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Nl=(()=>{class e{static __NG_ELEMENT_ID__=DA}return e})();function DA(){let e=ln();return IA(e,Ke())}var SA=Nl,Gw=class extends SA{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Il(this._hostTNode,this._hostLView)}get injector(){return new So(this._hostTNode,this._hostLView)}get parentInjector(){let t=Fh(this._hostTNode,this._hostLView);if(Kv(t)){let n=il(t,this._hostLView),r=ol(t),o=n[Ne].data[r+8];return new So(o,n)}else return new So(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=K0(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=H0(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,U0(this._hostTNode,s)),a}createComponent(t,n,r,o,i){let s=t&&!OT(t),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,o=p.projectableNodes,i=p.environmentInjector||p.ngModuleRef}let c=s?t:new hl(bi(t)),l=r||this.parentInjector;if(!i&&c.ngModule==null){let g=(s?l:this.parentInjector).get(Ln,null);g&&(i=g)}let u=bi(c.componentType??{}),d=H0(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,o,f,i);return this.insertImpl(h.hostView,a,U0(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(VT(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=o[It],l=new Gw(c,c[Sn],c[It]);l.detach(l.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return Qx(s,o,i,r),t.attachToViewContainerRef(),dv(kf(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=K0(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=oh(this._lContainer,n);r&&(Zc(kf(this._lContainer),n),jw(r[Ne],r))}detach(t){let n=this._adjustIndex(t,-1),r=oh(this._lContainer,n);return r&&Zc(kf(this._lContainer),n)!=null?new ko(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function K0(e){return e[el]}function kf(e){return e[el]||(e[el]=[])}function IA(e,t){let n,r=t[e.index];return ur(r)?n=r:(n=Ow(r,t,null,e),t[e.index]=n,Gh(t,n)),MA(n,t,e,r),new Gw(n,e,t)}function TA(e,t){let n=e[st],r=n.createComment(""),o=$n(t,e),i=n.parentNode(o);return ul(n,i,r,n.nextSibling(o),!1),r}var MA=kA,xA=()=>!1;function AA(e,t,n){return xA(e,t,n)}function kA(e,t,n,r){if(e[Io])return;let o;n.type&8?o=Bn(r):o=TA(t,n),e[Io]=o}var Ti=class{};var pl=class extends Ti{injector;componentFactoryResolver=new uh(this);instance=null;constructor(t){super();let n=new Us([...t.providers,{provide:Ti,useValue:this},{provide:Vr,useValue:this.componentFactoryResolver}],t.parent||Th(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function NA(e,t,n=null){return new pl({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var RA=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=mv(!1,n.type),o=r.length>0?NA([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Pe({token:e,providedIn:"environment",factory:()=>new e(Me(Ln))})}return e})();function Ri(e){return qs(()=>{let t=Zw(e),n=Se(de({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===cw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(RA).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Vn.Emulated,styles:e.styles||rn,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Js("NgStandalone"),Yw(n);let r=e.dependencies;return n.directiveDefs=W0(r,!1),n.pipeDefs=W0(r,!0),n.id=LA(n),n})}function OA(e){return bi(e)||pv(e)}function PA(e){return e!==null}function Vo(e){return qs(()=>({type:e.type,bootstrap:e.bootstrap||rn,declarations:e.declarations||rn,imports:e.imports||rn,exports:e.exports||rn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function q0(e,t){if(e==null)return Ei;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a=jr.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=a!==jr.None?[r,a]:r,t[i]=s):n[i]=r}return n}function Ht(e){return qs(()=>{let t=Zw(e);return Yw(t),t})}function Zw(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ei,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||rn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:q0(e.inputs,t),outputs:q0(e.outputs),debugInfo:null}}function Yw(e){e.features?.forEach(t=>t(e))}function W0(e,t){if(!e)return null;let n=t?gv:OA;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(PA)}function LA(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function FA(e){return Object.getPrototypeOf(e.prototype).constructor}function Hr(e){let t=FA(e.type),n=!0,r=[e];for(;t;){let o;if(sr(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ve(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=jc(e.inputs),s.inputTransforms=jc(e.inputTransforms),s.declaredInputs=jc(e.declaredInputs),s.outputs=jc(e.outputs);let a=o.hostBindings;a&&UA(e,a);let c=o.viewQuery,l=o.contentQueries;if(c&&VA(e,c),l&&$A(e,l),BA(e,o),XI(e.outputs,o.outputs),sr(o)&&o.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===Hr&&(n=!1)}}t=Object.getPrototypeOf(t)}jA(r)}function BA(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function jA(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Si(o.hostAttrs,n=Si(n,o.hostAttrs))}}function jc(e){return e===Ei?{}:e===rn?[]:e}function VA(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function $A(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function UA(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}function Jw(e){return zA(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function HA(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function zA(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Mi(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function KA(e,t,n,r){let o=Mi(e,t,n);return Mi(e,t+1,r)||o}function qA(e,t,n,r,o,i,s,a,c){let l=t.consts,u=kl(t,e,4,s||null,a||null);kw(t,n,u,rl(l,c)),Lh(t,u);let d=u.tView=Wh(2,u,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function WA(e,t,n,r,o,i,s,a,c,l){let u=n+ir,d=t.firstCreatePass?qA(u,t,e,r,o,i,s,a,c):t.data[u];Ys(d,!1);let f=GA(t,e,d,n);Oh()&&Xh(t,e,f,d),Ni(f,e);let h=Ow(f,e,f,d);return e[u]=h,Gh(e,h),AA(h,d,e),Mh(d)&&Tw(t,e,d),c!=null&&xw(e,d,l),d}function $o(e,t,n,r,o,i,s,a){let c=Ke(),l=cn(),u=rl(l.consts,i);return WA(c,l,e,t,n,r,o,u,s,a),$o}var GA=ZA;function ZA(e,t,n,r){return Ph(!0),t[st].createComment("")}var Qw=new ge("");function Qs(e){return!!e&&typeof e.then=="function"}function Xw(e){return!!e&&typeof e.subscribe=="function"}var YA=new ge("");var eE=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=be(YA,{optional:!0})??[];injector=be(Dn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=bl(this.injector,o);if(Qs(i))n.push(i);else if(Xw(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),JA=(()=>{class e{static \u0275prov=Pe({token:e,providedIn:"root",factory:()=>new fh})}return e})(),fh=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},tE=new ge("");function QA(){jy(()=>{throw new ve(600,!1)})}function XA(e){return e.isBoundToModule}var ek=10;function tk(e,t,n){try{let r=n();return Qs(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var cr=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=be(OM);afterRenderManager=be(qM);zonelessEnabled=be(Bh);rootEffectScheduler=be(JA);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Vt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=be(ki).hasPendingTasks.pipe(Rt(n=>!n));constructor(){be(Ml,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=be(Ln);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){let o=n instanceof fl;if(!this._injector.get(eE).done){let f=!o&&bT(n),h=!1;throw new ve(405,h)}let s;o?s=n:s=this._injector.get(Vr).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=XA(s)?void 0:this._injector.get(Ti),c=r||s.selector,l=s.create(Dn.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Qw,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),zc(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(gw.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new ve(101,!1);let n=Ae(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ae(n),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ii,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<ek;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:o}of this.allViews)nk(r,o,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Cl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;zc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(tE,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>zc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ve(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function zc(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function nk(e,t,n,r){if(!n&&!Cl(e))return;zw(e,t,n&&!r?0:1)}function rk(e,t,n,r){return Mi(e,kh(),n)?t+Wc(n)+r:Ur}function ok(e,t,n,r,o,i){let s=XT(),a=KA(e,s,n,o);return Pv(2),a?t+Wc(n)+r+Wc(o)+i:Ur}function Vc(e,t){return e<<17|t<<2}function No(e){return e>>17&32767}function ik(e){return(e&2)==2}function sk(e,t){return e&131071|t<<17}function hh(e){return e|2}function xi(e){return(e&131068)>>2}function Nf(e,t){return e&-131069|t<<2}function ak(e){return(e&1)===1}function ph(e){return e|1}function ck(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=No(s),c=xi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ws(d,u)>0)&&(l=!0)}else u=n;if(o)if(c!==0){let f=No(e[a+1]);e[r+1]=Vc(f,a),f!==0&&(e[f+1]=Nf(e[f+1],r)),e[a+1]=sk(e[a+1],r)}else e[r+1]=Vc(a,0),a!==0&&(e[a+1]=Nf(e[a+1],r)),a=r;else e[r+1]=Vc(c,0),a===0?a=r:e[c+1]=Nf(e[c+1],r),c=r;l&&(e[r+1]=hh(e[r+1])),G0(e,u,r,!0),G0(e,u,r,!1),lk(t,u,e,r,i),s=Vc(a,c),i?t.classBindings=s:t.styleBindings=s}function lk(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Ws(i,t)>=0&&(n[r+1]=ph(n[r+1]))}function G0(e,t,n,r){let o=e[n+1],i=t===null,s=r?No(o):xi(o),a=!1;for(;s!==0&&(a===!1||i);){let c=e[s],l=e[s+1];uk(c,t)&&(a=!0,e[s+1]=r?ph(l):hh(l)),s=r?No(l):xi(l)}a&&(e[n+1]=r?hh(o):ph(o))}function uk(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Ws(e,t)>=0:!1}function nt(e,t,n){let r=Ke(),o=kh();if(Mi(r,o,t)){let i=cn(),s=Uv();Aw(i,s,r,e,t,r[st],n,!1)}return nt}function Z0(e,t,n,r,o){let i=t.inputs,s=o?"class":"style";Zh(e,n,i[s],s,r)}function np(e,t){return dk(e,t,null,!0),np}function dk(e,t,n,r){let o=Ke(),i=cn(),s=Pv(2);if(i.firstUpdatePass&&hk(i,e,s,r),t!==Ur&&Mi(o,s,t)){let a=i.data[Bo()];vk(i,a,o,o[st],e,o[s+1]=wk(t,n),r,s)}}function fk(e,t){return t>=e.expandoStartIndex}function hk(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[Bo()],s=fk(e,n);Ek(i,r)&&t===null&&!s&&(t=!1),t=pk(o,i,t,r),ck(o,i,t,n,s,r)}}function pk(e,t,n,r){let o=oM(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=Rf(null,e,t,n,r),n=Ks(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=Rf(o,e,t,n,r),i===null){let c=gk(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Rf(null,e,t,c[1],r),c=Ks(c,t.attrs,r),mk(e,t,r,c))}else i=yk(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function gk(e,t,n){let r=n?t.classBindings:t.styleBindings;if(xi(r)!==0)return e[No(r)]}function mk(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[No(o)]=r}function yk(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=Ks(r,s,n)}return Ks(r,t.attrs,n)}function Rf(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=Ks(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Ks(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),wT(e,s,n?!0:t[++i]))}return e===void 0?null:e}function vk(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=ak(l)?Y0(c,t,n,o,xi(l),s):void 0;if(!gl(u)){gl(i)||ik(l)&&(i=Y0(c,null,n,o,a,s));let d=Tv(Bo(),n);Yx(r,s,d,o,i)}}function Y0(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let c=e[o],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[o+1];f===Ur&&(f=d?rn:void 0);let h=d?Df(f,r):u===r?f:void 0;if(l&&!gl(h)&&(h=Df(c,r)),gl(h)&&(a=h,s))return a;let p=e[o+1];o=s?No(p):xi(p)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=Df(c,r))}return a}function gl(e){return e!==void 0}function wk(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=$t(zh(e)))),e}function Ek(e,t){return(e.flags&(t?8:16))!==0}function bk(e,t,n,r,o,i){let s=t.consts,a=rl(s,o),c=kl(t,e,2,r,a);return kw(t,n,c,rl(s,i)),c.attrs!==null&&lh(c,c.attrs,!1),c.mergedAttrs!==null&&lh(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Ge(e,t,n,r){let o=Ke(),i=cn(),s=ir+e,a=o[st],c=i.firstCreatePass?bk(s,i,o,t,n,r):i.data[s],l=_k(i,o,c,a,t,e);o[s]=l;let u=Mh(c);return Ys(c,!0),_w(a,l,c),!Lw(c)&&Oh()&&Xh(i,o,l,c),KT()===0&&Ni(l,o),qT(),u&&(Tw(i,o,c),vw(i,c,o)),r!==null&&xw(o,c),Ge}function ze(){let e=ln();Rv()?QT():(e=e.parent,Ys(e,!1));let t=e;ZT(t)&&YT(),WT();let n=cn();return n.firstCreatePass&&(Lh(n,e),_v(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&dM(t)&&Z0(n,t,Ke(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&fM(t)&&Z0(n,t,Ke(),t.stylesWithoutHost,!1),ze}function zr(e,t,n,r){return Ge(e,t,n,r),ze(),zr}var _k=(e,t,n,r,o,i)=>(Ph(!0),Ew(r,o,aM()));function Oi(){return Ke()}var ml="en-US";var Ck=ml;function Dk(e){typeof e=="string"&&(Ck=e.toLowerCase().replace(/_/g,"-"))}var Sk=(e,t,n)=>{};function un(e,t,n,r){let o=Ke(),i=cn(),s=ln();return nE(i,o,o[st],s,e,t,r),un}function Ik(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[Qc],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function nE(e,t,n,r,o,i,s){let a=Mh(r),l=e.firstCreatePass&&zT(e),u=t[an],d=HT(t),f=!0;if(r.type&3||s){let g=$n(r,t),w=s?s(g):g,m=d.length,D=s?O=>s(Bn(O[r.index])):r.index,b=null;if(!s&&a&&(b=Ik(e,t,o,r.index)),b!==null){let O=b.__ngLastListenerFn__||b;O.__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,f=!1}else{i=Q0(r,t,u,i),Sk(g,o,i);let O=n.listen(w,o,i);d.push(i,O),l&&l.push(o,D,m,m+1)}}else i=Q0(r,t,u,i);let h=r.outputs,p;if(f&&h!==null&&(p=h[o])){let g=p.length;if(g)for(let w=0;w<g;w+=2){let m=p[w],D=p[w+1],N=t[m][D].subscribe(i),z=d.length;d.push(i,N),l&&l.push(o,r.index,z,-(z+1))}}}function J0(e,t,n,r){let o=Ae(null);try{return on(6,t,n),n(r)!==!1}catch(i){return Pw(e,i),!1}finally{on(7,t,n),Ae(o)}}function Q0(e,t,n,r){return function o(i){if(i===Function)return r;let s=Po(e)?jn(e.index,t):t;tp(s,5);let a=J0(t,n,r,i),c=o.__ngNextListenerFn__;for(;c;)a=J0(t,n,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function In(e=1){return sM(e)}function yt(e,t=""){let n=Ke(),r=cn(),o=e+ir,i=r.firstCreatePass?kl(r,o,1,t,null):r.data[o],s=Tk(r,n,i,t,e);n[o]=s,Oh()&&Xh(r,n,s,i),Ys(i,!1)}var Tk=(e,t,n,r,o)=>(Ph(!0),ix(t[st],r));function rp(e){return dr("",e,""),rp}function dr(e,t,n){let r=Ke(),o=rk(r,e,t,n);return o!==Ur&&rE(r,Bo(),o),dr}function op(e,t,n,r,o){let i=Ke(),s=ok(i,e,t,n,r,o);return s!==Ur&&rE(i,Bo(),s),op}function rE(e,t,n){let r=Tv(t,e);sx(e[st],r,n)}function Rl(e,t,n){sw(t)&&(t=t());let r=Ke(),o=kh();if(Mi(r,o,t)){let i=cn(),s=Uv();Aw(i,s,r,e,t,r[st],n,!1)}return Rl}function ip(e,t){let n=sw(e);return n&&e.set(t),n}function Ol(e,t){let n=Ke(),r=cn(),o=ln();return nE(r,n,n[st],o,e,t),Ol}function Mk(e,t,n){let r=cn();if(r.firstCreatePass){let o=sr(e);gh(n,r.data,r.blueprint,o,!0),gh(t,r.data,r.blueprint,o,!1)}}function gh(e,t,n,r,o){if(e=St(e),Array.isArray(e))for(let i=0;i<e.length;i++)gh(e[i],t,n,r,o);else{let i=cn(),s=Ke(),a=ln(),c=_i(e)?e:St(e.provide),l=wv(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(_i(e)||!e.multi){let h=new xo(l,o,Re),p=Pf(c,t,o?u:u+f,d);p===-1?(Gf(sl(a,s),i,c),Of(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Pf(c,t,u+f,d),p=Pf(c,t,u,u+f),g=h>=0&&n[h],w=p>=0&&n[p];if(o&&!w||!o&&!g){Gf(sl(a,s),i,c);let m=kk(o?Ak:xk,n.length,o,r,l);!o&&w&&(n[p].providerFactory=m),Of(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)}else{let m=oE(n[o?p:h],l,!o&&r);Of(i,e,h>-1?h:p,m)}!o&&r&&w&&n[p].componentProviders++}}}function Of(e,t,n,r){let o=_i(t),i=IT(t);if(o||i){let c=(i?St(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function oE(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Pf(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function xk(e,t,n,r){return mh(this.multi,[])}function Ak(e,t,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=al(n,n[Ne],this.providerFactory.index,r);i=a.slice(0,s),mh(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],mh(o,i);return i}function mh(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function kk(e,t,n,r,o){let i=new xo(e,n,Re);return i.multi=[],i.index=t,i.componentProviders=0,oE(i,o,r&&!n),i}function Uo(e,t=[]){return n=>{n.providersResolver=(r,o)=>Mk(r,o?o(e):e,t)}}var Nk=(()=>{class e{zone=be(tt);changeDetectionScheduler=be(Ao);applicationRef=be(cr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Rk({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new tt(Se(de({},Ok()),{scheduleInRootZone:n})),[{provide:tt,useFactory:e},{provide:$s,multi:!0,useFactory:()=>{let r=be(Nk,{optional:!0});return()=>r.initialize()}},{provide:$s,multi:!0,useFactory:()=>{let r=be(Pk);return()=>{r.initialize()}}},t===!0?{provide:nw,useValue:!0}:[],{provide:rw,useValue:n??ew}]}function Ok(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Pk=(()=>{class e{subscription=new Dt;initialized=!1;zone=be(tt);pendingTasks=be(ki);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{tt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{tt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Lk=(()=>{class e{appRef=be(cr);taskService=be(ki);ngZone=be(tt);zonelessEnabled=be(Bh);tracing=be(Ml,{optional:!0});disableScheduling=be(nw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Dt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ll):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(be(rw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?N0:ow;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ll+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,N0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fk(){return typeof $localize<"u"&&$localize.locale||ml}var sp=new ge("",{providedIn:"root",factory:()=>be(sp,Te.Optional|Te.SkipSelf)||Fk()});var yh=new ge(""),Bk=new ge("");function Ls(e){return!e.moduleRef}function jk(e){let t=Ls(e)?e.r3Injector:e.moduleRef.injector,n=t.get(tt);return n.run(()=>{Ls(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Br,null),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:i=>{r.handleError(i)}})}),Ls(e)){let i=()=>t.destroy(),s=e.platformInjector.get(yh);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(yh);s.add(i),e.moduleRef.onDestroy(()=>{zc(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return tk(r,n,()=>{let i=t.get(eE);return i.runInitializers(),i.donePromise.then(()=>{let s=t.get(sp,ml);if(Dk(s||ml),!t.get(Bk,!0))return Ls(e)?t.get(cr):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Ls(e)){let c=t.get(cr);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return Vk(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Vk(e,t){let n=e.injector.get(cr);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new ve(-403,!1);t.push(e)}var Kc=null;function $k(e=[],t){return Dn.create({name:t,providers:[{provide:El,useValue:"platform"},{provide:yh,useValue:new Set([()=>Kc=null])},...e]})}function Uk(e=[]){if(Kc)return Kc;let t=$k(e);return Kc=t,QA(),Hk(t),t}function Hk(e){let t=e.get(Uh,null);bl(e,()=>{t?.forEach(n=>n())})}var Pi=(()=>{class e{static __NG_ELEMENT_ID__=zk}return e})();function zk(e){return Kk(ln(),Ke(),(e&16)===16)}function Kk(e,t,n){if(Po(e)&&!n){let r=jn(e.index,t);return new ko(r,r)}else if(e.type&175){let r=t[Fn];return new ko(r,t)}return null}var vh=class{constructor(){}supports(t){return Jw(t)}create(t){return new wh(t)}},qk=(e,t)=>t,wh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||qk}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<X0(r,o,i)?n:r,a=X0(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let f=0;f<l;f++){let h=f<i.length?i[f]:i[f]=0,p=h+f;u<=p&&p<l&&(i[f]=h+1)}let d=s.previousIndex;i[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Jw(t))throw new ve(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,HA(t,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return t===null?i=this._itTail:(i=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new Eh(n,r),i,o)),t}_verifyReinsertion(t,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,i=t._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let o=n===null?this._itHead:n._next;return t._next=o,t._prev=n,o===null?this._itTail=t:o._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new yl),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new yl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Eh=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},bh=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},yl=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new bh,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,o=this.map.get(r);return o?o.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function X0(e,t,n){let r=e.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function ev(){return new ap([new vh])}var ap=(()=>{class e{factories;static \u0275prov=Pe({token:e,providedIn:"root",factory:ev});constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||ev()),deps:[[e,new yT,new uv]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new ve(901,!1)}}return e})();function iE(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=Uk(r),i=[Rk({}),{provide:Ao,useExisting:Lk},...n||[]],s=new pl({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return jk({r3Injector:s.injector,platformInjector:o,rootComponent:t})}catch(t){return Promise.reject(t)}}function cp(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Pl(e,t){Js("NgSignals");let n=Ly(e);return t?.equal&&(n[en].equal=t.equal),n}function Kr(e){let t=Ae(null);try{return e()}finally{Ae(t)}}var tv=class{[en];constructor(t){this[en]=t}destroy(){this[en].destroy()}};var Wk={schedule(e,t){let n=setTimeout(e,t);return()=>clearTimeout(n)}};function Gk(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Zk(e){return!!e&&e.nodeType===Node.ELEMENT_NODE}var lp;function Yk(e,t){if(!lp){let n=Element.prototype;lp=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return e.nodeType===Node.ELEMENT_NODE?lp.call(e,t):!1}function Jk(e){let t={};return e.forEach(({propName:n,templateName:r,transform:o})=>{t[Gk(r)]=[n,o]}),t}function Qk(e,t){return t.get(Vr).resolveComponentFactory(e).inputs}function Xk(e,t){let n=e.childNodes,r=t.map(()=>[]),o=-1;t.some((i,s)=>i==="*"?(o=s,!0):!1);for(let i=0,s=n.length;i<s;++i){let a=n[i],c=eN(a,t,o);c!==-1&&r[c].push(a)}return r}function eN(e,t,n){let r=n;return Zk(e)&&t.some((o,i)=>o!=="*"&&Yk(e,o)?(r=i,!0):!1),r}var tN=10,up=class{componentFactory;inputMap=new Map;constructor(t,n){this.componentFactory=n.get(Vr).resolveComponentFactory(t);for(let r of this.componentFactory.inputs)this.inputMap.set(r.propName,r.templateName)}create(t){return new dp(this.componentFactory,t,this.inputMap)}},dp=class{componentFactory;injector;inputMap;eventEmitters=new Os(1);events=this.eventEmitters.pipe(Ps(t=>wf(...t)));componentRef=null;scheduledDestroyFn=null;initialInputValues=new Map;ngZone;elementZone;appRef;cdScheduler;constructor(t,n,r){this.componentFactory=t,this.injector=n,this.inputMap=r,this.ngZone=this.injector.get(tt),this.appRef=this.injector.get(cr),this.cdScheduler=n.get(Ao),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=Wk.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null)},tN))})}getInputValue(t){return this.runInZone(()=>this.componentRef===null?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,n){if(this.componentRef===null){this.initialInputValues.set(t,n);return}this.runInZone(()=>{this.componentRef.setInput(this.inputMap.get(t)??t,n),this.componentRef.hostView.dirty&&(this.componentRef.changeDetectorRef.markForRefresh(),this.cdScheduler.notify(6))})}initializeComponent(t){let n=Dn.create({providers:[],parent:this.injector}),r=Xk(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,r,t),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.appRef.attachView(this.componentRef.hostView),this.componentRef.hostView.detectChanges()}initializeInputs(){for(let[t,n]of this.initialInputValues)this.setInputValue(t,n);this.initialInputValues.clear()}initializeOutputs(t){let n=this.componentFactory.outputs.map(({propName:r,templateName:o})=>{let i=t.instance[r];return new Ue(s=>{let a=i.subscribe(c=>s.next({name:o,value:c}));return()=>a.unsubscribe()})});this.eventEmitters.next(n)}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}},fp=class extends HTMLElement{ngElementEventsSubscription=null};function sE(e,t){let n=Qk(e,t.injector),r=t.strategyFactory||new up(e,t.injector),o=Jk(n);class i extends fp{injector;static observedAttributes=Object.keys(o);get ngElementStrategy(){if(!this._ngElementStrategy){let a=this._ngElementStrategy=r.create(this.injector||t.injector);n.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;let u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}_ngElementStrategy;constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){let[d,f]=o[a];this.ngElementStrategy.setInputValue(d,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{let c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return n.forEach(({propName:s,transform:a})=>{Object.defineProperty(i.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(c){this.ngElementStrategy.setInputValue(s,c,a)},configurable:!0,enumerable:!0})}),i}var lE=null;function Fi(){return lE}function uE(e){lE??=e}var Ll=class{};var Hn=new ge("");function Fl(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var pp=class{$implicit;ngForOf;index;count;constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dE=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new pp(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),aE(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);aE(i,o)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Re(Nl),Re(Al),Re(ap))};static \u0275dir=Ht({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function aE(e,t){e.context.$implicit=t.item}var Bl=(()=>{class e{_viewContainer;_context=new gp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){cE("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){cE("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Re(Nl),Re(Al))};static \u0275dir=Ht({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),gp=class{$implicit=null;ngIf=null};function cE(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${$t(t)}'.`)}var mp=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Vo({type:e});static \u0275inj=Oo({})}return e})(),fE="browser",nN="server";function yp(e){return e===nN}var Li=class{};var bE=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Re(jo),Re(Un))};static \u0275dir=Ht({type:e})}return e})(),_p=(()=>{class e extends bE{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Sl(e)))(o||e)}})();static \u0275dir=Ht({type:e,features:[Hr]})}return e})(),Hl=new ge("");var oN={provide:Hl,useExisting:Ro(()=>_E),multi:!0};function iN(){let e=Fi()?Fi().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var sN=new ge(""),_E=(()=>{class e extends bE{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!iN())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Re(jo),Re(Un),Re(sN,8))};static \u0275dir=Ht({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&un("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[Uo([oN]),Hr]})}return e})();var aN=new ge(""),cN=new ge("");function CE(e){return e!=null}function DE(e){return Qs(e)?or(e):e}function SE(e){let t={};return e.forEach(n=>{t=n!=null?de(de({},t),n):t}),Object.keys(t).length===0?null:t}function IE(e,t){return t.map(n=>n(e))}function lN(e){return!e.validate}function TE(e){return e.map(t=>lN(t)?t:n=>t.validate(n))}function uN(e){if(!e)return null;let t=e.filter(CE);return t.length==0?null:function(n){return SE(IE(n,t))}}function ME(e){return e!=null?uN(TE(e)):null}function dN(e){if(!e)return null;let t=e.filter(CE);return t.length==0?null:function(n){let r=IE(n,t).map(DE);return vf(r).pipe(Rt(SE))}}function xE(e){return e!=null?dN(TE(e)):null}function hE(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function fN(e){return e._rawValidators}function hN(e){return e._rawAsyncValidators}function vp(e){return e?Array.isArray(e)?e:[e]:[]}function Vl(e,t){return Array.isArray(e)?e.includes(t):e===t}function pE(e,t){let n=vp(t);return vp(e).forEach(o=>{Vl(n,o)||n.push(o)}),n}function gE(e,t){return vp(t).filter(n=>!Vl(e,n))}var $l=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ME(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=xE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},wp=class extends $l{name;get formDirective(){return null}get path(){return null}},ra=class extends $l{_parent=null;name=null;valueAccessor=null},Ep=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yj=Se(de({},pN),{"[class.ng-submitted]":"isSubmitted"}),AE=(()=>{class e extends Ep{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Re(ra,2))};static \u0275dir=Ht({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&np("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Hr]})}return e})();var Xs="VALID",jl="INVALID",Bi="PENDING",ea="DISABLED",Vi=class{},Ul=class extends Vi{value;source;constructor(t,n){super(),this.value=t,this.source=n}},ta=class extends Vi{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},na=class extends Vi{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},ji=class extends Vi{status;source;constructor(t,n){super(),this.status=t,this.source=n}};function gN(e){return(zl(e)?e.validators:e)||null}function mN(e){return Array.isArray(e)?ME(e):e||null}function yN(e,t){return(zl(t)?t.asyncValidators:e)||null}function vN(e){return Array.isArray(e)?xE(e):e||null}function zl(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var bp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Kr(this.statusReactive)}set status(t){Kr(()=>this.statusReactive.set(t))}_status=Pl(()=>this.statusReactive());statusReactive=Tl(void 0);get valid(){return this.status===Xs}get invalid(){return this.status===jl}get pending(){return this.status==Bi}get disabled(){return this.status===ea}get enabled(){return this.status!==ea}errors;get pristine(){return Kr(this.pristineReactive)}set pristine(t){Kr(()=>this.pristineReactive.set(t))}_pristine=Pl(()=>this.pristineReactive());pristineReactive=Tl(!0);get dirty(){return!this.pristine}get touched(){return Kr(this.touchedReactive)}set touched(t){Kr(()=>this.touchedReactive.set(t))}_touched=Pl(()=>this.touchedReactive());touchedReactive=Tl(!1);get untouched(){return!this.touched}_events=new Vt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(pE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gE(t,this._rawAsyncValidators))}hasValidator(t){return Vl(this._rawValidators,t)}hasAsyncValidator(t){return Vl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Se(de({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new na(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new na(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Se(de({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ta(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ta(!0,r))}markAsPending(t={}){this.status=Bi;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ji(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Se(de({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ea,this.errors=null,this._forEachChild(o=>{o.disable(Se(de({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ul(this.value,r)),this._events.next(new ji(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Se(de({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Xs,this._forEachChild(r=>{r.enable(Se(de({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Se(de({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xs||this.status===Bi)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ul(this.value,n)),this._events.next(new ji(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Se(de({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ea:Xs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Bi,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=DE(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new ji(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?ea:this.errors?jl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bi)?Bi:this._anyControlsHaveStatus(jl)?jl:Xs}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new ta(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new na(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){zl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=mN(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=vN(this._rawAsyncValidators)}};var kE=new ge("",{providedIn:"root",factory:()=>Cp}),Cp="always";function wN(e,t){return[...t.path,e]}function EN(e,t,n=Cp){_N(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),CN(e,t),SN(e,t),DN(e,t),bN(e,t)}function mE(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function bN(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function _N(e,t){let n=fN(e);t.validator!==null?e.setValidators(hE(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=hN(e);t.asyncValidator!==null?e.setAsyncValidators(hE(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let o=()=>e.updateValueAndValidity();mE(t._rawValidators,o),mE(t._rawAsyncValidators,o)}function CN(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&NE(e,t)})}function DN(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&NE(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function NE(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function SN(e,t){let n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function IN(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function TN(e){return Object.getPrototypeOf(e.constructor)===_p}function MN(e,t){if(!t)return null;Array.isArray(t);let n,r,o;return t.forEach(i=>{i.constructor===_E?n=i:TN(i)?r=i:o=i}),o||r||n||null}function yE(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function vE(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var xN=class extends bp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(gN(n),yN(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(vE(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var AN={provide:ra,useExisting:Ro(()=>Dp)},wE=Promise.resolve(),Dp=(()=>{class e extends ra{_changeDetectorRef;callSetDisabledState;control=new xN;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new dt;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=MN(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),IN(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){EN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){wE.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&cp(r);wE.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?wN(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Re(wp,9),Re(aN,10),Re(cN,10),Re(Hl,10),Re(Pi,8),Re(kE,8))};static \u0275dir=Ht({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Uo([AN]),Hr,Zs]})}return e})();var kN={provide:Hl,useExisting:Ro(()=>Kl),multi:!0};function RE(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function NN(e){return e.split(":")[0]}var Kl=(()=>{class e extends _p{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r=this._getOptionId(n),o=RE(r,n);this.setProperty("value",o)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=NN(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Sl(e)))(o||e)}})();static \u0275dir=Ht({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&un("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Uo([kN]),Hr]})}return e})(),OE=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(RE(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Re(Un),Re(jo),Re(Kl,9))};static \u0275dir=Ht({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),RN={provide:Hl,useExisting:Ro(()=>PE),multi:!0};function EE(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function ON(e){return e.split(":")[0]}var PE=(()=>{class e extends _p{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let o=n.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let o=[],i=r.selectedOptions;if(i!==void 0){let s=i;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);o.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);o.push(l)}}}this.value=o,n(o)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=ON(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Sl(e)))(o||e)}})();static \u0275dir=Ht({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&un("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Uo([RN]),Hr]})}return e})(),LE=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(EE(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(EE(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Re(Un),Re(jo),Re(PE,9))};static \u0275dir=Ht({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var PN=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Vo({type:e});static \u0275inj=Oo({})}return e})();var ql=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:kE,useValue:n.callSetDisabledState??Cp}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Vo({type:e});static \u0275inj=Oo({imports:[PN]})}return e})();var ia=class{},Gl=class{},fr=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let o=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Ip=class{encodeKey(t){return FE(t)}encodeValue(t){return FE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function FN(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var BN=/%(\d[a-f0-9])/gi,jN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FE(e){return encodeURIComponent(e).replace(BN,(t,n)=>jN[n]??t)}function Wl(e){return`${e}`}var Wr=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Ip,t.fromString){if(t.fromObject)throw new ve(2805,!1);this.map=FN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],o=Array.isArray(r)?r.map(Wl):[Wl(r)];this.map.set(n,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Wl(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],o=r.indexOf(Wl(t.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Tp=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function VN(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function BE(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function jE(e){return typeof Blob<"u"&&e instanceof Blob}function VE(e){return typeof FormData<"u"&&e instanceof FormData}function $N(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var $E="Content-Type",UE="Accept",KE="X-Request-URL",qE="text/plain",WE="application/json",UN=`${WE}, ${qE}, */*`,oa=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,n,r,o){this.url=n,this.method=t.toUpperCase();let i;if(VN(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new fr,this.context??=new Tp,!this.params)this.params=new Wr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||BE(this.body)||jE(this.body)||VE(this.body)||$N(this.body)?this.body:this.body instanceof Wr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||VE(this.body)?null:jE(this.body)?this.body.type||null:BE(this.body)?null:typeof this.body=="string"?qE:this.body instanceof Wr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?WE:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((f,h)=>f.set(h,t.setHeaders[h]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((f,h)=>f.set(h,t.setParams[h]),u)),new e(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},$i=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}($i||{}),sa=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new fr,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Mp=class e extends sa{constructor(t={}){super(t)}type=$i.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Zl=class e extends sa{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=$i.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Yl=class extends sa{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},HN=200,zN=204;function Sp(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var xp=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof oa)i=n;else{let c;o.headers instanceof fr?c=o.headers:c=new fr(o.headers);let l;o.params&&(o.params instanceof Wr?l=o.params:l=new Wr({fromObject:o.params})),i=new oa(n,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=Lc(i).pipe(bf(c=>this.handler.handle(c)));if(n instanceof oa||o.observe==="events")return s;let a=s.pipe(Ef(c=>c instanceof Zl));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(Rt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ve(2806,!1);return c.body}));case"blob":return a.pipe(Rt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ve(2807,!1);return c.body}));case"text":return a.pipe(Rt(c=>{if(c.body!==null&&typeof c.body!="string")throw new ve(2808,!1);return c.body}));case"json":default:return a.pipe(Rt(c=>c.body))}case"response":return a;default:throw new ve(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Wr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,Sp(o,r))}post(n,r,o={}){return this.request("POST",n,Sp(o,r))}put(n,r,o={}){return this.request("PUT",n,Sp(o,r))}static \u0275fac=function(r){return new(r||e)(Me(ia))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})();var KN=new ge("");function qN(e,t){return t(e)}function WN(e,t,n){return(r,o)=>bl(n,()=>t(r,i=>e(i,o)))}var GE=new ge(""),GN=new ge(""),ZN=new ge("",{providedIn:"root",factory:()=>!0});var HE=(()=>{class e extends ia{backend;injector;chain=null;pendingTasks=be(ki);contributeToStability=be(ZN);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(GE),...this.injector.get(GN,[])]));this.chain=r.reduceRight((o,i)=>WN(o,i,this.injector),qN)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(_f(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(Me(Gl),Me(Ln))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})();var YN=/^\)\]\}',?\n/,JN=RegExp(`^${KE}:`,"m");function QN(e){return"responseURL"in e&&e.responseURL?e.responseURL:JN.test(e.getAllResponseHeaders())?e.getResponseHeader(KE):null}var zE=(()=>{class e{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new ve(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?or(r.\u0275loadImpl()):Lc(null)).pipe(Ps(()=>new Ue(i=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((g,w)=>s.setRequestHeader(g,w.join(","))),n.headers.has(UE)||s.setRequestHeader(UE,UN),!n.headers.has($E)){let g=n.detectContentTypeHeader();g!==null&&s.setRequestHeader($E,g)}if(n.responseType){let g=n.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=s.statusText||"OK",w=new fr(s.getAllResponseHeaders()),m=QN(s)||n.url;return c=new Mp({headers:w,status:s.status,statusText:g,url:m}),c},u=()=>{let{headers:g,status:w,statusText:m,url:D}=l(),b=null;w!==zN&&(b=typeof s.response>"u"?s.responseText:s.response),w===0&&(w=b?HN:0);let O=w>=200&&w<300;if(n.responseType==="json"&&typeof b=="string"){let N=b;b=b.replace(YN,"");try{b=b!==""?JSON.parse(b):null}catch(z){b=N,O&&(O=!1,b={error:z,text:b})}}O?(i.next(new Zl({body:b,headers:g,status:w,statusText:m,url:D||void 0})),i.complete()):i.error(new Yl({error:b,headers:g,status:w,statusText:m,url:D||void 0}))},d=g=>{let{url:w}=l(),m=new Yl({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});i.error(m)},f=!1,h=g=>{f||(i.next(l()),f=!0);let w={type:$i.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(w.total=g.total),n.responseType==="text"&&s.responseText&&(w.partialText=s.responseText),i.next(w)},p=g=>{let w={type:$i.UploadProgress,loaded:g.loaded};g.lengthComputable&&(w.total=g.total),i.next(w)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",p)),s.send(a),i.next({type:$i.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(Me(Li))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})(),ZE=new ge(""),XN="XSRF-TOKEN",eR=new ge("",{providedIn:"root",factory:()=>XN}),tR="X-XSRF-TOKEN",nR=new ge("",{providedIn:"root",factory:()=>tR}),Jl=class{},rR=(()=>{class e{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fl(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)(Me(Hn),Me($r),Me(eR))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})();function oR(e,t){let n=e.url.toLowerCase();if(!be(ZE)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=be(Jl).getToken(),o=be(nR);return r!=null&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,r)})),t(e)}function YE(...e){let t=[xp,zE,HE,{provide:ia,useExisting:HE},{provide:Gl,useFactory:()=>be(KN,{optional:!0})??be(zE)},{provide:GE,useValue:oR,multi:!0},{provide:ZE,useValue:!0},{provide:Jl,useClass:rR}];for(let n of e)t.push(...n.\u0275providers);return Sh(t)}var JE={stage:"production",apiUrl:"https://paychain-api.vercel.app"};var Ql=(a=>(a[a.idle=0]="idle",a[a.begin=1]="begin",a[a.process=2]="process",a[a.error=3]="error",a[a.success=4]="success",a[a.info=5]="info",a[a.loading=6]="loading",a))(Ql||{});function sR(e,t){if(e&1){let n=Oi();Ge(0,"div",6),un("click",function(){Lo(n);let o=In();return Fo(o.beginPaymentProcess())}),yt(1,"Pay with crypto"),ze()}}function aR(e,t){if(e&1){let n=Oi();Ge(0,"div",7),un("click",function(){Lo(n);let o=In();return Fo(o.beginPaymentProcess())}),yt(1,"Payment sent"),zr(2,"br"),yt(3,`Pay again
`),ze()}}function cR(e,t){e&1&&(Ge(0,"div",8)(1,"p"),yt(2,"Processing payment..."),ze(),zr(3,"div",9),ze())}function lR(e,t){e&1&&(Ge(0,"div",10)(1,"p"),yt(2,"Transfering payment..."),ze(),zr(3,"div",9),ze())}function uR(e,t){if(e&1&&(Ge(0,"div",10)(1,"p"),yt(2),ze(),zr(3,"div",9),ze()),e&2){let n=In();qe(2),rp(n.buttonMessage)}}function dR(e,t){if(e&1){let n=Oi();Ge(0,"div",11),un("click",function(){Lo(n);let o=In();return Fo(o.beginPaymentProcess())}),yt(1),ze()}if(e&2){let n=In();qe(),dr(" ",n.buttonMessage,`
`)}}function fR(e,t){if(e&1&&(Ge(0,"div",12),yt(1),ze()),e&2){let n=In();qe(),dr(" ",n.buttonMessage,"")}}var Xl=class e{beginPaymentProcessEvent=new dt;buttonStatus;buttonMessage="";isTransactionDataNull;beginPaymentProcess(){this.beginPaymentProcessEvent.emit()}ButtonStatus=Ql;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ri({type:e,selectors:[["app-button-panel"]],inputs:{buttonStatus:"buttonStatus",buttonMessage:"buttonMessage",isTransactionDataNull:"isTransactionDataNull"},outputs:{beginPaymentProcessEvent:"beginPaymentProcessEvent"},decls:7,vars:7,consts:[["class","main-box",3,"click",4,"ngIf"],["class","main-box success",3,"click",4,"ngIf"],["class","main-box begin",4,"ngIf"],["class","main-box process",4,"ngIf"],["class","main-box info",3,"click",4,"ngIf"],["class","main-box error",4,"ngIf"],[1,"main-box",3,"click"],[1,"main-box","success",3,"click"],[1,"main-box","begin"],[1,"loader"],[1,"main-box","process"],[1,"main-box","info",3,"click"],[1,"main-box","error"]],template:function(n,r){n&1&&$o(0,sR,2,0,"div",0)(1,aR,4,0,"div",1)(2,cR,4,0,"div",2)(3,lR,4,0,"div",3)(4,uR,4,1,"div",3)(5,dR,2,1,"div",4)(6,fR,2,1,"div",5),n&2&&(nt("ngIf",r.buttonStatus==r.ButtonStatus.idle),qe(),nt("ngIf",r.buttonStatus==r.ButtonStatus.success),qe(),nt("ngIf",r.buttonStatus==r.ButtonStatus.begin),qe(),nt("ngIf",r.buttonStatus==r.ButtonStatus.process),qe(),nt("ngIf",r.buttonStatus==r.ButtonStatus.loading),qe(),nt("ngIf",r.buttonStatus==r.ButtonStatus.info),qe(),nt("ngIf",r.buttonStatus==r.ButtonStatus.error))},dependencies:[Bl],styles:[".loader[_ngcontent-%COMP%]{width:120px;height:20px;-webkit-mask:linear-gradient(90deg,#000 70%,rgba(0,0,0,0) 0) left/20% 100%;background:linear-gradient(#000 0 0) left -25% top 0/20% 100% no-repeat #ddd;animation:_ngcontent-%COMP%_l7 1s infinite steps(6)}@keyframes _ngcontent-%COMP%_l7{to{background-position:right -25% top 0}}.main-box[_ngcontent-%COMP%]{font-weight:500;display:flex;flex-direction:column;width:180px;flex-grow:1;background-color:var(--primary-color);color:#fff;text-align:center;cursor:pointer;border-radius:var(--box-radius);height:var(--box-height);padding:var(--box-padding);box-sizing:border-box;align-items:center;justify-content:center}.main-box.begin[_ngcontent-%COMP%], .main-box.process[_ngcontent-%COMP%]{color:#000;background-color:var(--disabled-color);cursor:wait}.main-box.success[_ngcontent-%COMP%]{background-color:var(--success-color)}.main-box.error[_ngcontent-%COMP%]{background-color:var(--danger-color);cursor:not-allowed}.main-box.info[_ngcontent-%COMP%]{background-color:var(--info-color)}"]})};function hR(e,t){if(e&1&&(Ge(0,"option",10),yt(1),ze()),e&2){let n=t.$implicit;nt("ngValue",n),qe(),dr(" ",n.network_name," ")}}function pR(e,t){if(e&1&&(Ge(0,"option",10),yt(1),ze()),e&2){let n=t.$implicit;nt("ngValue",n),qe(),dr(" ",n.symbol," ")}}function gR(e,t){if(e&1){let n=Oi();Ge(0,"div",1)(1,"div",2)(2,"label",3),yt(3,"Network:"),ze(),Ge(4,"select",4),Ol("ngModelChange",function(o){Lo(n);let i=In();return ip(i.selectedPaymentMethod,o)||(i.selectedPaymentMethod=o),Fo(o)}),$o(5,hR,2,2,"option",5),ze()(),Ge(6,"div",2)(7,"label",6),yt(8,"Token:"),ze(),Ge(9,"select",7),Ol("ngModelChange",function(o){Lo(n);let i=In();return ip(i.selectedPaymentToken,o)||(i.selectedPaymentToken=o),Fo(o)}),$o(10,pR,2,2,"option",5),ze()(),Ge(11,"span",8),yt(12),ze(),Ge(13,"span",9),yt(14),ze()()}if(e&2){let n=In();qe(4),Rl("ngModel",n.selectedPaymentMethod),qe(),nt("ngForOf",n.transactionData.payment_methods),qe(4),Rl("ngModel",n.selectedPaymentToken),qe(),nt("ngForOf",n.selectedPaymentMethod==null?null:n.selectedPaymentMethod.accepted_tokens),qe(2),op("Price: ",n.selectedPaymentToken==null?null:n.selectedPaymentToken.expected_amount," ",n.selectedPaymentToken==null?null:n.selectedPaymentToken.symbol,""),qe(2),dr("Receiver: ",n.selectedPaymentMethod==null?null:n.selectedPaymentMethod.wallet_address,"")}}function mR(e,t){e&1&&zr(0,"div",1)}var eu=class e{paymentMethodChanged=new dt;paymentTokenChanged=new dt;transactionData=null;_selectedPaymentMethod=null;get selectedPaymentMethod(){return this._selectedPaymentMethod}set selectedPaymentMethod(t){t!=null&&(this.selectedPaymentToken=t?.accepted_tokens[0]),this._selectedPaymentMethod=t,this.paymentMethodChanged.emit(t)}_selectedPaymentToken=null;get selectedPaymentToken(){return this._selectedPaymentToken}set selectedPaymentToken(t){this._selectedPaymentToken=t,this.paymentTokenChanged.emit(t)}ngOnChanges(t){t.transactionData&&this.transactionData?.payment_methods?.length&&(this.selectedPaymentMethod=this.transactionData.payment_methods[0])}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ri({type:e,selectors:[["app-info-panel"]],inputs:{transactionData:"transactionData"},outputs:{paymentMethodChanged:"paymentMethodChanged",paymentTokenChanged:"paymentTokenChanged"},features:[Zs],decls:2,vars:2,consts:[["class","side-panel",4,"ngIf"],[1,"side-panel"],[1,"select-container"],["for","network-select"],["id","network-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["for","token-select"],["id","token-select",3,"ngModelChange","ngModel"],[1,"currency-info"],[1,"address-info"],[3,"ngValue"]],template:function(n,r){n&1&&$o(0,gR,15,7,"div",0)(1,mR,1,0,"div",0),n&2&&(nt("ngIf",r.transactionData),qe(),nt("ngIf",!r.transactionData))},dependencies:[dE,Bl,ql,OE,LE,Kl,AE,Dp],styles:[".side-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:start;gap:10px;width:250px;flex-grow:1;background-color:#fff;box-shadow:var(--box-shadow);border:1px solid var(--border-color);border-radius:var(--box-radius);height:var(--box-height);padding:var(--box-padding);box-sizing:border-box;transform-origin:left;transition:transform .2s ease-in-out,opacity .2s ease-in-out;overflow:hidden}.side-panel[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]{font-size:9px}.side-panel[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%], .side-panel[_ngcontent-%COMP%]   .network-info[_ngcontent-%COMP%], .side-panel[_ngcontent-%COMP%]   .network-warning[_ngcontent-%COMP%]{font-size:12px}@media (max-width: 480px){.side-panel[_ngcontent-%COMP%]{transform-origin:top;min-width:180px;max-width:250px}}.select-container[_ngcontent-%COMP%]{display:flex;gap:8px}"]})};var bm=ef(eb()),Ct=ef(ib()),Es=ef(cb());var iu,xR=new Uint8Array(16);function Ap(){if(!iu&&(iu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!iu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iu(xR)}var lb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function AR(e){return typeof e=="string"&&lb.test(e)}var qi=AR;var ft=[];for(su=0;su<256;++su)ft.push((su+256).toString(16).substr(1));var su;function kR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ft[e[t+0]]+ft[e[t+1]]+ft[e[t+2]]+ft[e[t+3]]+"-"+ft[e[t+4]]+ft[e[t+5]]+"-"+ft[e[t+6]]+ft[e[t+7]]+"-"+ft[e[t+8]]+ft[e[t+9]]+"-"+ft[e[t+10]]+ft[e[t+11]]+ft[e[t+12]]+ft[e[t+13]]+ft[e[t+14]]+ft[e[t+15]]).toLowerCase();if(!qi(n))throw TypeError("Stringified UUID is invalid");return n}var ub=kR;function NR(e,t,n){e=e||{};var r=e.random||(e.rng||Ap)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return ub(r)}var aa=NR;var Tn=Object.create(null);Tn.open="0";Tn.close="1";Tn.ping="2";Tn.pong="3";Tn.message="4";Tn.upgrade="5";Tn.noop="6";var ca=Object.create(null);Object.keys(Tn).forEach(e=>{ca[Tn[e]]=e});var la={type:"error",data:"parser error"};var hb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",pb=typeof ArrayBuffer=="function",gb=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ua=({type:e,data:t},n,r)=>hb&&t instanceof Blob?n?r(t):db(t,r):pb&&(t instanceof ArrayBuffer||gb(t))?n?r(t):db(new Blob([t]),r):r(Tn[e]+(t||"")),db=(e,t)=>{let n=new FileReader;return n.onload=function(){let r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function fb(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}var kp;function mb(e,t){if(hb&&e.data instanceof Blob)return e.data.arrayBuffer().then(fb).then(t);if(pb&&(e.data instanceof ArrayBuffer||gb(e.data)))return t(fb(e.data));ua(e,!1,n=>{kp||(kp=new TextEncoder),t(kp.encode(n))})}var yb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",da=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<yb.length;e++)da[yb.charCodeAt(e)]=e;var vb=e=>{let t=e.length*.75,n=e.length,r,o=0,i,s,a,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);let l=new ArrayBuffer(t),u=new Uint8Array(l);for(r=0;r<n;r+=4)i=da[e.charCodeAt(r)],s=da[e.charCodeAt(r+1)],a=da[e.charCodeAt(r+2)],c=da[e.charCodeAt(r+3)],u[o++]=i<<2|s>>4,u[o++]=(s&15)<<4|a>>2,u[o++]=(a&3)<<6|c&63;return l};var RR=typeof ArrayBuffer=="function",fa=(e,t)=>{if(typeof e!="string")return{type:"message",data:wb(e,t)};let n=e.charAt(0);return n==="b"?{type:"message",data:OR(e.substring(1),t)}:ca[n]?e.length>1?{type:ca[n],data:e.substring(1)}:{type:ca[n]}:la},OR=(e,t)=>{if(RR){let n=vb(e);return wb(n,t)}else return{base64:!0,data:e}},wb=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}};var Eb="",bb=(e,t)=>{let n=e.length,r=new Array(n),o=0;e.forEach((i,s)=>{ua(i,!1,a=>{r[s]=a,++o===n&&t(r.join(Eb))})})},_b=(e,t)=>{let n=e.split(Eb),r=[];for(let o=0;o<n.length;o++){let i=fa(n[o],t);if(r.push(i),i.type==="error")break}return r};function Cb(){return new TransformStream({transform(e,t){mb(e,n=>{let r=n.length,o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);let i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{o=new Uint8Array(9);let i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(n)})}})}var Np;function au(e){return e.reduce((t,n)=>t+n.length,0)}function cu(e,t){if(e[0].length===t)return e.shift();let n=new Uint8Array(t),r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Db(e,t){Np||(Np=new TextDecoder);let n=[],r=0,o=-1,i=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if(au(n)<1)break;let c=cu(n,1);i=(c[0]&128)===128,o=c[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(au(n)<2)break;let c=cu(n,2);o=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(au(n)<8)break;let c=cu(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(la);break}o=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(au(n)<o)break;let c=cu(n,o);a.enqueue(fa(i?c:Np.decode(c),t)),r=0}if(o===0||o>e){a.enqueue(la);break}}}})}var Rp=4;function Ve(e){if(e)return PR(e)}function PR(e){for(var t in Ve.prototype)e[t]=Ve.prototype[t];return e}Ve.prototype.on=Ve.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ve.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Ve.prototype.off=Ve.prototype.removeListener=Ve.prototype.removeAllListeners=Ve.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Ve.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this};Ve.prototype.emitReserved=Ve.prototype.emit;Ve.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ve.prototype.hasListeners=function(e){return!!this.listeners(e).length};var hr=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Tt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Sb="arraybuffer";function lu(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}var LR=Tt.setTimeout,FR=Tt.clearTimeout;function pr(e,t){t.useNativeTimers?(e.setTimeoutFn=LR.bind(Tt),e.clearTimeoutFn=FR.bind(Tt)):(e.setTimeoutFn=Tt.setTimeout.bind(Tt),e.clearTimeoutFn=Tt.clearTimeout.bind(Tt))}var BR=1.33;function Ib(e){return typeof e=="string"?jR(e):Math.ceil((e.byteLength||e.size)*BR)}function jR(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function uu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Tb(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Mb(e){let t={},n=e.split("&");for(let r=0,o=n.length;r<o;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}var du=class extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}},gr=class extends Ve{constructor(t){super(),this.writable=!1,pr(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new du(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let n=fa(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let n=Tb(t);return n.length?"?"+n:""}};var ha=class extends gr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};_b(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,bb(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=uu()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}};var xb=!1;try{xb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Ab=xb;function VR(){}var Op=class extends ha{constructor(t){if(super(t),typeof location<"u"){let n=location.protocol==="https:",r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){let r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}},fu=(()=>{class e extends Ve{constructor(n,r,o){super(),this.createRequest=n,pr(this,o),this._opts=o,this._method=o.method||"GET",this._uri=r,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var n;let r=lu(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;let o=this._xhr=this.createRequest(r);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&o.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var i;o.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=e.requestsCount++,e.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=VR,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete e.requests[this._index],this._xhr=null}}_onLoad(){let n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return e.requestsCount=0,e.requests={},e})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kb);else if(typeof addEventListener=="function"){let e="onpagehide"in Tt?"pagehide":"unload";addEventListener(e,kb,!1)}}function kb(){for(let e in fu.requests)fu.requests.hasOwnProperty(e)&&fu.requests[e].abort()}var $R=function(){let e=Nb({xdomain:!1});return e&&e.responseType!==null}(),Zr=class extends Op{constructor(t){super(t);let n=t&&t.forceBase64;this.supportsBinary=$R&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new fu(Nb,this.uri(),t)}};function Nb(e){let t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ab))return new XMLHttpRequest}catch{}if(!t)try{return new Tt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var Rb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Lp=class extends gr{get name(){return"websocket"}doOpen(){let t=this.uri(),n=this.opts.protocols,r=Rb?{}:lu(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){let r=t[n],o=n===t.length-1;ua(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}o&&hr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=uu()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}},Pp=Tt.WebSocket||Tt.MozWebSocket,Yr=class extends Lp{createSocket(t,n,r){return Rb?new Pp(t,n,r):n?new Pp(t,n):new Pp(t)}doWrite(t,n){this.ws.send(n)}};var Wi=class extends gr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let n=Db(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),o=Cb();o.readable.pipeTo(t.writable),this._writer=o.writable.getWriter();let i=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),i())}).catch(a=>{})};i();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){let r=t[n],o=n===t.length-1;this._writer.write(r).then(()=>{o&&hr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var Fp={websocket:Yr,webtransport:Wi,polling:Zr};var UR=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,HR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gi(e){if(e.length>8e3)throw"URI too long";let t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=UR.exec(e||""),i={},s=14;for(;s--;)i[HR[s]]=o[s]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=zR(i,i.path),i.queryKey=KR(i,i.query),i}function zR(e,t){let n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function KR(e,t){let n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,i){o&&(n[o]=i)}),n}var Bp=typeof addEventListener=="function"&&typeof removeEventListener=="function",hu=[];Bp&&addEventListener("offline",()=>{hu.forEach(e=>e())},!1);var pu=(()=>{class e extends Ve{constructor(n,r){if(super(),this.binaryType=Sb,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){let o=Gi(n);r.hostname=o.host,r.secure=o.protocol==="https"||o.protocol==="wss",r.port=o.port,o.query&&(r.query=o.query)}else r.host&&(r.hostname=Gi(r.host).host);pr(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(o=>{let i=o.prototype.name;this.transports.push(i),this._transportsByName[i]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Mb(this.opts.query)),Bp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},hu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){let r=Object.assign({},this.opts.query);r.EIO=Rp,r.transport=n,this.id&&(r.sid=this.id);let o=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let n=this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",e.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let o=0;o<this.writeBuffer.length;o++){let i=this.writeBuffer[o].data;if(i&&(r+=Ib(i)),o>0&&r>this._maxPayload)return this.writeBuffer.slice(0,o);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,hr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,o){return this._sendPacket("message",n,r,o),this}send(n,r,o){return this._sendPacket("message",n,r,o),this}_sendPacket(n,r,o,i){if(typeof r=="function"&&(i=r,r=void 0),typeof o=="function"&&(i=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;let s={type:n,data:r,options:o};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){let n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},o=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():n()}):this.upgrading?o():n()),this}_onError(n){if(e.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Bp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let o=hu.indexOf(this._offlineEventListener);o!==-1&&hu.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}return e.protocol=Rp,e})(),gu=class extends pu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;pu.priorWebsocketSuccess=!1;let o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;pu.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{let f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,u(),n.close(),n=null)}let s=d=>{let f=new Error("probe error: "+d);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function a(){s("transport closed")}function c(){s("socket closed")}function l(d){n&&d.name!==n.name&&i()}let u=()=>{n.removeListener("open",o),n.removeListener("error",s),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",o),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}},Zi=class extends gu{constructor(t,n={}){let r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>Fp[o]).filter(o=>!!o)),super(t,r)}};var J6=Zi.protocol;function Ob(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Gi(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}var zp={};CI(zp,{Decoder:()=>Up,Encoder:()=>$p,PacketType:()=>xe,protocol:()=>jb});var WR=typeof ArrayBuffer=="function",GR=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Pb=Object.prototype.toString,ZR=typeof Blob=="function"||typeof Blob<"u"&&Pb.call(Blob)==="[object BlobConstructor]",YR=typeof File=="function"||typeof File<"u"&&Pb.call(File)==="[object FileConstructor]";function ga(e){return WR&&(e instanceof ArrayBuffer||GR(e))||ZR&&e instanceof Blob||YR&&e instanceof File}function pa(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(pa(e[n]))return!0;return!1}if(ga(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return pa(e.toJSON(),!0);for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&pa(e[n]))return!0;return!1}function Lb(e){let t=[],n=e.data,r=e;return r.data=jp(n,t),r.attachments=t.length,{packet:r,buffers:t}}function jp(e,t){if(!e)return e;if(ga(e)){let n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){let n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=jp(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){let n={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=jp(e[r],t));return n}return e}function Fb(e,t){return e.data=Vp(e.data,t),delete e.attachments,e}function Vp(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Vp(e[n],t);else if(typeof e=="object")for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Vp(e[n],t));return e}var JR=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jb=5,xe=function(e){return e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK",e}(xe||{}),$p=class{constructor(t){this.replacer=t}encode(t){return(t.type===xe.EVENT||t.type===xe.ACK)&&pa(t)?this.encodeAsBinary({type:t.type===xe.EVENT?xe.BINARY_EVENT:xe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===xe.BINARY_EVENT||t.type===xe.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){let n=Lb(t),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}};function Bb(e){return Object.prototype.toString.call(e)==="[object Object]"}var Up=class e extends Ve{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);let r=n.type===xe.BINARY_EVENT;r||n.type===xe.BINARY_ACK?(n.type=r?xe.EVENT:xe.ACK,this.reconstructor=new Hp(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ga(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0,r={type:Number(t.charAt(0))};if(xe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===xe.BINARY_EVENT||r.type===xe.BINARY_ACK){let i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);let s=t.substring(i,n);if(s!=Number(s)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(t.charAt(n+1)==="/"){let i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";let o=t.charAt(n+1);if(o!==""&&Number(o)==o){let i=n+1;for(;++n;){let s=t.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){let i=this.tryParse(t.substr(n));if(e.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case xe.CONNECT:return Bb(n);case xe.DISCONNECT:return n===void 0;case xe.CONNECT_ERROR:return typeof n=="string"||Bb(n);case xe.EVENT:case xe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&JR.indexOf(n[0])===-1);case xe.ACK:case xe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Hp=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let n=Fb(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Kt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var QR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Yi=class extends Ve{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[Kt(t,"open",this.onopen.bind(this)),Kt(t,"packet",this.onpacket.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,o,i;if(QR.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;let s={type:xe.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){let u=this.ids++,d=n.pop();this._registerAckCallback(u,d),s.id=u}let a=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,n){var r;let o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[t]=n;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},o),s=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};s.withError=!0,this.acks[t]=s}emitWithAck(t,...n){return new Promise((r,o)=>{let i=(s,a)=>s?o(s):r(a);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...i)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:xe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){let r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case xe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xe.EVENT:case xe.BINARY_EVENT:this.onevent(t);break;case xe.ACK:case xe.BINARY_ACK:this.onack(t);break;case xe.DISCONNECT:this.ondisconnect();break;case xe.CONNECT_ERROR:this.destroy();let r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){let n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let n=this._anyListeners.slice();for(let r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let n=this,r=!1;return function(...o){r||(r=!0,n.packet({type:xe.ACK,id:t,data:o}))}}onack(t){let n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let n=this._anyOutgoingListeners.slice();for(let r of n)r.apply(this,t.data)}}};function zo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}zo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};zo.prototype.reset=function(){this.attempts=0};zo.prototype.setMin=function(e){this.ms=e};zo.prototype.setMax=function(e){this.max=e};zo.prototype.setJitter=function(e){this.jitter=e};var Ji=class extends Ve{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,pr(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new zo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;let o=n.parser||zp;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Zi(this.uri,this.opts);let n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let o=Kt(n,"open",function(){r.onopen(),t&&t()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},s=Kt(n,"error",i);if(this._timeout!==!1){let a=this._timeout,c=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(o),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(Kt(t,"ping",this.onping.bind(this)),Kt(t,"data",this.ondata.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this)),Kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){hr(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Yi(this,t,n),this.nsps[t]=r),r}_destroy(t){let n=Object.keys(this.nsps);for(let r of n)if(this.nsps[r].active)return;this._close()}_packet(t){let n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let n=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ma={};function ya(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};let n=Ob(e,t.path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=ma[o]&&i in ma[o].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||s,c;return a?c=new Ji(r,t):(ma[o]||(ma[o]=new Ji(r,t)),c=ma[o]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(ya,{Manager:Ji,Socket:Yi,io:ya,connect:ya});var XR=Iy({});function te(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(l){try{c(r.next(l))}catch(u){i(u)}}function a(l){try{c(r.throw(l))}catch(u){i(u)}}function c(l){var u;l.done?o(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}var kt=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Wn=[],gn=[],eO=typeof Uint8Array<"u"?Uint8Array:Array,_m=!1;function n1(){_m=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)Wn[t]=e[t],gn[e.charCodeAt(t)]=t;gn[45]=62,gn[95]=63}function tO(e,t,n){for(var r,o,i=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(Wn[(o=r)>>18&63]+Wn[o>>12&63]+Wn[o>>6&63]+Wn[63&o]);return i.join("")}function Vb(e){var t;_m||n1();for(var n=e.length,r=n%3,o="",i=[],s=16383,a=0,c=n-r;a<c;a+=s)i.push(tO(e,a,a+s>c?c:a+s));return r===1?(t=e[n-1],o+=Wn[t>>2],o+=Wn[t<<4&63],o+="=="):r===2&&(t=(e[n-2]<<8)+e[n-1],o+=Wn[t>>10],o+=Wn[t>>4&63],o+=Wn[t<<2&63],o+="="),i.push(o),i.join("")}function mu(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=256*i+e[t+d],d+=f,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=f,u-=8);if(i===0)i=1-l;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)}function r1(e,t,n,r,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,d=u>>1,f=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[n+h]=255&s,h+=p,s/=256,l-=8);e[n+h-p]|=128*g}var nO={}.toString,o1=Array.isArray||function(e){return nO.call(e)=="[object Array]"};X.TYPED_ARRAY_SUPPORT=kt.TYPED_ARRAY_SUPPORT===void 0||kt.TYPED_ARRAY_SUPPORT;var rO=ed();function ed(){return X.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _r(e,t){if(ed()<t)throw new RangeError("Invalid typed array length");return X.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=X.prototype:(e===null&&(e=new X(t)),e.length=t),e}function X(e,t,n){if(!(X.TYPED_ARRAY_SUPPORT||this instanceof X))return new X(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ag(this,e)}return i1(this,e,t,n)}function i1(e,t,n,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function(o,i,s,a){if(i.byteLength,s<0||i.byteLength<s)throw new RangeError("'offset' is out of bounds");if(i.byteLength<s+(a||0))throw new RangeError("'length' is out of bounds");return i=s===void 0&&a===void 0?new Uint8Array(i):a===void 0?new Uint8Array(i,s):new Uint8Array(i,s,a),X.TYPED_ARRAY_SUPPORT?(o=i).__proto__=X.prototype:o=Kp(o,i),o}(e,t,n,r):typeof t=="string"?function(o,i,s){if(typeof s=="string"&&s!==""||(s="utf8"),!X.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var a=0|a1(i,s);o=_r(o,a);var c=o.write(i,s);return c!==a&&(o=o.slice(0,c)),o}(e,t,n):function(o,i){if(Gn(i)){var s=0|Cm(i.length);return(o=_r(o,s)).length===0||i.copy(o,0,0,s),o}if(i){if(typeof ArrayBuffer<"u"&&i.buffer instanceof ArrayBuffer||"length"in i)return typeof i.length!="number"||(a=i.length)!=a?_r(o,0):Kp(o,i);if(i.type==="Buffer"&&o1(i.data))return Kp(o,i.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s1(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ag(e,t){if(s1(t),e=_r(e,t<0?0:0|Cm(t)),!X.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Kp(e,t){var n=t.length<0?0:0|Cm(t.length);e=_r(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Cm(e){if(e>=ed())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ed().toString(16)+" bytes");return 0|e}function Gn(e){return!(e==null||!e._isBuffer)}function a1(e,t){if(Gn(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return td(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return d1(e).length;default:if(r)return td(e).length;t=(""+t).toLowerCase(),r=!0}}function oO(e,t,n){var r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hO(this,t,n);case"utf8":case"utf-8":return l1(this,t,n);case"ascii":return dO(this,t,n);case"latin1":case"binary":return fO(this,t,n);case"base64":return uO(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pO(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Ko(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function $b(e,t,n,r,o){if(e.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if(typeof t=="string"&&(t=X.from(t,r)),Gn(t))return t.length===0?-1:Ub(e,t,n,r,o);if(typeof t=="number")return t&=255,X.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ub(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Ub(e,t,n,r,o){var i,s=1,a=e.length,c=t.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(h,p){return s===1?h[p]:h.readUInt16BE(p*s)}if(o){var u=-1;for(i=n;i<a;i++)if(l(e,i)===l(t,u===-1?0:i-u)){if(u===-1&&(u=i),i-u+1===c)return u*s}else u!==-1&&(i-=i-u),u=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){for(var d=!0,f=0;f<c;f++)if(l(e,i+f)!==l(t,f)){d=!1;break}if(d)return i}return-1}function iO(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function sO(e,t,n,r){return Od(td(t,e.length-n),e,n,r)}function c1(e,t,n,r){return Od(function(o){for(var i=[],s=0;s<o.length;++s)i.push(255&o.charCodeAt(s));return i}(t),e,n,r)}function aO(e,t,n,r){return c1(e,t,n,r)}function cO(e,t,n,r){return Od(d1(t),e,n,r)}function lO(e,t,n,r){return Od(function(o,i){for(var s,a,c,l=[],u=0;u<o.length&&!((i-=2)<0);++u)a=(s=o.charCodeAt(u))>>8,c=s%256,l.push(c),l.push(a);return l}(t,e.length-n),e,n,r)}function uO(e,t,n){return t===0&&n===e.length?Vb(e):Vb(e.slice(t,n))}function l1(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,c,l=e[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:(192&(i=e[o+1]))==128&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=e[o+1],s=e[o+2],(192&i)==128&&(192&s)==128&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],(192&i)==128&&(192&s)==128&&(192&a)==128&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}return function(f){var h=f.length;if(h<=Hb)return String.fromCharCode.apply(String,f);for(var p="",g=0;g<h;)p+=String.fromCharCode.apply(String,f.slice(g,g+=Hb));return p}(r)}X.poolSize=8192,X._augment=function(e){return e.__proto__=X.prototype,e},X.from=function(e,t,n){return i1(null,e,t,n)},X.TYPED_ARRAY_SUPPORT&&(X.prototype.__proto__=Uint8Array.prototype,X.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&X[Symbol.species]),X.alloc=function(e,t,n){return function(r,o,i,s){return s1(o),o<=0?_r(r,o):i!==void 0?typeof s=="string"?_r(r,o).fill(i,s):_r(r,o).fill(i):_r(r,o)}(null,e,t,n)},X.allocUnsafe=function(e){return Ag(null,e)},X.allocUnsafeSlow=function(e){return Ag(null,e)},X.isBuffer=f1,X.compare=function(e,t){if(!Gn(e)||!Gn(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},X.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},X.concat=function(e,t){if(!o1(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return X.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=X.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!Gn(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},X.byteLength=a1,X.prototype._isBuffer=!0,X.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ko(this,t,t+1);return this},X.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ko(this,t,t+3),Ko(this,t+1,t+2);return this},X.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ko(this,t,t+7),Ko(this,t+1,t+6),Ko(this,t+2,t+5),Ko(this,t+3,t+4);return this},X.prototype.toString=function(){var e=0|this.length;return e===0?"":arguments.length===0?l1(this,0,e):oO.apply(this,arguments)},X.prototype.equals=function(e){if(!Gn(e))throw new TypeError("Argument must be a Buffer");return this===e||X.compare(this,e)===0},X.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},X.prototype.compare=function(e,t,n,r,o){if(!Gn(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),o===void 0&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(r,o),l=e.slice(t,n),u=0;u<a;++u)if(c[u]!==l[u]){i=c[u],s=l[u];break}return i<s?-1:s<i?1:0},X.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},X.prototype.indexOf=function(e,t,n){return $b(this,e,t,n,!0)},X.prototype.lastIndexOf=function(e,t,n){return $b(this,e,t,n,!1)},X.prototype.write=function(e,t,n,r){if(t===void 0)r="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return iO(this,e,t,n);case"utf8":case"utf-8":return sO(this,e,t,n);case"ascii":return c1(this,e,t,n);case"latin1":case"binary":return aO(this,e,t,n);case"base64":return cO(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lO(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},X.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Hb=4096;function dO(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function fO(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function hO(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=mO(e[i]);return o}function pO(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function at(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Ot(e,t,n,r,o,i){if(!Gn(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function yu(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function vu(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function u1(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function zb(e,t,n,r,o){return o||u1(e,0,n,4),r1(e,t,n,r,23,4),n+4}function Kb(e,t,n,r,o){return o||u1(e,0,n,8),r1(e,t,n,r,52,8),n+8}X.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=t===void 0?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),X.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=X.prototype;else{var o=t-e;n=new X(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},X.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||at(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},X.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||at(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},X.prototype.readUInt8=function(e,t){return t||at(e,1,this.length),this[e]},X.prototype.readUInt16LE=function(e,t){return t||at(e,2,this.length),this[e]|this[e+1]<<8},X.prototype.readUInt16BE=function(e,t){return t||at(e,2,this.length),this[e]<<8|this[e+1]},X.prototype.readUInt32LE=function(e,t){return t||at(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},X.prototype.readUInt32BE=function(e,t){return t||at(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},X.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||at(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},X.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||at(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},X.prototype.readInt8=function(e,t){return t||at(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},X.prototype.readInt16LE=function(e,t){t||at(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},X.prototype.readInt16BE=function(e,t){t||at(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},X.prototype.readInt32LE=function(e,t){return t||at(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},X.prototype.readInt32BE=function(e,t){return t||at(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},X.prototype.readFloatLE=function(e,t){return t||at(e,4,this.length),mu(this,e,!0,23,4)},X.prototype.readFloatBE=function(e,t){return t||at(e,4,this.length),mu(this,e,!1,23,4)},X.prototype.readDoubleLE=function(e,t){return t||at(e,8,this.length),mu(this,e,!0,52,8)},X.prototype.readDoubleBE=function(e,t){return t||at(e,8,this.length),mu(this,e,!1,52,8)},X.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ot(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},X.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Ot(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},X.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,1,255,0),X.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},X.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,2,65535,0),X.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):yu(this,e,t,!0),t+2},X.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,2,65535,0),X.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):yu(this,e,t,!1),t+2},X.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,4,4294967295,0),X.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):vu(this,e,t,!0),t+4},X.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,4,4294967295,0),X.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):vu(this,e,t,!1),t+4},X.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Ot(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&a===0&&this[t+i-1]!==0&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},X.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Ot(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&a===0&&this[t+i+1]!==0&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},X.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,1,127,-128),X.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},X.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,2,32767,-32768),X.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):yu(this,e,t,!0),t+2},X.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,2,32767,-32768),X.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):yu(this,e,t,!1),t+2},X.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,4,2147483647,-2147483648),X.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):vu(this,e,t,!0),t+4},X.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Ot(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),X.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):vu(this,e,t,!1),t+4},X.prototype.writeFloatLE=function(e,t,n){return zb(this,e,t,!0,n)},X.prototype.writeFloatBE=function(e,t,n){return zb(this,e,t,!1,n)},X.prototype.writeDoubleLE=function(e,t,n){return Kb(this,e,t,!0,n)},X.prototype.writeDoubleBE=function(e,t,n){return Kb(this,e,t,!1,n)},X.prototype.copy=function(e,t,n,r){if(n||(n=0),r||r===0||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!X.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},X.prototype.fill=function(e,t,n,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!X.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0),typeof e=="number")for(i=t;i<n;++i)this[i]=e;else{var s=Gn(e)?e:td(new X(e,r).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var gO=/[^+\/0-9A-Za-z-_]/g;function mO(e){return e<16?"0"+e.toString(16):e.toString(16)}function td(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function d1(e){return function(t){var n,r,o,i,s,a;_m||n1();var c=t.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=t[c-2]==="="?2:t[c-1]==="="?1:0,a=new eO(3*c/4-s),o=s>0?c-4:c;var l=0;for(n=0,r=0;n<o;n+=4,r+=3)i=gn[t.charCodeAt(n)]<<18|gn[t.charCodeAt(n+1)]<<12|gn[t.charCodeAt(n+2)]<<6|gn[t.charCodeAt(n+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return s===2?(i=gn[t.charCodeAt(n)]<<2|gn[t.charCodeAt(n+1)]>>4,a[l++]=255&i):s===1&&(i=gn[t.charCodeAt(n)]<<10|gn[t.charCodeAt(n+1)]<<4|gn[t.charCodeAt(n+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}(function(t){if((t=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(t).replace(gO,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(e))}function Od(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function f1(e){return e!=null&&(!!e._isBuffer||qb(e)||function(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&qb(t.slice(0,0))}(e))}function qb(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var yO=Object.freeze({__proto__:null,Buffer:X,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),X.alloc(+e)},isBuffer:f1,kMaxLength:rO}),vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xa(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var ns={},Qt={},Et={};function nd(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function h1(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function p1(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Dm(e,...t){if(!p1(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function g1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");nd(e.outputLen),nd(e.blockLen)}function m1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function y1(e,t){Dm(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Et,"__esModule",{value:!0}),Et.isBytes=p1,Et.number=nd,Et.bool=h1,Et.bytes=Dm,Et.hash=g1,Et.exists=m1,Et.output=y1;var vO={number:nd,bool:h1,bytes:Dm,hash:g1,exists:m1,output:y1};Et.default=vO,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=e.createView=e.u32=e.u16=e.u8=void 0,e.bytesToHex=r,e.hexToBytes=s,e.hexToNumber=a,e.bytesToNumberBE=function(d){return a(r(d))},e.numberToBytesBE=function(d,f){return s(d.toString(16).padStart(2*f,"0"))},e.asyncLoop=async function(d,f,h){let p=Date.now();for(let g=0;g<d;g++){h(g);let w=Date.now()-p;w>=0&&w<f||(await(0,e.nextTick)(),p+=w)}},e.utf8ToBytes=c,e.bytesToUtf8=function(d){return new TextDecoder().decode(d)},e.toBytes=function(d){if(typeof d=="string")d=c(d);else{if(!(0,t.isBytes)(d))throw new Error("Uint8Array expected, got "+typeof d);d=u(d)}return d},e.concatBytes=function(...d){let f=0;for(let p=0;p<d.length;p++){let g=d[p];(0,t.bytes)(g),f+=g.length}let h=new Uint8Array(f);for(let p=0,g=0;p<d.length;p++){let w=d[p];h.set(w,g),g+=w.length}return h},e.checkOpts=function(d,f){if(f==null||typeof f!="object")throw new Error("options must be defined");return Object.assign(d,f)},e.equalBytes=function(d,f){if(d.length!==f.length)return!1;let h=0;for(let p=0;p<d.length;p++)h|=d[p]^f[p];return h===0},e.setBigUint64=l,e.u64Lengths=function(d,f){let h=new Uint8Array(16),p=(0,e.createView)(h);return l(p,0,BigInt(f?f.length:0),!0),l(p,8,BigInt(d.length),!0),h},e.isAligned32=function(d){return d.byteOffset%4==0},e.copyBytes=u,e.clean=function(...d){for(let f=0;f<d.length;f++)d[f].fill(0)};let t=Et;if(e.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),e.u16=d=>new Uint16Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/2)),e.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),e.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");let n=Array.from({length:256},(d,f)=>f.toString(16).padStart(2,"0"));function r(d){(0,t.bytes)(d);let f="";for(let h=0;h<d.length;h++)f+=n[d[h]];return f}let o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(d){return d>=o._0&&d<=o._9?d-o._0:d>=o._A&&d<=o._F?d-(o._A-10):d>=o._a&&d<=o._f?d-(o._a-10):void 0}function s(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);let f=d.length,h=f/2;if(f%2)throw new Error("padded hex string expected, got unpadded hex of length "+f);let p=new Uint8Array(h);for(let g=0,w=0;g<h;g++,w+=2){let m=i(d.charCodeAt(w)),D=i(d.charCodeAt(w+1));if(m===void 0||D===void 0){let b=d[w]+d[w+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+w)}p[g]=16*m+D}return p}function a(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);return BigInt(d===""?"0":`0x${d}`)}function c(d){if(typeof d!="string")throw new Error("string expected, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}e.nextTick=async()=>{},e.Hash=class{};function l(d,f,h,p){if(typeof d.setBigUint64=="function")return d.setBigUint64(f,h,p);let g=BigInt(32),w=BigInt(4294967295),m=Number(h>>g&w),D=Number(h&w),b=p?4:0,O=p?0:4;d.setUint32(f+b,m,p),d.setUint32(f+O,D,p)}function u(d){return Uint8Array.from(d)}e.wrapCipher=(d,f)=>(Object.assign(f,d),f)}(Qt);var Fa={},ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.AEAD_TAG_LENGTH=ct.XCHACHA20_NONCE_LENGTH=ct.CURVE25519_PUBLIC_KEY_SIZE=ct.ETH_PUBLIC_KEY_SIZE=ct.UNCOMPRESSED_PUBLIC_KEY_SIZE=ct.COMPRESSED_PUBLIC_KEY_SIZE=ct.SECRET_KEY_LENGTH=void 0,ct.SECRET_KEY_LENGTH=32,ct.COMPRESSED_PUBLIC_KEY_SIZE=33,ct.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,ct.ETH_PUBLIC_KEY_SIZE=64,ct.CURVE25519_PUBLIC_KEY_SIZE=32,ct.XCHACHA20_NONCE_LENGTH=24,ct.AEAD_TAG_LENGTH=16,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ephemeralKeySize=e.symmetricNonceLength=e.symmetricAlgorithm=e.isHkdfKeyCompressed=e.isEphemeralKeyCompressed=e.ellipticCurve=e.ECIES_CONFIG=void 0;var t=ct,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};e.ECIES_CONFIG=new n,e.ellipticCurve=function(){return e.ECIES_CONFIG.ellipticCurve},e.isEphemeralKeyCompressed=function(){return e.ECIES_CONFIG.isEphemeralKeyCompressed},e.isHkdfKeyCompressed=function(){return e.ECIES_CONFIG.isHkdfKeyCompressed},e.symmetricAlgorithm=function(){return e.ECIES_CONFIG.symmetricAlgorithm},e.symmetricNonceLength=function(){return e.ECIES_CONFIG.symmetricNonceLength},e.ephemeralKeySize=function(){var r={secp256k1:e.ECIES_CONFIG.isEphemeralKeyCompressed?t.COMPRESSED_PUBLIC_KEY_SIZE:t.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:t.CURVE25519_PUBLIC_KEY_SIZE,ed25519:t.CURVE25519_PUBLIC_KEY_SIZE};if(e.ECIES_CONFIG.ellipticCurve in r)return r[e.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(Fa);var qp={},rd={},Ld={},v1={},Sm={},wu={};Object.defineProperty(wu,"__esModule",{value:!0}),wu.crypto=void 0,wu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=o,e.getWebcryptoSubtle=i,e.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(d,...f){let{nonceLength:h}=c,p=o(h),g=c(l,p,...u).encrypt(d,...f),w=(0,r.concatBytes)(p,g);return g.fill(0),w},decrypt(d,...f){let{nonceLength:h}=c,p=d.subarray(0,h),g=d.subarray(h);return c(l,p,...u).decrypt(g,...f)}})};let t=wu,n=Et,r=Qt;function o(c=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(c));if(t.crypto&&typeof t.crypto.randomBytes=="function")return t.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function i(){if(t.crypto&&typeof t.crypto.subtle=="object"&&t.crypto.subtle!=null)return t.crypto.subtle;throw new Error("crypto.subtle must be defined")}e.utils={async encrypt(c,l,u,d){let f=i(),h=await f.importKey("raw",c,l,!0,["encrypt"]),p=await f.encrypt(u,h,d);return new Uint8Array(p)},async decrypt(c,l,u,d){let f=i(),h=await f.importKey("raw",c,l,!0,["decrypt"]),p=await f.decrypt(u,h,d);return new Uint8Array(p)}};let s={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,d)=>{(0,n.bytes)(l),(0,n.bytes)(u);let f={name:c,length:8*l.length},h=function(p,g,w){if(p===s.CBC)return{name:s.CBC,iv:g};if(p===s.CTR)return{name:s.CTR,counter:g,length:64};if(p===s.GCM)return w?{name:s.GCM,iv:g,additionalData:w}:{name:s.GCM,iv:g};throw new Error("unknown aes block mode")}(c,u,d);return{encrypt:p=>((0,n.bytes)(p),e.utils.encrypt(l,f,h,p)),decrypt:p=>((0,n.bytes)(p),e.utils.decrypt(l,f,h,p))}}}e.cbc=a(s.CBC),e.ctr=a(s.CTR),e.gcm=a(s.GCM)}(Sm);var w1={},lt={},Cr={},Zt={};function od(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function E1(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function b1(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Im(e,...t){if(!b1(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function _1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");od(e.outputLen),od(e.blockLen)}function C1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function D1(e,t){Im(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.isBytes=b1,Zt.number=od,Zt.bool=E1,Zt.bytes=Im,Zt.hash=_1,Zt.exists=C1,Zt.output=D1;var wO={number:od,bool:E1,bytes:Im,hash:_1,exists:C1,output:D1};Zt.default=wO;var Mr={},Eu={};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.crypto=void 0,Eu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},e.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,e.byteSwap)(l[u])},e.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let d=0;d<l.length;d++)u+=r[l[d]];return u},e.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);let u=l.length,d=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);let f=new Uint8Array(d);for(let h=0,p=0;h<d;h++,p+=2){let g=i(l.charCodeAt(p)),w=i(l.charCodeAt(p+1));if(g===void 0||w===void 0){let m=l[p]+l[p+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+p)}f[h]=16*g+w}return f},e.asyncLoop=async function(l,u,d){let f=Date.now();for(let h=0;h<l;h++){d(h);let p=Date.now()-f;p>=0&&p<u||(await(0,e.nextTick)(),f+=p)}},e.utf8ToBytes=s,e.toBytes=a,e.concatBytes=function(...l){let u=0;for(let f=0;f<l.length;f++){let h=l[f];(0,n.bytes)(h),u+=h.length}let d=new Uint8Array(u);for(let f=0,h=0;f<l.length;f++){let p=l[f];d.set(p,h),h+=p.length}return d},e.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},e.wrapConstructor=function(l){let u=f=>l().update(a(f)).digest(),d=l();return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=()=>l(),u},e.wrapConstructorWithOpts=function(l){let u=(f,h)=>l(h).update(a(f)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>l(f),u},e.wrapXOFConstructorWithOpts=function(l){let u=(f,h)=>l(h).update(a(f)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=f=>l(f),u},e.randomBytes=function(l=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(l));if(t.crypto&&typeof t.crypto.randomBytes=="function")return t.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};let t=Eu,n=Zt;e.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),e.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),e.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),e.rotr=(l,u)=>l<<32-u|l>>>u,e.rotl=(l,u)=>l<<u|l>>>32-u>>>0,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,e.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,e.byteSwapIfBE=e.isLE?l=>l:l=>(0,e.byteSwap)(l);let r=Array.from({length:256},(l,u)=>u.toString(16).padStart(2,"0")),o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(l){return l>=o._0&&l<=o._9?l-o._0:l>=o._A&&l<=o._F?l-(o._A-10):l>=o._a&&l<=o._f?l-(o._a-10):void 0}function s(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=s(l)),(0,n.bytes)(l),l}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}};let c={}.toString}(Mr),Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.HashMD=Cr.Maj=Cr.Chi=void 0;var Wp=Zt,va=Mr;Cr.Chi=(e,t,n)=>e&t^~e&n;Cr.Maj=(e,t,n)=>e&t^e&n^t&n;Cr.HashMD=class extends va.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,va.createView)(this.buffer)}update(e){(0,Wp.exists)(this);let{view:t,buffer:n,blockLen:r}=this,o=(e=(0,va.toBytes)(e)).length;for(let i=0;i<o;){let s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{let a=(0,va.createView)(e);for(;r<=o-i;i+=r)this.process(a,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Wp.exists)(this),(0,Wp.output)(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:r,isLE:o}=this,{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;(function(u,d,f,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(d,f,h);let p=BigInt(32),g=BigInt(4294967295),w=Number(f>>p&g),m=Number(f&g),D=h?4:0,b=h?0:4;u.setUint32(d+D,w,h),u.setUint32(d+b,m,h)})(n,r-8,BigInt(8*this.length),o),this.process(n,0);let s=(0,va.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)s.setUint32(4*u,l[u],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}};var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.add5L=me.add5H=me.add4H=me.add4L=me.add3H=me.add3L=me.rotlBL=me.rotlBH=me.rotlSL=me.rotlSH=me.rotr32L=me.rotr32H=me.rotrBL=me.rotrBH=me.rotrSL=me.rotrSH=me.shrSL=me.shrSH=me.toBig=void 0,me.fromBig=Tm,me.split=S1,me.add=j1;var bu=BigInt(2**32-1),kg=BigInt(32);function Tm(e,t=!1){return t?{h:Number(e&bu),l:Number(e>>kg&bu)}:{h:0|Number(e>>kg&bu),l:0|Number(e&bu)}}function S1(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:i,l:s}=Tm(e[o],t);[n[o],r[o]]=[i,s]}return[n,r]}var I1=(e,t)=>BigInt(e>>>0)<<kg|BigInt(t>>>0);me.toBig=I1;var T1=(e,t,n)=>e>>>n;me.shrSH=T1;var M1=(e,t,n)=>e<<32-n|t>>>n;me.shrSL=M1;var x1=(e,t,n)=>e>>>n|t<<32-n;me.rotrSH=x1;var A1=(e,t,n)=>e<<32-n|t>>>n;me.rotrSL=A1;var k1=(e,t,n)=>e<<64-n|t>>>n-32;me.rotrBH=k1;var N1=(e,t,n)=>e>>>n-32|t<<64-n;me.rotrBL=N1;var R1=(e,t)=>t;me.rotr32H=R1;var O1=(e,t)=>e;me.rotr32L=O1;var P1=(e,t,n)=>e<<n|t>>>32-n;me.rotlSH=P1;var L1=(e,t,n)=>t<<n|e>>>32-n;me.rotlSL=L1;var F1=(e,t,n)=>t<<n-32|e>>>64-n;me.rotlBH=F1;var B1=(e,t,n)=>e<<n-32|t>>>64-n;function j1(e,t,n,r){let o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}me.rotlBL=B1;var V1=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);me.add3L=V1;var $1=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;me.add3H=$1;var U1=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);me.add4L=U1;var H1=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0;me.add4H=H1;var z1=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0);me.add5L=z1;var K1=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0;me.add5H=K1;var EO={fromBig:Tm,split:S1,toBig:I1,shrSH:T1,shrSL:M1,rotrSH:x1,rotrSL:A1,rotrBH:k1,rotrBL:N1,rotr32H:R1,rotr32L:O1,rotlSH:P1,rotlSL:L1,rotlBH:F1,rotlBL:B1,add:j1,add3L:V1,add3H:$1,add4L:U1,add4H:H1,add5H:K1,add5L:z1};me.default=EO,Object.defineProperty(lt,"__esModule",{value:!0}),lt.sha384=lt.sha512_256=lt.sha512_224=lt.sha512=lt.SHA384=lt.SHA512_256=lt.SHA512_224=lt.SHA512=void 0;var bO=Cr,Ee=me,_u=Mr,[_O,CO]=Ee.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Jr=new Uint32Array(80),Qr=new Uint32Array(80),ei=class extends bO.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:n,Bh:r,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:w}=this;return[t,n,r,o,i,s,a,c,l,u,d,f,h,p,g,w]}set(t,n,r,o,i,s,a,c,l,u,d,f,h,p,g,w){this.Ah=0|t,this.Al=0|n,this.Bh=0|r,this.Bl=0|o,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|d,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|w}process(t,n){for(let b=0;b<16;b++,n+=4)Jr[b]=t.getUint32(n),Qr[b]=t.getUint32(n+=4);for(let b=16;b<80;b++){let O=0|Jr[b-15],N=0|Qr[b-15],z=Ee.default.rotrSH(O,N,1)^Ee.default.rotrSH(O,N,8)^Ee.default.shrSH(O,N,7),q=Ee.default.rotrSL(O,N,1)^Ee.default.rotrSL(O,N,8)^Ee.default.shrSL(O,N,7),U=0|Jr[b-2],W=0|Qr[b-2],$=Ee.default.rotrSH(U,W,19)^Ee.default.rotrBH(U,W,61)^Ee.default.shrSH(U,W,6),R=Ee.default.rotrSL(U,W,19)^Ee.default.rotrBL(U,W,61)^Ee.default.shrSL(U,W,6),A=Ee.default.add4L(q,R,Qr[b-7],Qr[b-16]),M=Ee.default.add4H(A,z,$,Jr[b-7],Jr[b-16]);Jr[b]=0|M,Qr[b]=0|A}let{Ah:r,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:w,Hh:m,Hl:D}=this;for(let b=0;b<80;b++){let O=Ee.default.rotrSH(d,f,14)^Ee.default.rotrSH(d,f,18)^Ee.default.rotrBH(d,f,41),N=Ee.default.rotrSL(d,f,14)^Ee.default.rotrSL(d,f,18)^Ee.default.rotrBL(d,f,41),z=d&h^~d&g,q=f&p^~f&w,U=Ee.default.add5L(D,N,q,CO[b],Qr[b]),W=Ee.default.add5H(U,m,O,z,_O[b],Jr[b]),$=0|U,R=Ee.default.rotrSH(r,o,28)^Ee.default.rotrBH(r,o,34)^Ee.default.rotrBH(r,o,39),A=Ee.default.rotrSL(r,o,28)^Ee.default.rotrBL(r,o,34)^Ee.default.rotrBL(r,o,39),M=r&i^r&a^i&a,k=o&s^o&c^s&c;m=0|g,D=0|w,g=0|h,w=0|p,h=0|d,p=0|f,{h:d,l:f}=Ee.default.add(0|l,0|u,0|W,0|$),l=0|a,u=0|c,a=0|i,c=0|s,i=0|r,s=0|o;let B=Ee.default.add3L($,A,k);r=Ee.default.add3H(B,W,R,M),o=0|B}({h:r,l:o}=Ee.default.add(0|this.Ah,0|this.Al,0|r,0|o)),{h:i,l:s}=Ee.default.add(0|this.Bh,0|this.Bl,0|i,0|s),{h:a,l:c}=Ee.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=Ee.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:d,l:f}=Ee.default.add(0|this.Eh,0|this.El,0|d,0|f),{h,l:p}=Ee.default.add(0|this.Fh,0|this.Fl,0|h,0|p),{h:g,l:w}=Ee.default.add(0|this.Gh,0|this.Gl,0|g,0|w),{h:m,l:D}=Ee.default.add(0|this.Hh,0|this.Hl,0|m,0|D),this.set(r,o,i,s,a,c,l,u,d,f,h,p,g,w,m,D)}roundClean(){Jr.fill(0),Qr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};lt.SHA512=ei;var id=class extends ei{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}};lt.SHA512_224=id;var sd=class extends ei{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}};lt.SHA512_256=sd;var ad=class extends ei{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};lt.SHA384=ad,lt.sha512=(0,_u.wrapConstructor)(()=>new ei),lt.sha512_224=(0,_u.wrapConstructor)(()=>new id),lt.sha512_256=(0,_u.wrapConstructor)(()=>new sd),lt.sha384=(0,_u.wrapConstructor)(()=>new ad);var Ng={},os={},Be={},_e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.notImplemented=_e.bitMask=void 0,_e.isBytes=cd,_e.abytes=ld,_e.abool=function(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)},_e.bytesToHex=Gp,_e.numberToHexUnpadded=Wb,_e.hexToNumber=Zp,_e.hexToBytes=Bu,_e.bytesToNumberBE=function(e){return Zp(Gp(e))},_e.bytesToNumberLE=function(e){return ld(e),Zp(Gp(Uint8Array.from(e).reverse()))},_e.numberToBytesBE=Zb,_e.numberToBytesLE=function(e,t){return Zb(e,t).reverse()},_e.numberToVarBytesBE=function(e){return Bu(Wb(e))},_e.ensureBytes=function(e,t,n){let r;if(typeof t=="string")try{r=Bu(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!cd(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r},_e.concatBytes=Yb,_e.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0},_e.utf8ToBytes=function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))},_e.inRange=Jb,_e.aInRange=function(e,t,n,r){if(!Jb(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)},_e.bitLen=function(e){let t;for(t=0;e>Rg;e>>=Fu,t+=1);return t},_e.bitGet=function(e,t){return e>>BigInt(t)&Fu},_e.bitSet=function(e,t,n){return e|(n?Fu:Rg)<<BigInt(t)},_e.createHmacDrbg=function(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Jp(e),o=Jp(e),i=0,s=()=>{r.fill(1),o.fill(0),i=0},a=(...u)=>n(o,r,...u),c=(u=Jp())=>{o=a(Qb([0]),u),r=a(),u.length!==0&&(o=a(Qb([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,d=[];for(;u<t;){r=a();let f=r.slice();d.push(f),u+=r.length}return Yb(...d)};return(u,d)=>{let f;for(s(),c(u);!(f=d(l()));)c();return s(),f}},_e.validateObject=function(e,t,n={}){let r=(o,i,s)=>{let a=IO[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=e[o];if(!(s&&c===void 0||a(c,e)))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e},_e.memoized=function(e){let t=new WeakMap;return(n,...r)=>{let o=t.get(n);if(o!==void 0)return o;let i=e(n,...r);return t.set(n,i),i}};var Rg=BigInt(0),Fu=BigInt(1),DO=BigInt(2);function cd(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ld(e){if(!cd(e))throw new Error("Uint8Array expected")}var SO=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Gp(e){ld(e);let t="";for(let n=0;n<e.length;n++)t+=SO[e[n]];return t}function Wb(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function Zp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var mr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Gb(e){return e>=mr._0&&e<=mr._9?e-mr._0:e>=mr._A&&e<=mr._F?e-(mr._A-10):e>=mr._a&&e<=mr._f?e-(mr._a-10):void 0}function Bu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){let s=Gb(e.charCodeAt(i)),a=Gb(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[o]=16*s+a}return r}function Zb(e,t){return Bu(e.toString(16).padStart(2*t,"0"))}function Yb(...e){let t=0;for(let r=0;r<e.length;r++){let o=e[r];ld(o),t+=o.length}let n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){let i=e[r];n.set(i,o),o+=i.length}return n}var Yp=e=>typeof e=="bigint"&&Rg<=e;function Jb(e,t,n){return Yp(e)&&Yp(t)&&Yp(n)&&t<=e&&e<n}_e.bitMask=e=>(DO<<BigInt(e-1))-Fu;var Jp=e=>new Uint8Array(e),Qb=e=>Uint8Array.from(e),IO={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||cd(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};_e.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(Be,"__esModule",{value:!0}),Be.isNegativeLE=void 0,Be.mod=Gt,Be.pow=q1,Be.pow2=function(e,t,n){let r=e;for(;t-- >ut;)r*=r,r%=n;return r},Be.invert=Cu,Be.tonelliShanks=W1,Be.FpSqrt=t_,Be.validateField=function(e){let t=MO.reduce((n,r)=>(n[r]="function",n),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,qt.validateObject)(e,t)},Be.FpPow=n_,Be.FpInvertBatch=r_,Be.FpDiv=function(e,t,n){return e.mul(t,typeof n=="bigint"?Cu(n,e.ORDER):e.inv(n))},Be.FpLegendre=o_,Be.FpIsSquare=function(e){let t=o_(e.ORDER);return n=>{let r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},Be.nLength=Qp,Be.Field=function(e,t,n=!1,r={}){if(e<=ut)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=Qp(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=t_(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:(0,qt.bitMask)(o),ZERO:ut,ONE:$e,create:c=>Gt(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return ut<=c&&c<e},is0:c=>c===ut,isOdd:c=>(c&$e)===$e,neg:c=>Gt(-c,e),eql:(c,l)=>c===l,sqr:c=>Gt(c*c,e),add:(c,l)=>Gt(c+l,e),sub:(c,l)=>Gt(c-l,e),mul:(c,l)=>Gt(c*l,e),pow:(c,l)=>n_(a,c,l),div:(c,l)=>Gt(c*Cu(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Cu(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>r_(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,qt.numberToBytesLE)(c,i):(0,qt.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?(0,qt.bytesToNumberLE)(c):(0,qt.bytesToNumberBE)(c)}});return Object.freeze(a)},Be.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},Be.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},Be.hashToPrivateScalar=function(e,t,n=!1){e=(0,qt.ensureBytes)("privateHash",e);let r=e.length,o=Qp(t).nByteLength+8;if(o<24||r<o||r>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${r}`);let i=n?(0,qt.bytesToNumberLE)(e):(0,qt.bytesToNumberBE)(e);return Gt(i,t-$e)+$e},Be.getFieldBytesLength=Pg,Be.getMinHashLength=i_,Be.mapHashToField=function(e,t,n=!1){let r=e.length,o=Pg(t),i=i_(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let s=Gt(n?(0,qt.bytesToNumberBE)(e):(0,qt.bytesToNumberLE)(e),t-$e)+$e;return n?(0,qt.numberToBytesLE)(s,o):(0,qt.numberToBytesBE)(s,o)};var qt=_e,ut=BigInt(0),$e=BigInt(1),fo=BigInt(2),TO=BigInt(3),Og=BigInt(4),Xb=BigInt(5),e_=BigInt(8);function Gt(e,t){let n=e%t;return n>=ut?n:t+n}function q1(e,t,n){if(n<=ut||t<ut)throw new Error("Expected power/modulo > 0");if(n===$e)return ut;let r=$e;for(;t>ut;)t&$e&&(r=r*e%n),e=e*e%n,t>>=$e;return r}function Cu(e,t){if(e===ut||t<=ut)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Gt(e,t),r=t,o=ut,i=$e;for(;n!==ut;){let s=r%n,a=o-i*(r/n);r=n,n=s,o=i,i=a}if(r!==$e)throw new Error("invert: does not exist");return Gt(o,t)}function W1(e){let t=(e-$e)/fo,n,r,o;for(n=e-$e,r=0;n%fo===ut;n/=fo,r++);for(o=fo;o<e&&q1(o,t,e)!==e-$e;o++);if(r===1){let s=(e+$e)/Og;return function(a,c){let l=a.pow(c,s);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}let i=(n+$e)/fo;return function(s,a){if(s.pow(a,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,l=s.pow(s.mul(s.ONE,o),n),u=s.pow(a,i),d=s.pow(a,n);for(;!s.eql(d,s.ONE);){if(s.eql(d,s.ZERO))return s.ZERO;let f=1;for(let p=s.sqr(d);f<c&&!s.eql(p,s.ONE);f++)p=s.sqr(p);let h=s.pow(l,$e<<BigInt(c-f-1));l=s.sqr(h),u=s.mul(u,h),d=s.mul(d,l),c=f}return u}}function t_(e){if(e%Og===TO){let t=(e+$e)/Og;return function(n,r){let o=n.pow(r,t);if(!n.eql(n.sqr(o),r))throw new Error("Cannot find square root");return o}}if(e%e_===Xb){let t=(e-Xb)/e_;return function(n,r){let o=n.mul(r,fo),i=n.pow(o,t),s=n.mul(r,i),a=n.mul(n.mul(s,fo),i),c=n.mul(s,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return W1(e)}BigInt(9),BigInt(16);Be.isNegativeLE=(e,t)=>(Gt(e,t)&$e)===$e;var MO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function n_(e,t,n){if(n<ut)throw new Error("Expected power > 0");if(n===ut)return e.ONE;if(n===$e)return t;let r=e.ONE,o=t;for(;n>ut;)n&$e&&(r=e.mul(r,o)),o=e.sqr(o),n>>=$e;return r}function r_(e,t){let n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function o_(e){let t=(e-$e)/fo;return(n,r)=>n.pow(r,t)}function Qp(e,t){let n=t!==void 0?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Pg(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function i_(e){let t=Pg(e);return t+Math.ceil(t/2)}Object.defineProperty(os,"__esModule",{value:!0}),os.wNAF=function(e,t){let n=(i,s)=>{let a=s.negate();return i?a:s},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>t)throw new Error(`Wrong window size=${i}, should be [1..${t}]`)},o=i=>(r(i),{windows:Math.ceil(t/i)+1,windowSize:2**(i-1)});return{constTimeNegate:n,unsafeLadder(i,s){let a=e.ZERO,c=i;for(;s>xO;)s&Xp&&(a=a.add(c)),c=c.double(),s>>=Xp;return a},precomputeWindow(i,s){let{windows:a,windowSize:c}=o(s),l=[],u=i,d=u;for(let f=0;f<a;f++){d=u,l.push(d);for(let h=1;h<c;h++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(i,s,a){let{windows:c,windowSize:l}=o(i),u=e.ZERO,d=e.BASE,f=BigInt(2**i-1),h=2**i,p=BigInt(i);for(let g=0;g<c;g++){let w=g*l,m=Number(a&f);a>>=p,m>l&&(m-=h,a+=Xp);let D=w,b=w+Math.abs(m)-1,O=g%2!=0,N=m<0;m===0?d=d.add(n(O,s[D])):u=u.add(n(N,s[b]))}return{p:u,f:d}},wNAFCached(i,s,a){let c=c_.get(i)||1,l=eg.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&eg.set(i,a(l))),this.wNAF(c,l,s)},setWindowSize(i,s){r(s),c_.set(i,s),eg.delete(i)}}},os.pippenger=function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((u,d)=>{if(!t.isValid(u))throw new Error(`wrong scalar at index ${d}`)}),n.forEach((u,d)=>{if(!(u instanceof e))throw new Error(`wrong point at index ${d}`)});let o=(0,a_.bitLen)(BigInt(n.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/i)*i,l=e.ZERO;for(let u=c;u>=0;u-=i){a.fill(e.ZERO);for(let f=0;f<r.length;f++){let h=r[f],p=Number(h>>BigInt(u)&BigInt(s));a[p]=a[p].add(n[f])}let d=e.ZERO;for(let f=a.length-1,h=e.ZERO;f>0;f--)h=h.add(a[f]),d=d.add(h);if(l=l.add(d),u!==0)for(let f=0;f<i;f++)l=l.double()}return l},os.validateBasic=function(e){return(0,s_.validateField)(e.Fp),(0,a_.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(Se(de(de({},(0,s_.nLength)(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))};var s_=Be,a_=_e,xO=BigInt(0),Xp=BigInt(1),eg=new WeakMap,c_=new WeakMap;Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.twistedEdwards=function(e){let t=function(M){let k=(0,tg.validateBasic)(M);return Pt.validateObject(M,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze(de({},k))}(e),{Fp:n,n:r,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:c}=t,l=Du<<BigInt(8*a)-Lt,u=n.create,d=(0,l_.Field)(t.n,t.nBitLength),f=t.uvRatio||((M,k)=>{try{return{isValid:!0,value:n.sqrt(M*n.inv(k))}}catch{return{isValid:!1,value:Mn}}}),h=t.adjustScalarBytes||(M=>M),p=t.domain||((M,k,B)=>{if((0,Wt.abool)("phflag",B),k.length||B)throw new Error("Contexts/pre-hash are not supported");return M});function g(M,k){Pt.aInRange("coordinate "+M,k,Mn,l)}function w(M){if(!(M instanceof b))throw new Error("ExtendedPoint expected")}let m=(0,Wt.memoized)((M,k)=>{let{ex:B,ey:V,ez:E}=M,y=M.is0();k==null&&(k=y?AO:n.inv(E));let v=u(B*k),S=u(V*k),x=u(E*k);if(y)return{x:Mn,y:Lt};if(x!==Lt)throw new Error("invZ was invalid");return{x:v,y:S}}),D=(0,Wt.memoized)(M=>{let{a:k,d:B}=t;if(M.is0())throw new Error("bad point: ZERO");let{ex:V,ey:E,ez:y,et:v}=M,S=u(V*V),x=u(E*E),C=u(y*y),_=u(C*C),T=u(S*k);if(u(C*u(T+x))!==u(_+u(B*u(S*x))))throw new Error("bad point: equation left != right (1)");if(u(V*E)!==u(y*v))throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(k,B,V,E){this.ex=k,this.ey=B,this.ez=V,this.et=E,g("x",k),g("y",B),g("z",V),g("t",E),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(k){if(k instanceof b)throw new Error("extended point not allowed");let{x:B,y:V}=k||{};return g("x",B),g("y",V),new b(B,V,Lt,u(B*V))}static normalizeZ(k){let B=n.invertBatch(k.map(V=>V.ez));return k.map((V,E)=>V.toAffine(B[E])).map(b.fromAffine)}static msm(k,B){return(0,tg.pippenger)(b,d,k,B)}_setWindowSize(k){z.setWindowSize(this,k)}assertValidity(){D(this)}equals(k){w(k);let{ex:B,ey:V,ez:E}=this,{ex:y,ey:v,ez:S}=k,x=u(B*S),C=u(y*E),_=u(V*S),T=u(v*E);return x===C&&_===T}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:k}=t,{ex:B,ey:V,ez:E}=this,y=u(B*B),v=u(V*V),S=u(Du*u(E*E)),x=u(k*y),C=B+V,_=u(u(C*C)-y-v),T=x+v,I=T-S,P=x-v,H=u(_*I),F=u(T*P),j=u(_*P),L=u(I*T);return new b(H,F,L,j)}add(k){w(k);let{a:B,d:V}=t,{ex:E,ey:y,ez:v,et:S}=this,{ex:x,ey:C,ez:_,et:T}=k;if(B===BigInt(-1)){let ne=u((y-E)*(C+x)),ae=u((y+E)*(C-x)),ce=u(ae-ne);if(ce===Mn)return this.double();let pe=u(v*Du*T),he=u(S*Du*_),fe=he+pe,we=ae+ne,Ce=he-pe,Qe=u(fe*ce),mt=u(we*Ce),ai=u(fe*Ce),On=u(ce*we);return new b(Qe,mt,On,ai)}let I=u(E*x),P=u(y*C),H=u(S*V*T),F=u(v*_),j=u((E+y)*(x+C)-I-P),L=F-H,K=F+H,G=u(P-B*I),ee=u(j*L),Q=u(K*G),se=u(j*G),re=u(L*K);return new b(ee,Q,re,se)}subtract(k){return this.add(k.negate())}wNAF(k){return z.wNAFCached(this,k,b.normalizeZ)}multiply(k){let B=k;Pt.aInRange("scalar",B,Lt,r);let{p:V,f:E}=this.wNAF(B);return b.normalizeZ([V,E])[0]}multiplyUnsafe(k){let B=k;return Pt.aInRange("scalar",B,Mn,r),B===Mn?N:this.equals(N)||B===Lt?this:this.equals(O)?this.wNAF(B).p:z.unsafeLadder(this,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return z.unsafeLadder(this,r).is0()}toAffine(k){return m(this,k)}clearCofactor(){let{h:k}=t;return k===Lt?this:this.multiplyUnsafe(k)}static fromHex(k,B=!1){let{d:V,a:E}=t,y=n.BYTES;k=(0,Wt.ensureBytes)("pointHex",k,y),(0,Wt.abool)("zip215",B);let v=k.slice(),S=k[y-1];v[y-1]=-129&S;let x=Pt.bytesToNumberLE(v),C=B?l:n.ORDER;Pt.aInRange("pointHex.y",x,Mn,C);let _=u(x*x),T=u(_-Lt),I=u(V*_-E),{isValid:P,value:H}=f(T,I);if(!P)throw new Error("Point.fromHex: invalid y coordinate");let F=(H&Lt)===Lt,j=(128&S)!=0;if(!B&&H===Mn&&j)throw new Error("Point.fromHex: x=0 and x_0=1");return j!==F&&(H=u(-H)),b.fromAffine({x:H,y:x})}static fromPrivateKey(k){return W(k).point}toRawBytes(){let{x:k,y:B}=this.toAffine(),V=Pt.numberToBytesLE(B,n.BYTES);return V[V.length-1]|=k&Lt?128:0,V}toHex(){return Pt.bytesToHex(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,Lt,u(t.Gx*t.Gy)),b.ZERO=new b(Mn,Lt,Lt,Mn);let{BASE:O,ZERO:N}=b,z=(0,tg.wNAF)(b,8*a);function q(M){return(0,l_.mod)(M,r)}function U(M){return q(Pt.bytesToNumberLE(M))}function W(M){let k=a;M=(0,Wt.ensureBytes)("private key",M,k);let B=(0,Wt.ensureBytes)("hashed private key",i(M),2*k),V=h(B.slice(0,k)),E=B.slice(k,2*k),y=U(V),v=O.multiply(y),S=v.toRawBytes();return{head:V,prefix:E,scalar:y,point:v,pointBytes:S}}function $(M=new Uint8Array,...k){let B=Pt.concatBytes(...k);return U(i(p(B,(0,Wt.ensureBytes)("context",M),!!o)))}let R=kO;return O._setWindowSize(8),{CURVE:t,getPublicKey:function(M){return W(M).pointBytes},sign:function(M,k,B={}){M=(0,Wt.ensureBytes)("message",M),o&&(M=o(M));let{prefix:V,scalar:E,pointBytes:y}=W(k),v=$(B.context,V,M),S=O.multiply(v).toRawBytes(),x=q(v+$(B.context,S,y,M)*E);Pt.aInRange("signature.s",x,Mn,r);let C=Pt.concatBytes(S,Pt.numberToBytesLE(x,n.BYTES));return(0,Wt.ensureBytes)("result",C,2*a)},verify:function(M,k,B,V=R){let{context:E,zip215:y}=V,v=n.BYTES;M=(0,Wt.ensureBytes)("signature",M,2*v),k=(0,Wt.ensureBytes)("message",k),y!==void 0&&(0,Wt.abool)("zip215",y),o&&(k=o(k));let S=Pt.bytesToNumberLE(M.slice(v,2*v)),x,C,_;try{x=b.fromHex(B,y),C=b.fromHex(M.slice(0,v),y),_=O.multiplyUnsafe(S)}catch{return!1}if(!y&&x.isSmallOrder())return!1;let T=$(E,C.toRawBytes(),x.toRawBytes(),k);return C.add(x.multiplyUnsafe(T)).subtract(_).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:W,randomPrivateKey:()=>s(n.BYTES),precompute:(M=8,k=b.BASE)=>(k._setWindowSize(M),k.multiply(BigInt(3)),k)}}};var tg=os,l_=Be,Pt=_e,Wt=_e,Mn=BigInt(0),Lt=BigInt(1),Du=BigInt(2),AO=BigInt(8),kO={zip215:!0},so={};Object.defineProperty(so,"__esModule",{value:!0}),so.expand_message_xmd=G1,so.expand_message_xof=Z1,so.hash_to_field=ng,so.isogenyMap=function(e,t){let n=t.map(r=>Array.from(r).reverse());return(r,o)=>{let[i,s,a,c]=n.map(l=>l.reduce((u,d)=>e.add(e.mul(u,r),d)));return r=e.div(i,s),o=e.mul(o,e.div(a,c)),{x:r,y:o}}},so.createHasher=function(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){let i=ng(r,2,de(Se(de({},n),{DST:n.DST}),o)),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,o){let i=ng(r,1,de(Se(de({},n),{DST:n.encodeDST}),o)),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);let o=e.fromAffine(t(r)).clearCofactor();return o.assertValidity(),o}}};var NO=Be,wt=_e,RO=wt.bytesToNumberBE;function ao(e,t){if(Ba(e),Ba(t),e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);let n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function OO(e,t){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Ba(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function G1(e,t,n,r){(0,wt.abytes)(e),(0,wt.abytes)(t),Ba(n),t.length>255&&(t=r((0,wt.concatBytes)((0,wt.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:o,blockLen:i}=r,s=Math.ceil(n/o);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");let a=(0,wt.concatBytes)(t,ao(t.length,1)),c=ao(0,i),l=ao(n,2),u=new Array(s),d=r((0,wt.concatBytes)(c,e,l,ao(0,1),a));u[0]=r((0,wt.concatBytes)(d,ao(1,1),a));for(let f=1;f<=s;f++){let h=[OO(d,u[f-1]),ao(f+1,1),a];u[f]=r((0,wt.concatBytes)(...h))}return(0,wt.concatBytes)(...u).slice(0,n)}function Z1(e,t,n,r,o){if((0,wt.abytes)(e),(0,wt.abytes)(t),Ba(n),t.length>255){let i=Math.ceil(2*r/8);t=o.create({dkLen:i}).update((0,wt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:n}).update(e).update(ao(n,2)).update(t).update(ao(t.length,1)).digest()}function ng(e,t,n){(0,wt.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:o,m:i,hash:s,expand:a,DST:c}=n;(0,wt.abytes)(e),Ba(t);let l=typeof c=="string"?(0,wt.utf8ToBytes)(c):c,u=r.toString(2).length,d=Math.ceil((u+o)/8),f=t*i*d,h;if(a==="xmd")h=G1(e,l,f,s);else if(a==="xof")h=Z1(e,l,f,o,s);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=e}let p=new Array(t);for(let g=0;g<t;g++){let w=new Array(i);for(let m=0;m<i;m++){let D=d*(m+g*i),b=h.subarray(D,D+d);w[m]=(0,NO.mod)(RO(b),r)}p[g]=w}return p}var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.montgomery=function(e){let t=function(g){return(0,Xr.validateObject)(g,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(de({},g))}(e),{P:n}=t,r=g=>(0,u_.mod)(g,n),o=t.montgomeryBits,i=Math.ceil(o/8),s=t.nByteLength,a=t.adjustScalarBytes||(g=>g),c=t.powPminus2||(g=>(0,u_.pow)(g,n-BigInt(2),n));function l(g,w,m){let D=r(g*(w-m));return[w=r(w-D),m=r(m+D)]}let u=(t.a-BigInt(2))/BigInt(4);function d(g){return(0,Xr.numberToBytesLE)(r(g),i)}function f(g,w){let m=function(O){let N=(0,Xr.ensureBytes)("u coordinate",O,i);return s===32&&(N[31]&=127),(0,Xr.bytesToNumberLE)(N)}(w),D=function(O){let N=(0,Xr.ensureBytes)("scalar",O),z=N.length;if(z!==i&&z!==s)throw new Error(`Expected ${i} or ${s} bytes, got ${z}`);return(0,Xr.bytesToNumberLE)(a(N))}(g),b=function(O,N){(0,Xr.aInRange)("u",O,Qi,n),(0,Xr.aInRange)("scalar",N,Qi,n);let z=N,q=O,U,W=rg,$=Qi,R=O,A=rg,M=Qi;for(let B=BigInt(o-1);B>=Qi;B--){let V=z>>B&rg;M^=V,U=l(M,W,R),W=U[0],R=U[1],U=l(M,$,A),$=U[0],A=U[1],M=V;let E=W+$,y=r(E*E),v=W-$,S=r(v*v),x=y-S,C=R+A,_=r((R-A)*E),T=r(C*v),I=_+T,P=_-T;R=r(I*I),A=r(q*r(P*P)),W=r(y*S),$=r(x*(y+r(u*x)))}U=l(M,W,R),W=U[0],R=U[1],U=l(M,$,A),$=U[0],A=U[1];let k=c($);return r(W*k)}(m,D);if(b===Qi)throw new Error("Invalid private or public key received");return d(b)}let h=d(t.Gu);function p(g){return f(g,h)}return{scalarMult:f,scalarMultBase:p,getSharedSecret:(g,w)=>f(g,w),getPublicKey:g=>p(g),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:h}};var u_=Be,Xr=_e,Qi=BigInt(0),rg=BigInt(1);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.RistrettoPoint=e.encodeToCurve=e.hashToCurve=e.edwardsToMontgomery=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=e.ED25519_TORSION_SUBGROUP=void 0,e.edwardsToMontgomeryPub=z,e.edwardsToMontgomeryPriv=function(T){let I=O.hash(T.subarray(0,32));return O.adjustScalarBytes(I).subarray(0,32)};let t=lt,n=Mr,r=Ng,o=so,i=Be,s=Lg,a=_e,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),f=BigInt(2),h=BigInt(3),p=BigInt(5),g=BigInt(8);function w(T){let I=BigInt(10),P=BigInt(20),H=BigInt(40),F=BigInt(80),j=c,L=T*T%j*T%j,K=(0,i.pow2)(L,f,j)*L%j,G=(0,i.pow2)(K,d,j)*T%j,ee=(0,i.pow2)(G,p,j)*G%j,Q=(0,i.pow2)(ee,I,j)*ee%j,se=(0,i.pow2)(Q,P,j)*Q%j,re=(0,i.pow2)(se,H,j)*se%j,ne=(0,i.pow2)(re,F,j)*re%j,ae=(0,i.pow2)(ne,F,j)*re%j,ce=(0,i.pow2)(ae,I,j)*ee%j;return{pow_p_5_8:(0,i.pow2)(ce,f,j)*T%j,b2:L}}function m(T){return T[0]&=248,T[31]&=127,T[31]|=64,T}function D(T,I){let P=c,H=(0,i.mod)(I*I*I,P),F=w(T*(0,i.mod)(H*H*I,P)).pow_p_5_8,j=(0,i.mod)(T*H*F,P),L=(0,i.mod)(I*j*j,P),K=j,G=(0,i.mod)(j*l,P),ee=L===T,Q=L===(0,i.mod)(-T,P),se=L===(0,i.mod)(-T*l,P);return ee&&(j=K),(Q||se)&&(j=G),(0,i.isNegativeLE)(j,P)&&(j=(0,i.mod)(-j,P)),{isValid:ee||Q,value:j}}e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];let b=(0,i.Field)(c,void 0,!0),O={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:b,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:t.sha512,randomBytes:n.randomBytes,adjustScalarBytes:m,uvRatio:D};function N(T,I,P){if(I.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([P?1:0,I.length]),I,T)}function z(T){let{y:I}=e.ed25519.ExtendedPoint.fromHex(T),P=BigInt(1);return b.toBytes(b.create((P+I)*b.inv(P-I)))}e.ed25519=(0,r.twistedEdwards)(O),e.ed25519ctx=(0,r.twistedEdwards)(Se(de({},O),{domain:N})),e.ed25519ph=(0,r.twistedEdwards)(Object.assign({},O,{domain:N,prehash:t.sha512})),e.x25519=(0,s.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:T=>{let I=c,{pow_p_5_8:P,b2:H}=w(T);return(0,i.mod)((0,i.pow2)(P,h,I)*H,I)},adjustScalarBytes:m,randomBytes:n.randomBytes}),e.edwardsToMontgomery=z;let q=(b.ORDER+h)/g,U=b.pow(f,q),W=b.sqrt(b.neg(b.ONE)),$=(0,i.FpSqrtEven)(b,b.neg(BigInt(486664)));function R(T){let{xMn:I,xMd:P,yMn:H,yMd:F}=function(re){let ne=(b.ORDER-p)/g,ae=BigInt(486662),ce=b.sqr(re);ce=b.mul(ce,f);let pe=b.add(ce,b.ONE),he=b.neg(ae),fe=b.sqr(pe),we=b.mul(fe,pe),Ce=b.mul(ce,ae);Ce=b.mul(Ce,he),Ce=b.add(Ce,fe),Ce=b.mul(Ce,he);let Qe=b.sqr(we);fe=b.sqr(Qe),Qe=b.mul(Qe,we),Qe=b.mul(Qe,Ce),fe=b.mul(fe,Qe);let mt=b.pow(fe,ne);mt=b.mul(mt,Qe);let ai=b.mul(mt,W);fe=b.sqr(mt),fe=b.mul(fe,we);let On=b.eql(fe,Ce),Is=b.cmov(ai,mt,On),ci=b.mul(he,ce),Rr=b.mul(mt,re);Rr=b.mul(Rr,U);let cc=b.mul(Rr,W),bo=b.mul(Ce,ce);fe=b.sqr(Rr),fe=b.mul(fe,we);let jt=b.eql(fe,bo),Xt=b.cmov(cc,Rr,jt);fe=b.sqr(Is),fe=b.mul(fe,we);let Jd=b.eql(fe,Ce),gI=b.cmov(ci,he,Jd),Ts=b.cmov(Xt,Is,Jd),mI=b.isOdd(Ts);return Ts=b.cmov(Ts,b.neg(Ts),Jd!==mI),{xMn:gI,xMd:pe,yMn:Ts,yMd:d}}(T),j=b.mul(I,F);j=b.mul(j,$);let L=b.mul(P,H),K=b.sub(I,P),G=b.add(I,P),ee=b.mul(L,G),Q=b.eql(ee,b.ZERO);j=b.cmov(j,b.ZERO,Q),L=b.cmov(L,b.ONE,Q),K=b.cmov(K,b.ONE,Q),G=b.cmov(G,b.ONE,Q);let se=b.invertBatch([L,G]);return{x:b.mul(j,se[0]),y:b.mul(K,se[1])}}let A=(0,o.createHasher)(e.ed25519.ExtendedPoint,T=>R(T[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:b.ORDER,m:1,k:128,expand:"xmd",hash:t.sha512});function M(T){if(!(T instanceof _))throw new Error("RistrettoPoint expected")}e.hashToCurve=A.hashToCurve,e.encodeToCurve=A.encodeToCurve;let k=l,B=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),V=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),E=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),y=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),v=T=>D(d,T),S=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),x=T=>e.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(T)&S);function C(T){let{d:I}=e.ed25519.CURVE,P=e.ed25519.CURVE.Fp.ORDER,H=e.ed25519.CURVE.Fp.create,F=H(k*T*T),j=H((F+d)*E),L=BigInt(-1),K=H((L-I*F)*H(F+I)),{isValid:G,value:ee}=D(j,K),Q=H(ee*T);(0,i.isNegativeLE)(Q,P)||(Q=H(-Q)),G||(ee=Q),G||(L=F);let se=H(L*(F-d)*y-K),re=ee*ee,ne=H((ee+ee)*K),ae=H(se*B),ce=H(d-re),pe=H(d+re);return new e.ed25519.ExtendedPoint(H(ne*pe),H(ce*ae),H(ae*pe),H(ne*ce))}class _{constructor(I){this.ep=I}static fromAffine(I){return new _(e.ed25519.ExtendedPoint.fromAffine(I))}static hashToCurve(I){I=(0,a.ensureBytes)("ristrettoHash",I,64);let P=C(x(I.slice(0,32))),H=C(x(I.slice(32,64)));return new _(P.add(H))}static fromHex(I){I=(0,a.ensureBytes)("ristrettoHex",I,32);let{a:P,d:H}=e.ed25519.CURVE,F=e.ed25519.CURVE.Fp.ORDER,j=e.ed25519.CURVE.Fp.create,L="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",K=x(I);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(K,32),I)||(0,i.isNegativeLE)(K,F))throw new Error(L);let G=j(K*K),ee=j(d+P*G),Q=j(d-P*G),se=j(ee*ee),re=j(Q*Q),ne=j(P*H*se-re),{isValid:ae,value:ce}=v(j(ne*re)),pe=j(ce*Q),he=j(ce*pe*ne),fe=j((K+K)*pe);(0,i.isNegativeLE)(fe,F)&&(fe=j(-fe));let we=j(ee*he),Ce=j(fe*we);if(!ae||(0,i.isNegativeLE)(Ce,F)||we===u)throw new Error(L);return new _(new e.ed25519.ExtendedPoint(fe,we,d,Ce))}toRawBytes(){let{ex:I,ey:P,ez:H,et:F}=this.ep,j=e.ed25519.CURVE.Fp.ORDER,L=e.ed25519.CURVE.Fp.create,K=L(L(H+P)*L(H-P)),G=L(I*P),ee=L(G*G),{value:Q}=v(L(K*ee)),se=L(Q*K),re=L(Q*G),ne=L(se*re*F),ae;if((0,i.isNegativeLE)(F*ne,j)){let pe=L(P*k),he=L(I*k);I=pe,P=he,ae=L(se*V)}else ae=re;(0,i.isNegativeLE)(I*ne,j)&&(P=L(-P));let ce=L((H-P)*ae);return(0,i.isNegativeLE)(ce,j)&&(ce=L(-ce)),(0,a.numberToBytesLE)(ce,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(I){M(I);let{ex:P,ey:H}=this.ep,{ex:F,ey:j}=I.ep,L=e.ed25519.CURVE.Fp.create,K=L(P*j)===L(H*F),G=L(H*j)===L(P*F);return K||G}add(I){return M(I),new _(this.ep.add(I.ep))}subtract(I){return M(I),new _(this.ep.subtract(I.ep))}multiply(I){return new _(this.ep.multiply(I))}multiplyUnsafe(I){return new _(this.ep.multiplyUnsafe(I))}double(){return new _(this.ep.double())}negate(){return new _(this.ep.negate())}}e.RistrettoPoint=(_.BASE||(_.BASE=new _(e.ed25519.ExtendedPoint.BASE)),_.ZERO||(_.ZERO=new _(e.ed25519.ExtendedPoint.ZERO)),_),e.hashToRistretto255=(T,I)=>{let P=I.DST,H=typeof P=="string"?(0,n.utf8ToBytes)(P):P,F=(0,o.expand_message_xmd)(T,H,64,t.sha512);return _.hashToCurve(F)},e.hash_to_ristretto255=e.hashToRistretto255})(w1);var Y1={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.sha224=Dr.sha256=Dr.SHA256=void 0;var og=Cr,hn=Mr,PO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),eo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),to=new Uint32Array(64),ja=class extends og.HashMD{constructor(){super(64,32,8,!1),this.A=0|eo[0],this.B=0|eo[1],this.C=0|eo[2],this.D=0|eo[3],this.E=0|eo[4],this.F=0|eo[5],this.G=0|eo[6],this.H=0|eo[7]}get(){let{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=0|t,this.B=0|n,this.C=0|r,this.D=0|o,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|c}process(t,n){for(let d=0;d<16;d++,n+=4)to[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){let f=to[d-15],h=to[d-2],p=(0,hn.rotr)(f,7)^(0,hn.rotr)(f,18)^f>>>3,g=(0,hn.rotr)(h,17)^(0,hn.rotr)(h,19)^h>>>10;to[d]=g+to[d-7]+p+to[d-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){let f=u+((0,hn.rotr)(a,6)^(0,hn.rotr)(a,11)^(0,hn.rotr)(a,25))+(0,og.Chi)(a,c,l)+PO[d]+to[d]|0,h=((0,hn.rotr)(r,2)^(0,hn.rotr)(r,13)^(0,hn.rotr)(r,22))+(0,og.Maj)(r,o,i)|0;u=l,l=c,c=a,a=s+f|0,s=i,i=o,o=r,r=f+h|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,o,i,s,a,c,l,u)}roundClean(){to.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Dr.SHA256=ja;var Fg=class extends ja{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Dr.sha256=(0,hn.wrapConstructor)(()=>new ja),Dr.sha224=(0,hn.wrapConstructor)(()=>new Fg);var ju={},Mm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;let t=Zt,n=Mr;class r extends n.Hash{constructor(i,s){super(),this.finished=!1,this.destroyed=!1,(0,t.hash)(i);let a=(0,n.toBytes)(s);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?i.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=i.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(i){return(0,t.exists)(this),this.iHash.update(i),this}digestInto(i){(0,t.exists)(this),(0,t.bytes)(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){let i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));let{oHash:s,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:d}=this;return i.finished=c,i.destroyed=l,i.blockLen=u,i.outputLen=d,i.oHash=s._cloneInto(i.oHash),i.iHash=a._cloneInto(i.iHash),i}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=r,e.hmac=(o,i,s)=>new r(o,i).update(s).digest(),e.hmac.create=(o,i)=>new r(o,i)})(Mm);var xm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=h,e.weierstrass=function(g){let w=function(T){let I=(0,t.validateBasic)(T);return r.validateObject(I,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(de({lowS:!0},I))}(g),{Fp:m,n:D}=w,b=m.BYTES+1,O=2*m.BYTES+1;function N(T){return n.mod(T,D)}function z(T){return n.invert(T,D)}let{ProjectivePoint:q,normPrivateKeyToScalar:U,weierstrassEquation:W,isWithinCurveOrder:$}=h(Se(de({},w),{toBytes(T,I,P){let H=I.toAffine(),F=m.toBytes(H.x),j=r.concatBytes;return(0,o.abool)("isCompressed",P),P?j(Uint8Array.from([I.hasEvenY()?2:3]),F):j(Uint8Array.from([4]),F,m.toBytes(H.y))},fromBytes(T){let I=T.length,P=T[0],H=T.subarray(1);if(I!==b||P!==2&&P!==3){if(I===O&&P===4)return{x:m.fromBytes(H.subarray(0,m.BYTES)),y:m.fromBytes(H.subarray(m.BYTES,2*m.BYTES))};throw new Error(`Point of length ${I} was invalid. Expected ${b} compressed bytes or ${O} uncompressed bytes`)}{let F=r.bytesToNumberBE(H);if(!r.inRange(F,l,m.ORDER))throw new Error("Point is not on curve");let j=W(F),L;try{L=m.sqrt(j)}catch(K){let G=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+G)}return(1&P)==1!=((L&l)===l)&&(L=m.neg(L)),{x:F,y:L}}}})),R=T=>r.bytesToHex(r.numberToBytesBE(T,w.nByteLength));function A(T){return T>D>>l}let M=(T,I,P)=>r.bytesToNumberBE(T.slice(I,P));class k{constructor(I,P,H){this.r=I,this.s=P,this.recovery=H,this.assertValidity()}static fromCompact(I){let P=w.nByteLength;return I=(0,o.ensureBytes)("compactSignature",I,2*P),new k(M(I,0,P),M(I,P,2*P))}static fromDER(I){let{r:P,s:H}=e.DER.toSig((0,o.ensureBytes)("DER",I));return new k(P,H)}assertValidity(){r.aInRange("r",this.r,l,D),r.aInRange("s",this.s,l,D)}addRecoveryBit(I){return new k(this.r,this.s,I)}recoverPublicKey(I){let{r:P,s:H,recovery:F}=this,j=y((0,o.ensureBytes)("msgHash",I));if(F==null||![0,1,2,3].includes(F))throw new Error("recovery id invalid");let L=F===2||F===3?P+w.n:P;if(L>=m.ORDER)throw new Error("recovery id 2 or 3 invalid");let K=1&F?"03":"02",G=q.fromHex(K+R(L)),ee=z(L),Q=N(-j*ee),se=N(H*ee),re=q.BASE.multiplyAndAddUnsafe(G,Q,se);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,N(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return R(this.r)+R(this.s)}}let B={isValidPrivateKey(T){try{return U(T),!0}catch{return!1}},normPrivateKeyToScalar:U,randomPrivateKey:()=>{let T=n.getMinHashLength(w.n);return n.mapHashToField(w.randomBytes(T),w.n)},precompute:(T=8,I=q.BASE)=>(I._setWindowSize(T),I.multiply(BigInt(3)),I)};function V(T){let I=r.isBytes(T),P=typeof T=="string",H=(I||P)&&T.length;return I?H===b||H===O:P?H===2*b||H===2*O:T instanceof q}let E=w.bits2int||function(T){let I=r.bytesToNumberBE(T),P=8*T.length-w.nBitLength;return P>0?I>>BigInt(P):I},y=w.bits2int_modN||function(T){return N(E(T))},v=r.bitMask(w.nBitLength);function S(T){return r.aInRange(`num < 2^${w.nBitLength}`,T,c,v),r.numberToBytesBE(T,w.nByteLength)}function x(T,I,P=C){if(["recovered","canonical"].some(ne=>ne in P))throw new Error("sign() legacy options not supported");let{hash:H,randomBytes:F}=w,{lowS:j,prehash:L,extraEntropy:K}=P;j==null&&(j=!0),T=(0,o.ensureBytes)("msgHash",T),i(P),L&&(T=(0,o.ensureBytes)("prehashed msgHash",H(T)));let G=y(T),ee=U(I),Q=[S(ee),S(G)];if(K!=null&&K!==!1){let ne=K===!0?F(m.BYTES):K;Q.push((0,o.ensureBytes)("extraEntropy",ne))}let se=r.concatBytes(...Q),re=G;return{seed:se,k2sig:function(ne){let ae=E(ne);if(!$(ae))return;let ce=z(ae),pe=q.BASE.multiply(ae).toAffine(),he=N(pe.x);if(he===c)return;let fe=N(ce*N(re+he*ee));if(fe===c)return;let we=(pe.x===he?0:2)|Number(pe.y&l),Ce=fe;return j&&A(fe)&&(Ce=function(Qe){return A(Qe)?N(-Qe):Qe}(fe),we^=1),new k(he,Ce,we)}}}let C={lowS:w.lowS,prehash:!1},_={lowS:w.lowS,prehash:!1};return q.BASE._setWindowSize(8),{CURVE:w,getPublicKey:function(T,I=!0){return q.fromPrivateKey(T).toRawBytes(I)},getSharedSecret:function(T,I,P=!0){if(V(T))throw new Error("first arg must be private key");if(!V(I))throw new Error("second arg must be public key");return q.fromHex(I).multiply(U(T)).toRawBytes(P)},sign:function(T,I,P=C){let{seed:H,k2sig:F}=x(T,I,P),j=w;return r.createHmacDrbg(j.hash.outputLen,j.nByteLength,j.hmac)(H,F)},verify:function(T,I,P,H=_){let F=T;if(I=(0,o.ensureBytes)("msgHash",I),P=(0,o.ensureBytes)("publicKey",P),"strict"in H)throw new Error("options.strict was renamed to lowS");i(H);let{lowS:j,prehash:L}=H,K,G;try{if(typeof F=="string"||r.isBytes(F))try{K=k.fromDER(F)}catch(he){if(!(he instanceof e.DER.Err))throw he;K=k.fromCompact(F)}else{if(typeof F!="object"||typeof F.r!="bigint"||typeof F.s!="bigint")throw new Error("PARSE");{let{r:he,s:fe}=F;K=new k(he,fe)}}G=q.fromHex(P)}catch(he){if(he.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&K.hasHighS())return!1;L&&(I=w.hash(I));let{r:ee,s:Q}=K,se=y(I),re=z(Q),ne=N(se*re),ae=N(ee*re),ce=q.BASE.multiplyAndAddUnsafe(G,ne,ae)?.toAffine();return ce?N(ce.x)===ee:!1},ProjectivePoint:q,Signature:k,utils:B}},e.SWUFpSqrtRatio=p,e.mapToCurveSimpleSWU=function(g,w){if(n.validateField(g),!g.isValid(w.A)||!g.isValid(w.B)||!g.isValid(w.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let m=p(g,w.Z);if(!g.isOdd)throw new Error("Fp.isOdd is not implemented!");return D=>{let b,O,N,z,q,U,W,$;b=g.sqr(D),b=g.mul(b,w.Z),O=g.sqr(b),O=g.add(O,b),N=g.add(O,g.ONE),N=g.mul(N,w.B),z=g.cmov(w.Z,g.neg(O),!g.eql(O,g.ZERO)),z=g.mul(z,w.A),O=g.sqr(N),U=g.sqr(z),q=g.mul(U,w.A),O=g.add(O,q),O=g.mul(O,N),U=g.mul(U,z),q=g.mul(U,w.B),O=g.add(O,q),W=g.mul(b,N);let{isValid:R,value:A}=m(O,U);$=g.mul(b,D),$=g.mul($,A),W=g.cmov(W,N,R),$=g.cmov($,A,R);let M=g.isOdd(D)===g.isOdd($);return $=g.cmov(g.neg($),$,M),W=g.div(W,z),{x:W,y:$}}};let t=os,n=Be,r=_e,o=_e;function i(g){g.lowS!==void 0&&(0,o.abool)("lowS",g.lowS),g.prehash!==void 0&&(0,o.abool)("prehash",g.prehash)}let{bytesToNumberBE:s,hexToBytes:a}=r;e.DER={Err:class extends Error{constructor(g=""){super(g)}},_tlv:{encode:(g,w)=>{let{Err:m}=e.DER;if(g<0||g>256)throw new m("tlv.encode: wrong tag");if(1&w.length)throw new m("tlv.encode: unpadded data");let D=w.length/2,b=r.numberToHexUnpadded(D);if(b.length/2&128)throw new m("tlv.encode: long form length too big");let O=D>127?r.numberToHexUnpadded(b.length/2|128):"";return`${r.numberToHexUnpadded(g)}${O}${b}${w}`},decode(g,w){let{Err:m}=e.DER,D=0;if(g<0||g>256)throw new m("tlv.encode: wrong tag");if(w.length<2||w[D++]!==g)throw new m("tlv.decode: wrong tlv");let b=w[D++],O=0;if(128&b){let z=127&b;if(!z)throw new m("tlv.decode(long): indefinite length not supported");if(z>4)throw new m("tlv.decode(long): byte length is too big");let q=w.subarray(D,D+z);if(q.length!==z)throw new m("tlv.decode: length bytes not complete");if(q[0]===0)throw new m("tlv.decode(long): zero leftmost byte");for(let U of q)O=O<<8|U;if(D+=z,O<128)throw new m("tlv.decode(long): not minimal encoding")}else O=b;let N=w.subarray(D,D+O);if(N.length!==O)throw new m("tlv.decode: wrong value length");return{v:N,l:w.subarray(D+O)}}},_int:{encode(g){let{Err:w}=e.DER;if(g<c)throw new w("integer: negative integers are not allowed");let m=r.numberToHexUnpadded(g);if(8&Number.parseInt(m[0],16)&&(m="00"+m),1&m.length)throw new w("unexpected assertion");return m},decode(g){let{Err:w}=e.DER;if(128&g[0])throw new w("Invalid signature integer: negative");if(g[0]===0&&!(128&g[1]))throw new w("Invalid signature integer: unnecessary leading zero");return s(g)}},toSig(g){let{Err:w,_int:m,_tlv:D}=e.DER,b=typeof g=="string"?a(g):g;r.abytes(b);let{v:O,l:N}=D.decode(48,b);if(N.length)throw new w("Invalid signature: left bytes after parsing");let{v:z,l:q}=D.decode(2,O),{v:U,l:W}=D.decode(2,q);if(W.length)throw new w("Invalid signature: left bytes after parsing");return{r:m.decode(z),s:m.decode(U)}},hexFromSig(g){let{_tlv:w,_int:m}=e.DER,D=`${w.encode(2,m.encode(g.r))}${w.encode(2,m.encode(g.s))}`;return w.encode(48,D)}};let c=BigInt(0),l=BigInt(1),u=BigInt(2),d=BigInt(3),f=BigInt(4);function h(g){let w=function(M){let k=(0,t.validateBasic)(M);r.validateObject(k,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:B,Fp:V,a:E}=k;if(B){if(!V.eql(E,V.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof B!="object"||typeof B.beta!="bigint"||typeof B.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(de({},k))}(g),{Fp:m}=w,D=n.Field(w.n,w.nBitLength),b=w.toBytes||((M,k,B)=>{let V=k.toAffine();return r.concatBytes(Uint8Array.from([4]),m.toBytes(V.x),m.toBytes(V.y))}),O=w.fromBytes||(M=>{let k=M.subarray(1);return{x:m.fromBytes(k.subarray(0,m.BYTES)),y:m.fromBytes(k.subarray(m.BYTES,2*m.BYTES))}});function N(M){let{a:k,b:B}=w,V=m.sqr(M),E=m.mul(V,M);return m.add(m.add(E,m.mul(M,k)),B)}if(!m.eql(m.sqr(w.Gy),N(w.Gx)))throw new Error("bad generator point: equation left != right");function z(M){let{allowedPrivateKeyLengths:k,nByteLength:B,wrapPrivateKey:V,n:E}=w;if(k&&typeof M!="bigint"){if(r.isBytes(M)&&(M=r.bytesToHex(M)),typeof M!="string"||!k.includes(M.length))throw new Error("Invalid key");M=M.padStart(2*B,"0")}let y;try{y=typeof M=="bigint"?M:r.bytesToNumberBE((0,o.ensureBytes)("private key",M,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof M}`)}return V&&(y=n.mod(y,E)),r.aInRange("private key",y,l,E),y}function q(M){if(!(M instanceof $))throw new Error("ProjectivePoint expected")}let U=(0,o.memoized)((M,k)=>{let{px:B,py:V,pz:E}=M;if(m.eql(E,m.ONE))return{x:B,y:V};let y=M.is0();k==null&&(k=y?m.ONE:m.inv(E));let v=m.mul(B,k),S=m.mul(V,k),x=m.mul(E,k);if(y)return{x:m.ZERO,y:m.ZERO};if(!m.eql(x,m.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}),W=(0,o.memoized)(M=>{if(M.is0()){if(w.allowInfinityPoint&&!m.is0(M.py))return;throw new Error("bad point: ZERO")}let{x:k,y:B}=M.toAffine();if(!m.isValid(k)||!m.isValid(B))throw new Error("bad point: x or y not FE");let V=m.sqr(B),E=N(k);if(!m.eql(V,E))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class ${constructor(k,B,V){if(this.px=k,this.py=B,this.pz=V,k==null||!m.isValid(k))throw new Error("x required");if(B==null||!m.isValid(B))throw new Error("y required");if(V==null||!m.isValid(V))throw new Error("z required");Object.freeze(this)}static fromAffine(k){let{x:B,y:V}=k||{};if(!k||!m.isValid(B)||!m.isValid(V))throw new Error("invalid affine point");if(k instanceof $)throw new Error("projective point not allowed");let E=y=>m.eql(y,m.ZERO);return E(B)&&E(V)?$.ZERO:new $(B,V,m.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){let B=m.invertBatch(k.map(V=>V.pz));return k.map((V,E)=>V.toAffine(B[E])).map($.fromAffine)}static fromHex(k){let B=$.fromAffine(O((0,o.ensureBytes)("pointHex",k)));return B.assertValidity(),B}static fromPrivateKey(k){return $.BASE.multiply(z(k))}static msm(k,B){return(0,t.pippenger)($,D,k,B)}_setWindowSize(k){A.setWindowSize(this,k)}assertValidity(){W(this)}hasEvenY(){let{y:k}=this.toAffine();if(m.isOdd)return!m.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){q(k);let{px:B,py:V,pz:E}=this,{px:y,py:v,pz:S}=k,x=m.eql(m.mul(B,S),m.mul(y,E)),C=m.eql(m.mul(V,S),m.mul(v,E));return x&&C}negate(){return new $(this.px,m.neg(this.py),this.pz)}double(){let{a:k,b:B}=w,V=m.mul(B,d),{px:E,py:y,pz:v}=this,S=m.ZERO,x=m.ZERO,C=m.ZERO,_=m.mul(E,E),T=m.mul(y,y),I=m.mul(v,v),P=m.mul(E,y);return P=m.add(P,P),C=m.mul(E,v),C=m.add(C,C),S=m.mul(k,C),x=m.mul(V,I),x=m.add(S,x),S=m.sub(T,x),x=m.add(T,x),x=m.mul(S,x),S=m.mul(P,S),C=m.mul(V,C),I=m.mul(k,I),P=m.sub(_,I),P=m.mul(k,P),P=m.add(P,C),C=m.add(_,_),_=m.add(C,_),_=m.add(_,I),_=m.mul(_,P),x=m.add(x,_),I=m.mul(y,v),I=m.add(I,I),_=m.mul(I,P),S=m.sub(S,_),C=m.mul(I,T),C=m.add(C,C),C=m.add(C,C),new $(S,x,C)}add(k){q(k);let{px:B,py:V,pz:E}=this,{px:y,py:v,pz:S}=k,x=m.ZERO,C=m.ZERO,_=m.ZERO,T=w.a,I=m.mul(w.b,d),P=m.mul(B,y),H=m.mul(V,v),F=m.mul(E,S),j=m.add(B,V),L=m.add(y,v);j=m.mul(j,L),L=m.add(P,H),j=m.sub(j,L),L=m.add(B,E);let K=m.add(y,S);return L=m.mul(L,K),K=m.add(P,F),L=m.sub(L,K),K=m.add(V,E),x=m.add(v,S),K=m.mul(K,x),x=m.add(H,F),K=m.sub(K,x),_=m.mul(T,L),x=m.mul(I,F),_=m.add(x,_),x=m.sub(H,_),_=m.add(H,_),C=m.mul(x,_),H=m.add(P,P),H=m.add(H,P),F=m.mul(T,F),L=m.mul(I,L),H=m.add(H,F),F=m.sub(P,F),F=m.mul(T,F),L=m.add(L,F),P=m.mul(H,L),C=m.add(C,P),P=m.mul(K,L),x=m.mul(j,x),x=m.sub(x,P),P=m.mul(j,H),_=m.mul(K,_),_=m.add(_,P),new $(x,C,_)}subtract(k){return this.add(k.negate())}is0(){return this.equals($.ZERO)}wNAF(k){return A.wNAFCached(this,k,$.normalizeZ)}multiplyUnsafe(k){r.aInRange("scalar",k,c,w.n);let B=$.ZERO;if(k===c)return B;if(k===l)return this;let{endo:V}=w;if(!V)return A.unsafeLadder(this,k);let{k1neg:E,k1:y,k2neg:v,k2:S}=V.splitScalar(k),x=B,C=B,_=this;for(;y>c||S>c;)y&l&&(x=x.add(_)),S&l&&(C=C.add(_)),_=_.double(),y>>=l,S>>=l;return E&&(x=x.negate()),v&&(C=C.negate()),C=new $(m.mul(C.px,V.beta),C.py,C.pz),x.add(C)}multiply(k){let{endo:B,n:V}=w,E,y;if(r.aInRange("scalar",k,l,V),B){let{k1neg:v,k1:S,k2neg:x,k2:C}=B.splitScalar(k),{p:_,f:T}=this.wNAF(S),{p:I,f:P}=this.wNAF(C);_=A.constTimeNegate(v,_),I=A.constTimeNegate(x,I),I=new $(m.mul(I.px,B.beta),I.py,I.pz),E=_.add(I),y=T.add(P)}else{let{p:v,f:S}=this.wNAF(k);E=v,y=S}return $.normalizeZ([E,y])[0]}multiplyAndAddUnsafe(k,B,V){let E=$.BASE,y=(S,x)=>x!==c&&x!==l&&S.equals(E)?S.multiply(x):S.multiplyUnsafe(x),v=y(this,B).add(y(k,V));return v.is0()?void 0:v}toAffine(k){return U(this,k)}isTorsionFree(){let{h:k,isTorsionFree:B}=w;if(k===l)return!0;if(B)return B($,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:k,clearCofactor:B}=w;return k===l?this:B?B($,this):this.multiplyUnsafe(w.h)}toRawBytes(k=!0){return(0,o.abool)("isCompressed",k),this.assertValidity(),b($,this,k)}toHex(k=!0){return(0,o.abool)("isCompressed",k),r.bytesToHex(this.toRawBytes(k))}}$.BASE=new $(w.Gx,w.Gy,m.ONE),$.ZERO=new $(m.ZERO,m.ONE,m.ZERO);let R=w.nBitLength,A=(0,t.wNAF)($,w.endo?Math.ceil(R/2):R);return{CURVE:w,ProjectivePoint:$,normPrivateKeyToScalar:z,weierstrassEquation:N,isWithinCurveOrder:function(M){return r.inRange(M,l,w.n)}}}function p(g,w){let m=g.ORDER,D=c;for(let M=m-l;M%u===c;M/=u)D+=l;let b=D,O=u<<b-l-l,N=O*u,z=(m-l)/N,q=(z-l)/u,U=N-l,W=O,$=g.pow(w,z),R=g.pow(w,(z+l)/u),A=(M,k)=>{let B=$,V=g.pow(k,U),E=g.sqr(V);E=g.mul(E,k);let y=g.mul(M,E);y=g.pow(y,q),y=g.mul(y,V),V=g.mul(y,k),E=g.mul(y,M);let v=g.mul(E,V);y=g.pow(v,W);let S=g.eql(y,g.ONE);V=g.mul(E,R),y=g.mul(v,B),E=g.cmov(V,E,S),v=g.cmov(y,v,S);for(let x=b;x>l;x--){let C=x-u;C=u<<C-l;let _=g.pow(v,C),T=g.eql(_,g.ONE);V=g.mul(E,B),B=g.mul(B,B),_=g.mul(v,B),E=g.cmov(V,E,T),v=g.cmov(_,v,T)}return{isValid:S,value:E}};if(g.ORDER%f===d){let M=(g.ORDER-d)/f,k=g.sqrt(g.neg(w));A=(B,V)=>{let E=g.sqr(V),y=g.mul(B,V);E=g.mul(E,y);let v=g.pow(E,M);v=g.mul(v,y);let S=g.mul(v,k),x=g.mul(g.sqr(v),V),C=g.eql(x,B);return{isValid:C,value:g.cmov(S,v,C)}}}return A}})(xm),Object.defineProperty(ju,"__esModule",{value:!0}),ju.getHash=f_,ju.createCurve=function(e,t){let n=r=>(0,FO.weierstrass)(de(de({},e),f_(r)));return Object.freeze(Se(de({},n(t)),{create:n}))};var LO=Mm,d_=Mr,FO=xm;function f_(e){return{hash:e,hmac:(t,...n)=>(0,LO.hmac)(e,t,(0,d_.concatBytes)(...n)),randomBytes:d_.randomBytes}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;let t=Dr,n=Mr,r=ju,o=so,i=Be,s=_e,a=xm,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),f=(y,v)=>(y+v/d)/v;function h(y){let v=c,S=BigInt(3),x=BigInt(6),C=BigInt(11),_=BigInt(22),T=BigInt(23),I=BigInt(44),P=BigInt(88),H=y*y*y%v,F=H*H*y%v,j=(0,i.pow2)(F,S,v)*F%v,L=(0,i.pow2)(j,S,v)*F%v,K=(0,i.pow2)(L,d,v)*H%v,G=(0,i.pow2)(K,C,v)*K%v,ee=(0,i.pow2)(G,_,v)*G%v,Q=(0,i.pow2)(ee,I,v)*ee%v,se=(0,i.pow2)(Q,P,v)*Q%v,re=(0,i.pow2)(se,I,v)*ee%v,ne=(0,i.pow2)(re,S,v)*F%v,ae=(0,i.pow2)(ne,T,v)*G%v,ce=(0,i.pow2)(ae,x,v)*H%v,pe=(0,i.pow2)(ce,d,v);if(!p.eql(p.sqr(pe),y))throw new Error("Cannot find square root");return pe}let p=(0,i.Field)(c,void 0,void 0,{sqrt:h});e.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:y=>{let v=l,S=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),x=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),C=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),_=S,T=BigInt("0x100000000000000000000000000000000"),I=f(_*y,v),P=f(-x*y,v),H=(0,i.mod)(y-I*S-P*C,v),F=(0,i.mod)(-I*x-P*_,v),j=H>T,L=F>T;if(j&&(H=v-H),L&&(F=v-F),H>T||F>T)throw new Error("splitScalar: Endomorphism failed, k="+y);return{k1neg:j,k1:H,k2neg:L,k2:F}}}},t.sha256);let g=BigInt(0),w={};function m(y,...v){let S=w[y];if(S===void 0){let x=(0,t.sha256)(Uint8Array.from(y,C=>C.charCodeAt(0)));S=(0,s.concatBytes)(x,x),w[y]=S}return(0,t.sha256)((0,s.concatBytes)(S,...v))}let D=y=>y.toRawBytes(!0).slice(1),b=y=>(0,s.numberToBytesBE)(y,32),O=y=>(0,i.mod)(y,c),N=y=>(0,i.mod)(y,l),z=e.secp256k1.ProjectivePoint,q=(y,v,S)=>z.BASE.multiplyAndAddUnsafe(y,v,S);function U(y){let v=e.secp256k1.utils.normPrivateKeyToScalar(y),S=z.fromPrivateKey(v);return{scalar:S.hasEvenY()?v:N(-v),bytes:D(S)}}function W(y){(0,s.aInRange)("x",y,u,c);let v=O(y*y),S=h(O(v*y+BigInt(7)));S%d!==g&&(S=O(-S));let x=new z(y,S,u);return x.assertValidity(),x}let $=s.bytesToNumberBE;function R(...y){return N($(m("BIP0340/challenge",...y)))}function A(y){return U(y).bytes}function M(y,v,S=(0,n.randomBytes)(32)){let x=(0,s.ensureBytes)("message",y),{bytes:C,scalar:_}=U(v),T=(0,s.ensureBytes)("auxRand",S,32),I=b(_^$(m("BIP0340/aux",T))),P=m("BIP0340/nonce",I,C,x),H=N($(P));if(H===g)throw new Error("sign failed: k is zero");let{bytes:F,scalar:j}=U(H),L=R(F,C,x),K=new Uint8Array(64);if(K.set(F,0),K.set(b(N(j+L*_)),32),!k(K,x,C))throw new Error("sign: Invalid signature produced");return K}function k(y,v,S){let x=(0,s.ensureBytes)("signature",y,64),C=(0,s.ensureBytes)("message",v),_=(0,s.ensureBytes)("publicKey",S,32);try{let T=W($(_)),I=$(x.subarray(0,32));if(!(0,s.inRange)(I,u,c))return!1;let P=$(x.subarray(32,64));if(!(0,s.inRange)(P,u,l))return!1;let H=R(b(I),D(T),C),F=q(T,P,N(-H));return!(!F||!F.hasEvenY()||F.toAffine().x!==I)}catch{return!1}}e.schnorr={getPublicKey:A,sign:M,verify:k,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:W,pointToBytes:D,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:m,mod:i.mod}};let B=(0,o.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(y=>y.map(v=>BigInt(v)))),V=(0,a.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),E=(0,o.createHasher)(e.secp256k1.ProjectivePoint,y=>{let{x:v,y:S}=V(p.create(y[0]));return B(v,S)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256});e.hashToCurve=E.hashToCurve,e.encodeToCurve=E.encodeToCurve})(Y1);var Bg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHex=e.remove0x=void 0;var t=Qt;e.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},e.decodeHex=function(n){return(0,t.hexToBytes)((0,e.remove0x)(n))}})(Bg),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hexToPublicKey=e.convertPublicKeyFormat=e.getSharedPoint=e.getPublicKey=e.isValidPrivateKey=e.getValidSecret=void 0;var t=Sm,n=w1,r=Y1,o=Fa,i=ct,s=Bg;e.getValidSecret=function(){var u;do u=(0,t.randomBytes)(i.SECRET_KEY_LENGTH);while(!(0,e.isValidPrivateKey)(u));return u},e.isValidPrivateKey=function(u){return a((0,o.ellipticCurve)(),function(d){return d.utils.isValidPrivateKey(u)},function(){return!0},function(){return!0})},e.getPublicKey=function(u){return a((0,o.ellipticCurve)(),function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)})},e.getSharedPoint=function(u,d,f){return a((0,o.ellipticCurve)(),function(h){return h.getSharedSecret(u,d,f)},function(h){return h.getSharedSecret(u,d)},function(h){return l(h,u,d)})},e.convertPublicKeyFormat=function(u,d){return a((0,o.ellipticCurve)(),function(f){return f.getSharedSecret(BigInt(1),u,d)},function(){return u},function(){return u})};function a(u,d,f,h){if(u==="secp256k1")return d(r.secp256k1);if(u==="x25519")return f(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}e.hexToPublicKey=function(u){var d=(0,s.decodeHex)(u);return a((0,o.ellipticCurve)(),function(){return c(d)},function(){return d},function(){return d})};var c=function(u){if(u.length===i.ETH_PUBLIC_KEY_SIZE){var d=new Uint8Array(1+u.length);return d.set([4]),d.set(u,1),d}return u},l=function(u,d,f){var h=u.utils.getExtendedPublicKey(d).scalar;return u.ExtendedPoint.fromHex(f).multiply(h).toRawBytes()}}(v1);var J1={},is={};Object.defineProperty(is,"__esModule",{value:!0}),is.hkdf=void 0,is.extract=X1,is.expand=eD;var jg=Zt,h_=Mr,Q1=Mm;function X1(e,t,n){return(0,jg.hash)(e),n===void 0&&(n=new Uint8Array(e.outputLen)),(0,Q1.hmac)(e,(0,h_.toBytes)(n),(0,h_.toBytes)(t))}var ig=new Uint8Array([0]),p_=new Uint8Array;function eD(e,t,n,r=32){if((0,jg.hash)(e),(0,jg.number)(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");let o=Math.ceil(r/e.outputLen);n===void 0&&(n=p_);let i=new Uint8Array(o*e.outputLen),s=Q1.hmac.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let l=0;l<o;l++)ig[0]=l+1,a.update(l===0?p_:c).update(n).update(ig).digestInto(c),i.set(c,e.outputLen*l),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),ig.fill(0),i.slice(0,r)}is.hkdf=(e,t,n,r,o)=>eD(e,X1(e,t,n),r,o),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getSharedKey=e.deriveKey=void 0;var t=Qt,n=is,r=Dr;e.deriveKey=function(o,i,s){return(0,n.hkdf)(r.sha256,o,i,s,32)},e.getSharedKey=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return(0,e.deriveKey)(t.concatBytes.apply(void 0,o))}}(J1);var g_={},ds={},Ze={},Zo={};Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.polyval=Zo.ghash=void 0,Zo._toGHASHKey=tD;var Yo=Et,xt=Qt,vr=16,Am=new Uint8Array(16),Zn=(0,xt.u32)(Am),mn=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;function tD(e){e.reverse();let t=1&e[15],n=0;for(let r=0;r<e.length;r++){let o=e[r];e[r]=o>>>1|n,n=(1&o)<<7}return e[0]^=225&-t,e}var ud=class{constructor(t,n){this.blockLen=vr,this.outputLen=vr,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,t=(0,xt.toBytes)(t),(0,Yo.bytes)(t,16);let r=(0,xt.createView)(t),o=r.getUint32(0,!1),i=r.getUint32(4,!1),s=r.getUint32(8,!1),a=r.getUint32(12,!1),c=[];for(let m=0;m<128;m++)c.push({s0:mn(o),s1:mn(i),s2:mn(s),s3:mn(a)}),{s0:o,s1:i,s2:s,s3:a}={s3:(d=s)<<31|(f=a)>>>1,s2:(u=i)<<31|d>>>1,s1:(l=o)<<31|u>>>1,s0:l>>>1^225<<24&-(1&f)};var l,u,d,f;let h=(m=>m>65536?8:m>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;let p=128/h,g=this.windowSize=2**h,w=[];for(let m=0;m<p;m++)for(let D=0;D<g;D++){let b=0,O=0,N=0,z=0;for(let q=0;q<h;q++){if(!(D>>>h-q-1&1))continue;let{s0:U,s1:W,s2:$,s3:R}=c[h*m+q];b^=U,O^=W,N^=$,z^=R}w.push({s0:b,s1:O,s2:N,s3:z})}this.t=w}_updateBlock(t,n,r,o){t^=this.s0,n^=this.s1,r^=this.s2,o^=this.s3;let{W:i,t:s,windowSize:a}=this,c=0,l=0,u=0,d=0,f=(1<<i)-1,h=0;for(let p of[t,n,r,o])for(let g=0;g<4;g++){let w=p>>>8*g&255;for(let m=8/i-1;m>=0;m--){let D=w>>>i*m&f,{s0:b,s1:O,s2:N,s3:z}=s[h*a+D];c^=b,l^=O,u^=N,d^=z,h+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=d}update(t){t=(0,xt.toBytes)(t),(0,Yo.exists)(this);let n=(0,xt.u32)(t),r=Math.floor(t.length/vr),o=t.length%vr;for(let i=0;i<r;i++)this._updateBlock(n[4*i+0],n[4*i+1],n[4*i+2],n[4*i+3]);return o&&(Am.set(t.subarray(r*vr)),this._updateBlock(Zn[0],Zn[1],Zn[2],Zn[3]),(0,xt.clean)(Zn)),this}destroy(){let{t}=this;for(let n of t)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(t){(0,Yo.exists)(this),(0,Yo.output)(t,this),this.finished=!0;let{s0:n,s1:r,s2:o,s3:i}=this,s=(0,xt.u32)(t);return s[0]=n,s[1]=r,s[2]=o,s[3]=i,t}digest(){let t=new Uint8Array(vr);return this.digestInto(t),this.destroy(),t}},Vg=class extends ud{constructor(t,n){t=(0,xt.toBytes)(t);let r=tD((0,xt.copyBytes)(t));super(r,n),(0,xt.clean)(r)}update(t){t=(0,xt.toBytes)(t),(0,Yo.exists)(this);let n=(0,xt.u32)(t),r=t.length%vr,o=Math.floor(t.length/vr);for(let i=0;i<o;i++)this._updateBlock(mn(n[4*i+3]),mn(n[4*i+2]),mn(n[4*i+1]),mn(n[4*i+0]));return r&&(Am.set(t.subarray(o*vr)),this._updateBlock(mn(Zn[3]),mn(Zn[2]),mn(Zn[1]),mn(Zn[0])),(0,xt.clean)(Zn)),this}digestInto(t){(0,Yo.exists)(this),(0,Yo.output)(t,this),this.finished=!0;let{s0:n,s1:r,s2:o,s3:i}=this,s=(0,xt.u32)(t);return s[0]=n,s[1]=r,s[2]=o,s[3]=i,t.reverse()}};function m_(e){let t=(r,o)=>e(o,r.length).update((0,xt.toBytes)(r)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(r,o)=>e(r,o),t}Zo.ghash=m_((e,t)=>new ud(e,t)),Zo.polyval=m_((e,t)=>new Vg(e,t)),Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.unsafe=Ze.aeskwp=Ze.aeskw=Ze.siv=Ze.gcm=Ze.cfb=Ze.cbc=Ze.ecb=Ze.ctr=void 0,Ze.expandKeyLE=kn,Ze.expandKeyDecLE=Va;var ke=Et,$g=Zo,oe=Qt,Bt=16,Su=new Uint8Array(Bt),BO=283;function km(e){return e<<1^BO&-(e>>7)}function ss(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=km(e);return n}var Ug=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=km(r))e[n]=r;let t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,oe.clean)(e),t})(),jO=Ug.map((e,t)=>Ug.indexOf(t)),VO=e=>e<<24|e>>>8,sg=e=>e<<8|e>>>24,dd=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function nD(e,t){if(e.length!==256)throw new Error("Wrong sbox length");let n=new Uint32Array(256).map((l,u)=>t(e[u])),r=n.map(sg),o=r.map(sg),i=o.map(sg),s=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){let d=256*l+u;s[d]=n[l]^r[u],a[d]=o[l]^i[u],c[d]=e[l]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:o,T3:i,T01:s,T23:a}}var Nm=nD(Ug,e=>ss(e,3)<<24|e<<16|e<<8|ss(e,2)),rD=nD(jO,e=>ss(e,11)<<24|ss(e,13)<<16|ss(e,9)<<8|ss(e,14)),$O=(()=>{let e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=km(n))e[t]=n;return e})();function kn(e){(0,ke.bytes)(e);let t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);let{sbox2:n}=Nm,r=[];(0,oe.isAligned32)(e)||r.push(e=(0,oe.copyBytes)(e));let o=(0,oe.u32)(e),i=o.length,s=c=>Jn(n,c,c,c,c),a=new Uint32Array(t+28);a.set(o);for(let c=i;c<a.length;c++){let l=a[c-1];c%i==0?l=s(VO(l))^$O[c/i-1]:i>6&&c%i==4&&(l=s(l)),a[c]=a[c-i]^l}return(0,oe.clean)(...r),a}function Va(e){let t=kn(e),n=t.slice(),r=t.length,{sbox2:o}=Nm,{T0:i,T1:s,T2:a,T3:c}=rD;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=t[r-l-4+u];(0,oe.clean)(t);for(let l=4;l<r-4;l++){let u=n[l],d=Jn(o,u,u,u,u);n[l]=i[255&d]^s[d>>>8&255]^a[d>>>16&255]^c[d>>>24]}return n}function po(e,t,n,r,o,i){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|i>>>24&255]}function Jn(e,t,n,r,o){return e[255&t|65280&n]|e[r>>>16&255|o>>>16&65280]<<16}function At(e,t,n,r,o){let{sbox2:i,T01:s,T23:a}=Nm,c=0;t^=e[c++],n^=e[c++],r^=e[c++],o^=e[c++];let l=e.length/4-2;for(let u=0;u<l;u++){let d=e[c++]^po(s,a,t,n,r,o),f=e[c++]^po(s,a,n,r,o,t),h=e[c++]^po(s,a,r,o,t,n),p=e[c++]^po(s,a,o,t,n,r);t=d,n=f,r=h,o=p}return{s0:e[c++]^Jn(i,t,n,r,o),s1:e[c++]^Jn(i,n,r,o,t),s2:e[c++]^Jn(i,r,o,t,n),s3:e[c++]^Jn(i,o,t,n,r)}}function $a(e,t,n,r,o){let{sbox2:i,T01:s,T23:a}=rD,c=0;t^=e[c++],n^=e[c++],r^=e[c++],o^=e[c++];let l=e.length/4-2;for(let u=0;u<l;u++){let d=e[c++]^po(s,a,t,o,r,n),f=e[c++]^po(s,a,n,t,o,r),h=e[c++]^po(s,a,r,n,t,o),p=e[c++]^po(s,a,o,r,n,t);t=d,n=f,r=h,o=p}return{s0:e[c++]^Jn(i,t,o,r,n),s1:e[c++]^Jn(i,n,t,o,r),s2:e[c++]^Jn(i,r,n,t,o),s3:e[c++]^Jn(i,o,r,n,t)}}function fs(e,t){if(t===void 0)return new Uint8Array(e);if((0,ke.bytes)(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);if(!(0,oe.isAligned32)(t))throw new Error("unaligned dst");return t}function oD(e,t,n,r){(0,ke.bytes)(t,Bt),(0,ke.bytes)(n);let o=n.length;r=fs(o,r);let i=t,s=(0,oe.u32)(i),{s0:a,s1:c,s2:l,s3:u}=At(e,s[0],s[1],s[2],s[3]),d=(0,oe.u32)(n),f=(0,oe.u32)(r);for(let p=0;p+4<=d.length;p+=4){f[p+0]=d[p+0]^a,f[p+1]=d[p+1]^c,f[p+2]=d[p+2]^l,f[p+3]=d[p+3]^u;let g=1;for(let w=i.length-1;w>=0;w--)g=g+(255&i[w])|0,i[w]=255&g,g>>>=8;({s0:a,s1:c,s2:l,s3:u}=At(e,s[0],s[1],s[2],s[3]))}let h=Bt*Math.floor(d.length/4);if(h<o){let p=new Uint32Array([a,c,l,u]),g=(0,oe.u8)(p);for(let w=h,m=0;w<o;w++,m++)r[w]=n[w]^g[m];(0,oe.clean)(p)}return r}function as(e,t,n,r,o){(0,ke.bytes)(n,Bt),(0,ke.bytes)(r),o=fs(r.length,o);let i=n,s=(0,oe.u32)(i),a=(0,oe.createView)(i),c=(0,oe.u32)(r),l=(0,oe.u32)(o),u=t?0:12,d=r.length,f=a.getUint32(u,t),{s0:h,s1:p,s2:g,s3:w}=At(e,s[0],s[1],s[2],s[3]);for(let D=0;D+4<=c.length;D+=4)l[D+0]=c[D+0]^h,l[D+1]=c[D+1]^p,l[D+2]=c[D+2]^g,l[D+3]=c[D+3]^w,f=f+1>>>0,a.setUint32(u,f,t),{s0:h,s1:p,s2:g,s3:w}=At(e,s[0],s[1],s[2],s[3]);let m=Bt*Math.floor(c.length/4);if(m<d){let D=new Uint32Array([h,p,g,w]),b=(0,oe.u8)(D);for(let O=m,N=0;O<d;O++,N++)o[O]=r[O]^b[N];(0,oe.clean)(D)}return o}function y_(e){if((0,ke.bytes)(e),e.length%Bt!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function v_(e,t,n){(0,ke.bytes)(e);let r=e.length,o=r%Bt;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,oe.isAligned32)(e)||(e=(0,oe.copyBytes)(e));let i=(0,oe.u32)(e);if(t){let a=Bt-o;a||(a=Bt),r+=a}let s=fs(r,n);return{b:i,o:(0,oe.u32)(s),out:s}}function w_(e,t){if(!t)return e;let n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");let r=e[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");let o=e.subarray(0,-r);for(let i=0;i<r;i++)if(e[n-i-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function E_(e){let t=new Uint8Array(16),n=(0,oe.u32)(t);t.set(e);let r=Bt-e.length;for(let o=Bt-r;o<Bt;o++)t[o]=r;return n}function iD(e,t,n,r,o){let i=o==null?0:o.length,s=e.create(n,r.length+i);o&&s.update(o),s.update(r);let a=new Uint8Array(16),c=(0,oe.createView)(a);o&&(0,oe.setBigUint64)(c,0,BigInt(8*i),t),(0,oe.setBigUint64)(c,8,BigInt(8*r.length),t),s.update(a);let l=s.digest();return(0,oe.clean)(a),l}Ze.ctr=(0,oe.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(r,o){if((0,ke.bytes)(r),o!==void 0&&((0,ke.bytes)(o),!(0,oe.isAligned32)(o)))throw new Error("unaligned destination");let i=kn(e),s=(0,oe.copyBytes)(t),a=[i,s];(0,oe.isAligned32)(r)||a.push(r=(0,oe.copyBytes)(r));let c=oD(i,s,r,o);return(0,oe.clean)(...a),c}return(0,ke.bytes)(e),(0,ke.bytes)(t,Bt),{encrypt:(r,o)=>n(r,o),decrypt:(r,o)=>n(r,o)}}),Ze.ecb=(0,oe.wrapCipher)({blockSize:16},function(e,t={}){(0,ke.bytes)(e);let n=!t.disablePadding;return{encrypt(r,o){let{b:i,o:s,out:a}=v_(r,n,o),c=kn(e),l=0;for(;l+4<=i.length;){let{s0:u,s1:d,s2:f,s3:h}=At(c,i[l+0],i[l+1],i[l+2],i[l+3]);s[l++]=u,s[l++]=d,s[l++]=f,s[l++]=h}if(n){let u=E_(r.subarray(4*l)),{s0:d,s1:f,s2:h,s3:p}=At(c,u[0],u[1],u[2],u[3]);s[l++]=d,s[l++]=f,s[l++]=h,s[l++]=p}return(0,oe.clean)(c),a},decrypt(r,o){y_(r);let i=Va(e),s=fs(r.length,o),a=[i];(0,oe.isAligned32)(r)||a.push(r=(0,oe.copyBytes)(r));let c=(0,oe.u32)(r),l=(0,oe.u32)(s);for(let u=0;u+4<=c.length;){let{s0:d,s1:f,s2:h,s3:p}=$a(i,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=d,l[u++]=f,l[u++]=h,l[u++]=p}return(0,oe.clean)(...a),w_(s,n)}}}),Ze.cbc=(0,oe.wrapCipher)({blockSize:16,nonceLength:16},function(e,t,n={}){(0,ke.bytes)(e),(0,ke.bytes)(t,16);let r=!n.disablePadding;return{encrypt(o,i){let s=kn(e),{b:a,o:c,out:l}=v_(o,r,i),u=t,d=[s];(0,oe.isAligned32)(u)||d.push(u=(0,oe.copyBytes)(u));let f=(0,oe.u32)(u),h=f[0],p=f[1],g=f[2],w=f[3],m=0;for(;m+4<=a.length;)h^=a[m+0],p^=a[m+1],g^=a[m+2],w^=a[m+3],{s0:h,s1:p,s2:g,s3:w}=At(s,h,p,g,w),c[m++]=h,c[m++]=p,c[m++]=g,c[m++]=w;if(r){let D=E_(o.subarray(4*m));h^=D[0],p^=D[1],g^=D[2],w^=D[3],{s0:h,s1:p,s2:g,s3:w}=At(s,h,p,g,w),c[m++]=h,c[m++]=p,c[m++]=g,c[m++]=w}return(0,oe.clean)(...d),l},decrypt(o,i){y_(o);let s=Va(e),a=t,c=[s];(0,oe.isAligned32)(a)||c.push(a=(0,oe.copyBytes)(a));let l=(0,oe.u32)(a),u=fs(o.length,i);(0,oe.isAligned32)(o)||c.push(o=(0,oe.copyBytes)(o));let d=(0,oe.u32)(o),f=(0,oe.u32)(u),h=l[0],p=l[1],g=l[2],w=l[3];for(let m=0;m+4<=d.length;){let D=h,b=p,O=g,N=w;h=d[m+0],p=d[m+1],g=d[m+2],w=d[m+3];let{s0:z,s1:q,s2:U,s3:W}=$a(s,h,p,g,w);f[m++]=z^D,f[m++]=q^b,f[m++]=U^O,f[m++]=W^N}return(0,oe.clean)(...c),w_(u,r)}}}),Ze.cfb=(0,oe.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(r,o,i){(0,ke.bytes)(r);let s=r.length;i=fs(s,i);let a=kn(e),c=t,l=[a];(0,oe.isAligned32)(c)||l.push(c=(0,oe.copyBytes)(c)),(0,oe.isAligned32)(r)||l.push(r=(0,oe.copyBytes)(r));let u=(0,oe.u32)(r),d=(0,oe.u32)(i),f=o?d:u,h=(0,oe.u32)(c),p=h[0],g=h[1],w=h[2],m=h[3];for(let b=0;b+4<=u.length;){let{s0:O,s1:N,s2:z,s3:q}=At(a,p,g,w,m);d[b+0]=u[b+0]^O,d[b+1]=u[b+1]^N,d[b+2]=u[b+2]^z,d[b+3]=u[b+3]^q,p=f[b++],g=f[b++],w=f[b++],m=f[b++]}let D=Bt*Math.floor(u.length/4);if(D<s){({s0:p,s1:g,s2:w,s3:m}=At(a,p,g,w,m));let b=(0,oe.u8)(new Uint32Array([p,g,w,m]));for(let O=D,N=0;O<s;O++,N++)i[O]=r[O]^b[N];(0,oe.clean)(b)}return(0,oe.clean)(...l),i}return(0,ke.bytes)(e),(0,ke.bytes)(t,16),{encrypt:(r,o)=>n(r,!0,o),decrypt:(r,o)=>n(r,!1,o)}}),Ze.gcm=(0,oe.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){if((0,ke.bytes)(e),(0,ke.bytes)(t),n!==void 0&&(0,ke.bytes)(n),t.length<8)throw new Error("aes/gcm: invalid nonce length");let r=16;function o(s,a,c){let l=iD($g.ghash,!1,s,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function i(){let s=kn(e),a=Su.slice(),c=Su.slice();if(as(s,!1,c,c,a),t.length===12)c.set(t);else{let l=Su.slice(),u=(0,oe.createView)(l);(0,oe.setBigUint64)(u,8,BigInt(8*t.length),!1);let d=$g.ghash.create(a).update(t).update(l);d.digestInto(c),d.destroy()}return{xk:s,authKey:a,counter:c,tagMask:as(s,!1,c,Su)}}return{encrypt(s){(0,ke.bytes)(s);let{xk:a,authKey:c,counter:l,tagMask:u}=i(),d=new Uint8Array(s.length+r),f=[a,c,l,u];(0,oe.isAligned32)(s)||f.push(s=(0,oe.copyBytes)(s)),as(a,!1,l,s,d);let h=o(c,u,d.subarray(0,d.length-r));return f.push(h),d.set(h,s.length),(0,oe.clean)(...f),d},decrypt(s){if((0,ke.bytes)(s),s.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");let{xk:a,authKey:c,counter:l,tagMask:u}=i(),d=[a,c,u,l];(0,oe.isAligned32)(s)||d.push(s=(0,oe.copyBytes)(s));let f=s.subarray(0,-16),h=s.subarray(-16),p=o(c,u,f);if(d.push(p),!(0,oe.equalBytes)(p,h))throw new Error("aes/gcm: invalid ghash tag");let g=as(a,!1,l,f);return(0,oe.clean)(...d),g}}});var Iu=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n)throw new Error(`${e}: invalid value=${r}, must be [${t}..${n}]`)};function sD(e){return e!=null&&typeof e=="object"&&(e instanceof Uint32Array||e.constructor.name==="Uint32Array")}function aD(e,t){if((0,ke.bytes)(t,16),!sD(e))throw new Error("_encryptBlock accepts result of expandKeyLE");let n=(0,oe.u32)(t),{s0:r,s1:o,s2:i,s3:s}=At(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=o,n[2]=i,n[3]=s,t}function cD(e,t){if((0,ke.bytes)(t,16),!sD(e))throw new Error("_decryptBlock accepts result of expandKeyLE");let n=(0,oe.u32)(t),{s0:r,s1:o,s2:i,s3:s}=$a(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=o,n[2]=i,n[3]=s,t}Ze.siv=(0,oe.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){let r=Iu("AAD",0,68719476736),o=Iu("plaintext",0,2**36),i=Iu("nonce",12,12),s=Iu("ciphertext",16,2**36+16);function a(){let u=kn(e),d=new Uint8Array(e.length),f=new Uint8Array(16),h=[u,d],p=t;(0,oe.isAligned32)(p)||h.push(p=(0,oe.copyBytes)(p));let g=(0,oe.u32)(p),w=0,m=g[0],D=g[1],b=g[2],O=0;for(let z of[f,d].map(oe.u32)){let q=(0,oe.u32)(z);for(let U=0;U<q.length;U+=2){let{s0:W,s1:$}=At(u,w,m,D,b);q[U+0]=W,q[U+1]=$,w=++O}}let N={authKey:f,encKey:kn(d)};return(0,oe.clean)(...h),N}function c(u,d,f){let h=iD($g.polyval,!0,d,f,n);for(let b=0;b<12;b++)h[b]^=t[b];h[15]&=127;let p=(0,oe.u32)(h),g=p[0],w=p[1],m=p[2],D=p[3];return{s0:g,s1:w,s2:m,s3:D}=At(u,g,w,m,D),p[0]=g,p[1]=w,p[2]=m,p[3]=D,h}function l(u,d,f){let h=(0,oe.copyBytes)(d);h[15]|=128;let p=as(u,!0,h,f);return(0,oe.clean)(h),p}return(0,ke.bytes)(e,16,24,32),(0,ke.bytes)(t),i(t.length),n!==void 0&&((0,ke.bytes)(n),r(n.length)),{encrypt(u){(0,ke.bytes)(u),o(u.length);let{encKey:d,authKey:f}=a(),h=c(d,f,u),p=[d,f,h];(0,oe.isAligned32)(u)||p.push(u=(0,oe.copyBytes)(u));let g=new Uint8Array(u.length+16);return g.set(h,u.length),g.set(l(d,h,u)),(0,oe.clean)(...p),g},decrypt(u){(0,ke.bytes)(u),s(u.length);let d=u.subarray(-16),{encKey:f,authKey:h}=a(),p=[f,h];(0,oe.isAligned32)(u)||p.push(u=(0,oe.copyBytes)(u));let g=l(f,d,u.subarray(0,-16)),w=c(f,h,g);if(p.push(w),!(0,oe.equalBytes)(d,w))throw(0,oe.clean)(...p),new Error("invalid polyval tag");return(0,oe.clean)(...p),g}}});var fd={encrypt(e,t){if(t.length>=2**32)throw new Error("plaintext should be less than 4gb");let n=kn(e);if(t.length===16)aD(n,t);else{let r=(0,oe.u32)(t),o=r[0],i=r[1];for(let s=0,a=1;s<6;s++)for(let c=2;c<r.length;c+=2,a++){let{s0:l,s1:u,s2:d,s3:f}=At(n,o,i,r[c],r[c+1]);o=l,i=u^dd(a),r[c]=d,r[c+1]=f}r[0]=o,r[1]=i}n.fill(0)},decrypt(e,t){if(t.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");let n=Va(e),r=t.length/8-1;if(r===1)cD(n,t);else{let o=(0,oe.u32)(t),i=o[0],s=o[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){s^=dd(c);let{s0:u,s1:d,s2:f,s3:h}=$a(n,i,s,o[l],o[l+1]);i=u,s=d,o[l]=f,o[l+1]=h}o[0]=i,o[1]=s}n.fill(0)}},b_=new Uint8Array(8).fill(166);Ze.aeskw=(0,oe.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,ke.bytes)(t),!t.length||t.length%8!=0)throw new Error("invalid plaintext length");if(t.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");let n=(0,oe.concatBytes)(b_,t);return fd.encrypt(e,n),n},decrypt(t){if((0,ke.bytes)(t),t.length%8!=0||t.length<24)throw new Error("invalid ciphertext length");let n=(0,oe.copyBytes)(t);if(fd.decrypt(e,n),!(0,oe.equalBytes)(n.subarray(0,8),b_))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));var __=2790873510;Ze.aeskwp=(0,oe.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,ke.bytes)(t),!t.length)throw new Error("invalid plaintext length");let n=8*Math.ceil(t.length/8),r=new Uint8Array(8+n);r.set(t,8);let o=(0,oe.u32)(r);return o[0]=__,o[1]=dd(t.length),fd.encrypt(e,r),r},decrypt(t){if((0,ke.bytes)(t),t.length<16)throw new Error("invalid ciphertext length");let n=(0,oe.copyBytes)(t),r=(0,oe.u32)(n);fd.decrypt(e,n);let o=dd(r[1])>>>0,i=8*Math.ceil(o/8);if(r[0]!==__||n.length-8!==i)throw new Error("integrity check failed");for(let s=o;s<i;s++)if(n[8+s]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+o)}})),Ze.unsafe={expandKeyLE:kn,expandKeyDecLE:Va,encrypt:At,decrypt:$a,encryptBlock:aD,decryptBlock:cD,ctrCounter:oD,ctr32:as},Object.defineProperty(ds,"__esModule",{value:!0}),ds.aes256cbc=ds.aes256gcm=void 0;var lD=Ze;ds.aes256gcm=function(e,t,n){return(0,lD.gcm)(e,t,n)};ds.aes256cbc=function(e,t,n){return(0,lD.cbc)(e,t)};var hd={},uD={},cs={};Object.defineProperty(cs,"__esModule",{value:!0}),cs.sigma=void 0,cs.rotl=function(e,t){return e<<t|e>>>32-t},cs.createCipher=function(e,t){let{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=(0,pn.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return(0,yr.number)(o),(0,yr.number)(s),(0,yr.bool)(i),(0,yr.bool)(n),(a,c,l,u,d=0)=>{(0,yr.bytes)(a),(0,yr.bytes)(c),(0,yr.bytes)(l);let f=l.length;if(u===void 0&&(u=new Uint8Array(f)),(0,yr.bytes)(u),(0,yr.number)(d),d<0||d>=C_)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);let h=[],p,g,w=a.length;if(w===32)h.push(p=(0,pn.copyBytes)(a)),g=fD;else{if(w!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${w}`);p=new Uint8Array(32),p.set(a),p.set(a,16),g=zO,h.push(p)}ag(c)||h.push(c=(0,pn.copyBytes)(c));let m=(0,pn.u32)(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,m,(0,pn.u32)(c.subarray(0,16)),m),c=c.subarray(16)}let D=16-o;if(D!==c.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){let O=new Uint8Array(12);O.set(c,i?0:12-c.length),c=O,h.push(c)}let b=(0,pn.u32)(c);return function(O,N,z,q,U,W,$,R){let A=U.length,M=new Uint8Array(Tu),k=(0,pn.u32)(M),B=ag(U)&&ag(W),V=B?(0,pn.u32)(U):D_,E=B?(0,pn.u32)(W):D_;for(let y=0;y<A;$++){if(O(N,z,q,k,$,R),$>=C_)throw new Error("arx: counter overflow");let v=Math.min(Tu,A-y);if(B&&v===Tu){let S=y/4;if(y%4!=0)throw new Error("arx: invalid block position");for(let x,C=0;C<KO;C++)x=S+C,E[x]=V[x]^k[C];y+=Tu}else{for(let S,x=0;x<v;x++)S=y+x,W[S]=U[S]^M[x];y+=v}}}(e,g,m,b,l,u,d,s),(0,pn.clean)(...h),u}};var yr=Et,pn=Qt,dD=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),UO=dD("expand 16-byte k"),HO=dD("expand 32-byte k"),zO=(0,pn.u32)(UO),fD=(0,pn.u32)(HO);function ag(e){return e.byteOffset%4==0}cs.sigma=fD.slice();var Tu=64,KO=16,C_=2**32-1,D_=new Uint32Array,Ta={};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.poly1305=void 0,Ta.wrapConstructorWithKey=hD;var Mu=Et,Ca=Qt,ht=(e,t)=>255&e[t++]|(255&e[t++])<<8,Hg=class{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=(0,Ca.toBytes)(t),(0,Mu.bytes)(t,32);let n=ht(t,0),r=ht(t,2),o=ht(t,4),i=ht(t,6),s=ht(t,8),a=ht(t,10),c=ht(t,12),l=ht(t,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|o<<6),this.r[3]=8191&(o>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ht(t,16+2*u)}process(t,n,r=!1){let o=r?0:2048,{h:i,r:s}=this,a=s[0],c=s[1],l=s[2],u=s[3],d=s[4],f=s[5],h=s[6],p=s[7],g=s[8],w=s[9],m=ht(t,n+0),D=ht(t,n+2),b=ht(t,n+4),O=ht(t,n+6),N=ht(t,n+8),z=ht(t,n+10),q=ht(t,n+12),U=ht(t,n+14),W=i[0]+(8191&m),$=i[1]+(8191&(m>>>13|D<<3)),R=i[2]+(8191&(D>>>10|b<<6)),A=i[3]+(8191&(b>>>7|O<<9)),M=i[4]+(8191&(O>>>4|N<<12)),k=i[5]+(N>>>1&8191),B=i[6]+(8191&(N>>>14|z<<2)),V=i[7]+(8191&(z>>>11|q<<5)),E=i[8]+(8191&(q>>>8|U<<8)),y=i[9]+(U>>>5|o),v=0,S=v+W*a+$*(5*w)+R*(5*g)+A*(5*p)+M*(5*h);v=S>>>13,S&=8191,S+=k*(5*f)+B*(5*d)+V*(5*u)+E*(5*l)+y*(5*c),v+=S>>>13,S&=8191;let x=v+W*c+$*a+R*(5*w)+A*(5*g)+M*(5*p);v=x>>>13,x&=8191,x+=k*(5*h)+B*(5*f)+V*(5*d)+E*(5*u)+y*(5*l),v+=x>>>13,x&=8191;let C=v+W*l+$*c+R*a+A*(5*w)+M*(5*g);v=C>>>13,C&=8191,C+=k*(5*p)+B*(5*h)+V*(5*f)+E*(5*d)+y*(5*u),v+=C>>>13,C&=8191;let _=v+W*u+$*l+R*c+A*a+M*(5*w);v=_>>>13,_&=8191,_+=k*(5*g)+B*(5*p)+V*(5*h)+E*(5*f)+y*(5*d),v+=_>>>13,_&=8191;let T=v+W*d+$*u+R*l+A*c+M*a;v=T>>>13,T&=8191,T+=k*(5*w)+B*(5*g)+V*(5*p)+E*(5*h)+y*(5*f),v+=T>>>13,T&=8191;let I=v+W*f+$*d+R*u+A*l+M*c;v=I>>>13,I&=8191,I+=k*a+B*(5*w)+V*(5*g)+E*(5*p)+y*(5*h),v+=I>>>13,I&=8191;let P=v+W*h+$*f+R*d+A*u+M*l;v=P>>>13,P&=8191,P+=k*c+B*a+V*(5*w)+E*(5*g)+y*(5*p),v+=P>>>13,P&=8191;let H=v+W*p+$*h+R*f+A*d+M*u;v=H>>>13,H&=8191,H+=k*l+B*c+V*a+E*(5*w)+y*(5*g),v+=H>>>13,H&=8191;let F=v+W*g+$*p+R*h+A*f+M*d;v=F>>>13,F&=8191,F+=k*u+B*l+V*c+E*a+y*(5*w),v+=F>>>13,F&=8191;let j=v+W*w+$*g+R*p+A*h+M*f;v=j>>>13,j&=8191,j+=k*d+B*u+V*l+E*c+y*a,v+=j>>>13,j&=8191,v=(v<<2)+v|0,v=v+S|0,S=8191&v,v>>>=13,x+=v,i[0]=S,i[1]=x,i[2]=C,i[3]=_,i[4]=T,i[5]=I,i[6]=P,i[7]=H,i[8]=F,i[9]=j}finalize(){let{h:t,pad:n}=this,r=new Uint16Array(10),o=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=o,o=t[a]>>>13,t[a]&=8191;t[0]+=5*o,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+o,o=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(1^o)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)t[a]=t[a]&i|r[a];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let s=t[0]+n[0];t[0]=65535&s;for(let a=1;a<8;a++)s=(t[a]+n[a]|0)+(s>>>16)|0,t[a]=65535&s;(0,Ca.clean)(r)}update(t){(0,Mu.exists)(this);let{buffer:n,blockLen:r}=this,o=(t=(0,Ca.toBytes)(t)).length;for(let i=0;i<o;){let s=Math.min(r-this.pos,o-i);if(s!==r)n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=o-i;i+=r)this.process(t,i)}return this}destroy(){(0,Ca.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(t){(0,Mu.exists)(this),(0,Mu.output)(t,this),this.finished=!0;let{buffer:n,h:r}=this,{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=r[s]>>>0,t[i++]=r[s]>>>8;return t}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}};function hD(e){let t=(r,o)=>e(o).update((0,Ca.toBytes)(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}Ta.poly1305=hD(e=>new Hg(e)),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=s;let t=cs,n=Et,r=Ta,o=Qt;function i(d,f,h,p,g,w=20){let m=d[0],D=d[1],b=d[2],O=d[3],N=f[0],z=f[1],q=f[2],U=f[3],W=f[4],$=f[5],R=f[6],A=f[7],M=g,k=h[0],B=h[1],V=h[2],E=m,y=D,v=b,S=O,x=N,C=z,_=q,T=U,I=W,P=$,H=R,F=A,j=M,L=k,K=B,G=V;for(let Q=0;Q<w;Q+=2)E=E+x|0,j=(0,t.rotl)(j^E,16),I=I+j|0,x=(0,t.rotl)(x^I,12),E=E+x|0,j=(0,t.rotl)(j^E,8),I=I+j|0,x=(0,t.rotl)(x^I,7),y=y+C|0,L=(0,t.rotl)(L^y,16),P=P+L|0,C=(0,t.rotl)(C^P,12),y=y+C|0,L=(0,t.rotl)(L^y,8),P=P+L|0,C=(0,t.rotl)(C^P,7),v=v+_|0,K=(0,t.rotl)(K^v,16),H=H+K|0,_=(0,t.rotl)(_^H,12),v=v+_|0,K=(0,t.rotl)(K^v,8),H=H+K|0,_=(0,t.rotl)(_^H,7),S=S+T|0,G=(0,t.rotl)(G^S,16),F=F+G|0,T=(0,t.rotl)(T^F,12),S=S+T|0,G=(0,t.rotl)(G^S,8),F=F+G|0,T=(0,t.rotl)(T^F,7),E=E+C|0,G=(0,t.rotl)(G^E,16),H=H+G|0,C=(0,t.rotl)(C^H,12),E=E+C|0,G=(0,t.rotl)(G^E,8),H=H+G|0,C=(0,t.rotl)(C^H,7),y=y+_|0,j=(0,t.rotl)(j^y,16),F=F+j|0,_=(0,t.rotl)(_^F,12),y=y+_|0,j=(0,t.rotl)(j^y,8),F=F+j|0,_=(0,t.rotl)(_^F,7),v=v+T|0,L=(0,t.rotl)(L^v,16),I=I+L|0,T=(0,t.rotl)(T^I,12),v=v+T|0,L=(0,t.rotl)(L^v,8),I=I+L|0,T=(0,t.rotl)(T^I,7),S=S+x|0,K=(0,t.rotl)(K^S,16),P=P+K|0,x=(0,t.rotl)(x^P,12),S=S+x|0,K=(0,t.rotl)(K^S,8),P=P+K|0,x=(0,t.rotl)(x^P,7);let ee=0;p[ee++]=m+E|0,p[ee++]=D+y|0,p[ee++]=b+v|0,p[ee++]=O+S|0,p[ee++]=N+x|0,p[ee++]=z+C|0,p[ee++]=q+_|0,p[ee++]=U+T|0,p[ee++]=W+I|0,p[ee++]=$+P|0,p[ee++]=R+H|0,p[ee++]=A+F|0,p[ee++]=M+j|0,p[ee++]=k+L|0,p[ee++]=B+K|0,p[ee++]=V+G|0}function s(d,f,h,p){let g=d[0],w=d[1],m=d[2],D=d[3],b=f[0],O=f[1],N=f[2],z=f[3],q=f[4],U=f[5],W=f[6],$=f[7],R=h[0],A=h[1],M=h[2],k=h[3];for(let V=0;V<20;V+=2)g=g+b|0,R=(0,t.rotl)(R^g,16),q=q+R|0,b=(0,t.rotl)(b^q,12),g=g+b|0,R=(0,t.rotl)(R^g,8),q=q+R|0,b=(0,t.rotl)(b^q,7),w=w+O|0,A=(0,t.rotl)(A^w,16),U=U+A|0,O=(0,t.rotl)(O^U,12),w=w+O|0,A=(0,t.rotl)(A^w,8),U=U+A|0,O=(0,t.rotl)(O^U,7),m=m+N|0,M=(0,t.rotl)(M^m,16),W=W+M|0,N=(0,t.rotl)(N^W,12),m=m+N|0,M=(0,t.rotl)(M^m,8),W=W+M|0,N=(0,t.rotl)(N^W,7),D=D+z|0,k=(0,t.rotl)(k^D,16),$=$+k|0,z=(0,t.rotl)(z^$,12),D=D+z|0,k=(0,t.rotl)(k^D,8),$=$+k|0,z=(0,t.rotl)(z^$,7),g=g+O|0,k=(0,t.rotl)(k^g,16),W=W+k|0,O=(0,t.rotl)(O^W,12),g=g+O|0,k=(0,t.rotl)(k^g,8),W=W+k|0,O=(0,t.rotl)(O^W,7),w=w+N|0,R=(0,t.rotl)(R^w,16),$=$+R|0,N=(0,t.rotl)(N^$,12),w=w+N|0,R=(0,t.rotl)(R^w,8),$=$+R|0,N=(0,t.rotl)(N^$,7),m=m+z|0,A=(0,t.rotl)(A^m,16),q=q+A|0,z=(0,t.rotl)(z^q,12),m=m+z|0,A=(0,t.rotl)(A^m,8),q=q+A|0,z=(0,t.rotl)(z^q,7),D=D+b|0,M=(0,t.rotl)(M^D,16),U=U+M|0,b=(0,t.rotl)(b^U,12),D=D+b|0,M=(0,t.rotl)(M^D,8),U=U+M|0,b=(0,t.rotl)(b^U,7);let B=0;p[B++]=g,p[B++]=w,p[B++]=m,p[B++]=D,p[B++]=R,p[B++]=A,p[B++]=M,p[B++]=k}e.chacha20orig=(0,t.createCipher)(i,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,t.createCipher)(i,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,t.createCipher)(i,{counterRight:!1,counterLength:8,extendNonceFn:s,allowShortKeys:!1}),e.chacha8=(0,t.createCipher)(i,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,t.createCipher)(i,{counterRight:!1,counterLength:4,rounds:12});let a=new Uint8Array(16),c=(d,f)=>{d.update(f);let h=f.length%16;h&&d.update(a.subarray(h))},l=new Uint8Array(32);function u(d,f,h,p,g){let w=d(f,h,l),m=r.poly1305.create(w);g&&c(m,g),c(m,p);let D=new Uint8Array(16),b=(0,o.createView)(D);(0,o.setBigUint64)(b,0,BigInt(g?g.length:0),!0),(0,o.setBigUint64)(b,8,BigInt(p.length),!0),m.update(D);let O=m.digest();return(0,o.clean)(w,D),O}e._poly1305_aead=d=>(f,h,p)=>((0,n.bytes)(f,32),(0,n.bytes)(h),{encrypt(w,m){let D=w.length,b=D+16;m?(0,n.bytes)(m,b):m=new Uint8Array(b),d(f,h,w,m,1);let O=u(d,f,h,m.subarray(0,-16),p);return m.set(O,D),(0,o.clean)(O),m},decrypt(w,m){let D=w.length,b=D-16;if(D<16)throw new Error("encrypted data must be at least 16 bytes");m?(0,n.bytes)(m,b):m=new Uint8Array(b);let O=w.subarray(0,-16),N=w.subarray(-16),z=u(d,f,h,O,p);if(!(0,o.equalBytes)(N,z))throw new Error("invalid tag");return d(f,h,O,m,1),(0,o.clean)(z),m}}),e.chacha20poly1305=(0,o.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,o.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))}(uD),Object.defineProperty(hd,"__esModule",{value:!0}),hd.xchacha20=void 0;var Xi,S_,wa,qO=uD;hd.xchacha20=function(e,t,n){return(0,qO.xchacha20poly1305)(e,t,n)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.aesDecrypt=e.aesEncrypt=e.symDecrypt=e.symEncrypt=void 0;var t=Qt,n=Sm,r=ds,o=hd,i=Fa,s=ct;e.symEncrypt=function(u,d,f){return a(c,u,d,f)};function a(u,d,f,h){var p=(0,i.symmetricAlgorithm)();if(p==="aes-256-gcm")return u(r.aes256gcm,d,f,(0,i.symmetricNonceLength)(),s.AEAD_TAG_LENGTH,h);if(p==="xchacha20")return u(o.xchacha20,d,f,s.XCHACHA20_NONCE_LENGTH,s.AEAD_TAG_LENGTH,h);if(p==="aes-256-cbc")return u(r.aes256cbc,d,f,16,0);throw new Error("Not implemented")}function c(u,d,f,h,p,g){var w=(0,n.randomBytes)(h),m=u(d,w,g).encrypt(f);if(p===0)return(0,t.concatBytes)(w,m);var D=m.length-p,b=m.subarray(0,D),O=m.subarray(D);return(0,t.concatBytes)(w,O,b)}function l(u,d,f,h,p,g){var w=f.subarray(0,h),m=u(d,Uint8Array.from(w),g),D=f.subarray(h);if(p===0)return m.decrypt(D);var b=D.subarray(0,p),O=D.subarray(p);return m.decrypt((0,t.concatBytes)(O,b))}e.symDecrypt=function(u,d,f){return a(l,u,d,f)},e.aesEncrypt=e.symEncrypt,e.aesDecrypt=e.symDecrypt}(g_),Xi=Ld,S_=vn&&vn.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),wa=vn&&vn.__exportStar||function(e,t){for(var n in e)n==="default"||Object.prototype.hasOwnProperty.call(t,n)||S_(t,e,n)},Object.defineProperty(Xi,"__esModule",{value:!0}),wa(v1,Xi),wa(J1,Xi),wa(Bg,Xi),wa(g_,Xi);var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.PublicKey=void 0;var I_=Qt,xu=Ld,WO=function(){function e(t){this.data=(0,xu.convertPublicKeyFormat)(t,!0)}return e.fromHex=function(t){return new e((0,xu.hexToPublicKey)(t))},Object.defineProperty(e.prototype,"uncompressed",{get:function(){return X.from((0,xu.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compressed",{get:function(){return X.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(t){return t===void 0&&(t=!0),(0,I_.bytesToHex)(t?this.data:this.uncompressed)},e.prototype.decapsulate=function(t,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,o=t.multiply(this,n);return(0,xu.getSharedKey)(r,o)},e.prototype.equals=function(t){return(0,I_.equalBytes)(this.data,t.data)},e}();Ua.PublicKey=WO,Object.defineProperty(rd,"__esModule",{value:!0}),rd.PrivateKey=void 0;var T_=Qt,es=Ld,GO=Ua,ZO=function(){function e(t){if(t===void 0)this.data=(0,es.getValidSecret)();else{if(!(0,es.isValidPrivateKey)(t))throw new Error("Invalid private key");this.data=t}this.publicKey=new GO.PublicKey((0,es.getPublicKey)(this.data))}return e.fromHex=function(t){return new e((0,es.decodeHex)(t))},Object.defineProperty(e.prototype,"secret",{get:function(){return X.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(){return(0,T_.bytesToHex)(this.data)},e.prototype.encapsulate=function(t,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,o=this.multiply(t,n);return(0,es.getSharedKey)(r,o)},e.prototype.multiply=function(t,n){return n===void 0&&(n=!1),(0,es.getSharedPoint)(this.data,t.compressed,n)},e.prototype.equals=function(t){return(0,T_.equalBytes)(this.data,t.data)},e}();rd.PrivateKey=ZO,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.PrivateKey=void 0;var t=rd;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return t.PrivateKey}});var n=Ua;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(qp),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.PublicKey=e.PrivateKey=e.ECIES_CONFIG=void 0,e.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),d=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),f=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,h=(0,o.symEncrypt)(d,c);return X.from((0,t.concatBytes)(f,h))},e.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),d=new r.PublicKey(c.subarray(0,u)),f=c.subarray(u),h=d.decapsulate(l,(0,n.isHkdfKeyCompressed)());return X.from((0,o.symDecrypt)(h,f))};var t=Qt,n=Fa,r=qp,o=Ld,i=Fa;Object.defineProperty(e,"ECIES_CONFIG",{enumerable:!0,get:function(){return i.ECIES_CONFIG}});var s=qp;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return s.PrivateKey}}),Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}}),e.utils={aesEncrypt:o.aesEncrypt,aesDecrypt:o.aesDecrypt,symEncrypt:o.symEncrypt,symDecrypt:o.symDecrypt,decodeHex:o.decodeHex,getValidSecret:o.getValidSecret,remove0x:o.remove0x}}(ns);var pD=(0,Ct.default)("KeyExchange:Layer"),gD=(0,Ct.default)("SocketService:Layer"),mD=(0,Ct.default)("Ecies:Layer"),yD=(0,Ct.default)("RemoteCommunication:Layer");pD.color="##95c44e",gD.color="#f638d7",mD.color="#465b9c",yD.color="#47a2be";var Z={KeyExchange:pD,SocketService:gD,Ecies:mD,RemoteCommunication:yD},Ea,Au=[],cg=[],Tr=(e,t)=>te(void 0,void 0,void 0,function*(){Ea=t,cg.push(e),function(n){return te(this,void 0,void 0,function*(){if(!Ea||!n)return;(function(){let s=cg;cg=Au,Au=s})();let r=Ea.endsWith("/")?`${Ea}evt`:`${Ea}/evt`,o=Object.assign({},n);if(delete o.params,n.params)for(let[s,a]of Object.entries(n.params))o[s]=a;let i=JSON.stringify(o);Z.RemoteCommunication(`[sendBufferedEvents] Sending ${Au.length} analytics events to ${r}`);try{let s=yield(0,bm.default)(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i}),a=yield s.text();Z.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),Au.length=0}catch{}})}(e).catch(()=>{})}),Ma=class{constructor(t){this.enabled=!0,t?.debug&&Ct.default.enable("Ecies:Layer"),this.ecies=t?.privateKey?ns.PrivateKey.fromHex(t.privateKey):new ns.PrivateKey,Z.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),Z.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),Z.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new ns.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(t,n){let r=t;if(this.enabled)try{Z.Ecies("[ECIES: encrypt()] using otherPublicKey",n);let o=X.from(t),i=ns.encrypt(n,o);r=X.from(i).toString("base64")}catch(o){throw Z.Ecies("[ECIES: encrypt()] error encrypt:",o),Z.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),Z.Ecies("[ECIES: encrypt()] data: ",t),Z.Ecies("[ECIES: encrypt()] otherkey: ",n),o}return r}decrypt(t){let n=t;if(this.enabled)try{Z.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());let r=X.from(t.toString(),"base64");n=ns.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw Z.Ecies("[ECIES: decrypt()] error decrypt",r),Z.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),Z.Ecies("[ECIES: decrypt()] encryptedData: ",t),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){Z.Ecies("[ECIES: toString()]",this.getKeyInfo())}},vo={name:"@metamask/sdk-communication-layer",version:"0.32.0",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk.git",directory:"packages/sdk-communication-layer"},main:"dist/node/cjs/metamask-sdk-communication-layer.js",unpkg:"dist/browser/umd/metamask-sdk-communication-layer.js",module:"dist/node/es/metamask-sdk-communication-layer.js",browser:"dist/browser/es/metamask-sdk-communication-layer.js","react-native":"dist/react-native/es/metamask-sdk-communication-layer.js",types:"dist/types/src/index.d.ts",files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types","build:clean":"yarn clean && yarn build",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs",dev:'concurrently "tsc --watch" "rollup -c --bundleConfigAsCjs -w"',"build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",size:"size-limit",clean:"rimraf ./dist",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk-communication-layer","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore","publish:preview":"yarn npm publish --tag preview",prepack:"../../scripts/prepack.sh",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:coverage":"jest --coverage","test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":"jest",watch:"rollup -c --bundleConfigAsCjs -w"},dependencies:{bufferutil:"^4.0.8","date-fns":"^2.29.3",debug:"^4.3.4","utf-8-validate":"^5.0.2",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@rollup/plugin-commonjs":"^25.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.4","@size-limit/preset-big-lib":"^11.0.2","@types/jest":"^29.2.4","@types/node":"^20.1.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0",concurrently:"^9.1.2","cross-fetch":"^4.0.0",eciesjs:"^0.4.11",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0",eventemitter2:"^6.4.9",jest:"^29.3.1",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^4.26.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-peer-deps-external":"^2.2.4","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.1.6","socket.io-client":"^4.5.1","stream-browserify":"^3.0.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^5.6.3"},peerDependencies:{"cross-fetch":"^4.0.0",eciesjs:"*",eventemitter2:"^6.4.9","readable-stream":"^3.6.2","socket.io-client":"^4.5.1"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,canvas:!0,"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,bufferutil:!1,"utf-8-validate":!1}}},ms="https://metamask-sdk.api.cx.metamask.io/",YO=["websocket"],ys=6048e5,JO=3e3,QO={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",ETH_REQUESTACCOUNTS:"eth_requestAccounts"};function vD(e){let{context:t}=e;Z.RemoteCommunication(`[RemoteCommunication: clean()] context=${t}`),e.channelConfig=void 0,e.ready=!1,e.originatorConnectStarted=!1}var gt,ie,pd,Fe,We,Je,ts;(ts=gt||(gt={})).DISCONNECTED="disconnected",ts.WAITING="waiting",ts.TIMEOUT="timeout",ts.LINKED="linked",ts.PAUSED="paused",ts.TERMINATED="terminated",function(e){e.KEY_INFO="key_info",e.SERVICE_STATUS="service_status",e.PROVIDER_UPDATE="provider_update",e.RPC_UPDATE="rpc_update",e.KEYS_EXCHANGED="keys_exchanged",e.JOIN_CHANNEL="join_channel",e.PUBLIC_KEY="public_key",e.CHANNEL_CREATED="channel_created",e.CLIENTS_CONNECTED="clients_connected",e.CLIENTS_DISCONNECTED="clients_disconnected",e.CLIENTS_WAITING="clients_waiting",e.CLIENTS_READY="clients_ready",e.REJECTED="rejected",e.WALLET_INIT="wallet_init",e.CHANNEL_PERSISTENCE="channel_persistence",e.CONFIG="config",e.MESSAGE_ACK="ack",e.SOCKET_DISCONNECTED="socket_disconnected",e.SOCKET_RECONNECT="socket_reconnect",e.OTP="otp",e.SDK_RPC_CALL="sdk_rpc_call",e.AUTHORIZED="authorized",e.CONNECTION_STATUS="connection_status",e.MESSAGE="message",e.TERMINATE="terminate"}(ie||(ie={})),(pd||(pd={})).KEY_EXCHANGE="key_exchange",function(e){e.KEY_HANDSHAKE_START="key_handshake_start",e.KEY_HANDSHAKE_CHECK="key_handshake_check",e.KEY_HANDSHAKE_SYN="key_handshake_SYN",e.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",e.KEY_HANDSHAKE_ACK="key_handshake_ACK",e.KEY_HANDSHAKE_WALLET="key_handshake_wallet",e.KEY_HANDSHAKE_NONE="none"}(Fe||(Fe={}));var zg=class extends Es.EventEmitter2{constructor({communicationLayer:t,otherPublicKey:n,context:r,ecies:o,logging:i}){super(),this.keysExchanged=!1,this.step=Fe.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=t,o?.privateKey&&n&&(Z.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,o),this.keysExchanged=!0),this.myECIES=new Ma(Object.assign(Object.assign({},o),{debug:i?.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=i?.keyExchangeLayer===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(pd.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(t){let{relayPersistence:n}=this.communicationLayer.remote.state;if(Z.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,t),n)return void Z.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");let{message:r}=t;this.keysExchanged&&Z.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(ie.KEY_INFO,r.type),r.type===Fe.KEY_HANDSHAKE_SYN?(this.checkStep([Fe.KEY_HANDSHAKE_NONE,Fe.KEY_HANDSHAKE_ACK]),Z.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Fe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(o=>{Z.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",o)}),this.setStep(Fe.KEY_HANDSHAKE_ACK)):r.type===Fe.KEY_HANDSHAKE_SYNACK?(this.checkStep([Fe.KEY_HANDSHAKE_SYNACK,Fe.KEY_HANDSHAKE_ACK,Fe.KEY_HANDSHAKE_NONE]),Z.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Fe.KEY_HANDSHAKE_ACK}).catch(o=>{Z.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",o)}),this.keysExchanged=!0,this.setStep(Fe.KEY_HANDSHAKE_ACK),this.emit(ie.KEYS_EXCHANGED)):r.type===Fe.KEY_HANDSHAKE_ACK&&(Z.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Fe.KEY_HANDSHAKE_ACK,Fe.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Fe.KEY_HANDSHAKE_ACK),this.emit(ie.KEYS_EXCHANGED))}resetKeys(t){this.clean(),this.myECIES=new Ma(t)}clean(){Z.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Fe.KEY_HANDSHAKE_NONE),this.emit(ie.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:t,force:n}){let{relayPersistence:r,protocolVersion:o}=this.communicationLayer.remote.state,i=o>=2;r?Z.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(Z.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${o} isOriginator=${t} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),t?!(this.keysExchanged||this.step!==Fe.KEY_HANDSHAKE_NONE&&this.step!==Fe.KEY_HANDSHAKE_SYNACK)||n?(Z.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Fe.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Fe.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(s=>{Z.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",s)})):Z.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?Z.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):i?this.communicationLayer.sendMessage({type:Fe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(s=>{Z.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",s)}):(this.communicationLayer.sendMessage({type:Fe.KEY_HANDSHAKE_START}).catch(s=>{Z.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",s)}),this.clean()))}setStep(t){this.step=t,this.emit(ie.KEY_INFO,t)}checkStep(t){t.length>0&&t.indexOf(this.step.toString())}setRelayPersistence({localKey:t,otherKey:n}){this.otherPublicKey=n,this.myECIES=new Ma({privateKey:t,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(t){this.keysExchanged=t}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(t){Z.KeyExchange("[KeyExchange: setOtherPubKey()]",t),this.otherPublicKey=t}encryptMessage(t){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(t,this.otherPublicKey)}decryptMessage(t){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(t)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){let t={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(t)}};(function(e){e.TERMINATE="terminate",e.ANSWER="answer",e.OFFER="offer",e.CANDIDATE="candidate",e.JSONRPC="jsonrpc",e.WALLET_INFO="wallet_info",e.WALLET_INIT="wallet_init",e.ORIGINATOR_INFO="originator_info",e.PAUSE="pause",e.OTP="otp",e.AUTHORIZED="authorized",e.PING="ping",e.READY="ready"})(We||(We={})),function(e){e.REQUEST="sdk_connect_request_started",e.REQUEST_MOBILE="sdk_connect_request_started_mobile",e.RECONNECT="sdk_reconnect_request_started",e.CONNECTED="sdk_connection_established",e.CONNECTED_MOBILE="sdk_connection_established_mobile",e.AUTHORIZED="sdk_connection_authorized",e.REJECTED="sdk_connection_rejected",e.TERMINATED="sdk_connection_terminated",e.DISCONNECTED="sdk_disconnected",e.SDK_USE_EXTENSION="sdk_use_extension",e.SDK_RPC_REQUEST="sdk_rpc_request",e.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",e.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",e.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",e.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(Je||(Je={}));var Vu=(e,t,n)=>te(void 0,void 0,void 0,function*(){var r,o,i,s,a,c;let{remote:l,state:u}=e,{channelId:d,isOriginator:f}=u;if(t==="error_terminated")return Z.SocketService(`handleJoinChannelResults: Channel ${d} terminated`),void e.emit(ie.TERMINATE);if(!n)return void Z.SocketService(`handleJoinChannelResults: No result for channel ${d}`);let{persistence:h,walletKey:p,rejected:g}=n;if(Z.SocketService(`handleJoinChannelResults: Channel ${d} persistence=${h} walletKey=${p} rejected=${g}`),g)return Z.SocketService(`handleJoinChannelResults: Channel ${d} rejected`),yield e.remote.disconnect({terminate:!0}),e.remote.emit(ie.REJECTED,{channelId:d}),void e.remote.emitServiceStatusEvent();if(p&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){e.getKeyExchange().setOtherPublicKey(p),(o=e.state.keyExchange)===null||o===void 0||o.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(ie.AUTHORIZED);let{communicationLayer:w,storageManager:m}=l.state,D=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(i=l.state.channelId)!==null&&i!==void 0?i:"",validUntil:Date.now()+ys,localKey:w?.getKeyInfo().ecies.private,otherKey:p});e.sendMessage({type:Fe.KEY_HANDSHAKE_ACK}).catch(b=>{}),(s=e.state.socket)===null||s===void 0||s.emit(We.PING,{id:d,clientType:f?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield m?.persistChannelConfig(D),l.emitServiceStatusEvent(),l.setConnectionStatus(gt.LINKED)}h&&(e.emit(ie.CHANNEL_PERSISTENCE),(a=e.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(ie.AUTHORIZED),Tr(Object.assign(Object.assign({id:d??"",event:f?Je.CONNECTED:Je.CONNECTED_MOBILE},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:vo.version,walletVersion:(c=e.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch(w=>{}))}),hs=e=>new Promise(t=>{setTimeout(t,e)}),M_=(e,t,...n)=>te(void 0,[e,t,...n],void 0,function*(r,o,i=200){let s,a=Date.now(),c=!1;for(;!c;){if(c=Date.now()-a>3e5,s=o[r],s.elapsedTime!==void 0)return s;yield hs(i)}throw new Error(`RPC ${r} timed out`)}),Kg=e=>te(void 0,void 0,void 0,function*(){let{state:t}=e,{socket:n,channelId:r,context:o,isOriginator:i,isReconnecting:s}=t;if(s)return Z.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",e),!1;if(!n)return Z.SocketService("[SocketService: reconnectSocket()] socket is not defined",e),!1;if(!r)return!1;let{connected:a}=n;t.isReconnecting=!0,t.reconnectionAttempts=0,Z.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,e);try{for(;3>t.reconnectionAttempts;){if(Z.SocketService(`[SocketService: reconnectSocket()] Attempt ${t.reconnectionAttempts+1} of 3`,e),yield hs(200),n.connected)return Z.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(We.PING,{id:r,clientType:i?"dapp":"wallet",context:"on_channel_config",message:""}),!0;t.resumed=!0,n.connect(),e.emit(ie.SOCKET_RECONNECT);try{if(yield new Promise((c,l)=>{n.emit(ie.JOIN_CHANNEL,{channelId:r,context:`${o}connect_again`,clientType:i?"dapp":"wallet"},(u,d)=>te(void 0,void 0,void 0,function*(){try{yield Vu(e,u,d),c()}catch(f){l(f)}}))}),yield hs(100),n.connected)return Z.SocketService(`Reconnection successful on attempt ${t.reconnectionAttempts+1}`),!0}catch(c){Z.SocketService(`Error during reconnection attempt ${t.reconnectionAttempts+1}:`,c)}t.reconnectionAttempts+=1,3>t.reconnectionAttempts&&(yield hs(200))}return Z.SocketService("Failed to reconnect after 3 attempts"),!1}finally{t.isReconnecting=!1,t.reconnectionAttempts=0}});function wD(e,t){return te(this,void 0,void 0,function*(){var n;let r=(n=e.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(t)),o={id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:r,plaintext:e.state.hasPlaintext?JSON.stringify(t):void 0};return Z.SocketService(`[SocketService: encryptAndSendMessage()] context=${e.state.context}`,o),t.type===We.TERMINATE&&(e.state.manualDisconnect=!0),new Promise((i,s)=>{var a;(a=e.state.socket)===null||a===void 0||a.emit(ie.MESSAGE,o,(c,l)=>{var u;c&&(Z.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),s(c)),Z.SocketService("[encryptAndSendMessage] response",l),i((u=l?.success)!==null&&u!==void 0&&u)})})})}var ls;(function(e){e.RPC_CHECK="rpcCheck",e.SKIPPED_RPC="skippedRpc"})(ls||(ls={}));var ED=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(e=>e.toLowerCase()),XO=[{event:ie.CLIENTS_CONNECTED,handler:function(e,t){return n=>te(this,void 0,void 0,function*(){var r,o,i,s,a,c,l,u,d,f,h;let p=(o=(r=e.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&o!==void 0&&o;if(Z.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected-${t}' relayPersistence=${p} resumed=${e.state.resumed}  clientsPaused=${e.state.clientsPaused} keysExchanged=${(i=e.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()} isOriginator=${e.state.isOriginator}`),e.emit(ie.CLIENTS_CONNECTED,{isOriginator:e.state.isOriginator,keysExchanged:(s=e.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged(),context:e.state.context}),e.state.resumed)e.state.isOriginator||(Z.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} 'clients_connected' / keysExchanged=${(a=e.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=e.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=e.state.isOriginator)!==null&&l!==void 0&&l})),e.state.resumed=!1;else if(e.state.clientsPaused)Z.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!e.state.isOriginator){let g=!p;Z.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${(u=e.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${g} -- backward compatibility`),Z.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${(d=e.state.keyExchange)===null||d===void 0?void 0:d.areKeysExchanged()} -- force=${g} -- backward compatibility`),(f=e.state.keyExchange)===null||f===void 0||f.start({isOriginator:(h=e.state.isOriginator)!==null&&h!==void 0&&h,force:g})}e.state.clientsConnected=!0,e.state.clientsPaused=!1})}},{event:ie.CHANNEL_CREATED,handler:function(e,t){return n=>{Z.SocketService(`[SocketService: handleChannelCreated()] context=${e.state.context} on 'channel_created-${t}'`,n),e.emit(ie.CHANNEL_CREATED,n)}}},{event:ie.CLIENTS_DISCONNECTED,handler:function(e,t){return()=>{var n;e.state.clientsConnected=!1,Z.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}'`),e.remote.state.relayPersistence?Z.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}' - relayPersistence enabled, skipping key exchange cleanup.`):(e.state.isOriginator&&!e.state.clientsPaused&&((n=e.state.keyExchange)===null||n===void 0||n.clean()),e.emit(ie.CLIENTS_DISCONNECTED,t))}}},{event:ie.CONFIG,handler:function(e,t){return n=>te(this,void 0,void 0,function*(){var r,o,i;Z.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${t}'`,n);let{persistence:s,walletKey:a}=n;e.state.isOriginator&&e.remote.state.channelConfig?(n.walletKey&&!e.remote.state.channelConfig.otherKey&&(Z.SocketService(`Setting wallet key ${a}`),e.remote.state.channelConfig.otherKey=a,e.getKeyExchange().setOtherPublicKey(n.walletKey),(r=e.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield e.remote.sendMessage({type:Fe.KEY_HANDSHAKE_ACK}),yield e.remote.sendMessage({type:We.PING}),yield(o=e.remote.state.storageManager)===null||o===void 0?void 0:o.persistChannelConfig(e.remote.state.channelConfig)),s!==!0||e.remote.state.channelConfig.relayPersistence||(Z.SocketService(`Setting relay persistence ${s}`),e.remote.state.channelConfig.relayPersistence=s,e.remote.state.relayPersistence=!0,e.remote.emit(ie.CHANNEL_PERSISTENCE),e.remote.state.authorized=!0,e.remote.state.ready=!0,e.remote.emit(ie.AUTHORIZED),yield(i=e.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(e.remote.state.channelConfig))):e.state.isOriginator||n.persistence&&(e.remote.state.relayPersistence=!0,e.remote.emit(ie.CHANNEL_PERSISTENCE))})}},{event:ie.MESSAGE,handler:function(e,t){return n=>{var r,o,i,s,a,c,l,u,d,f,h,p,g,w,m,D,b,O;let{ackId:N,message:z,error:q}=n,U=(r=e.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(Z.SocketService(`[SocketService handleMessage()]  relayPersistence=${U}  context=${e.state.context} on 'message' ${t} keysExchanged=${(o=e.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged()}`,n),q)throw Z.SocketService(`
      [SocketService handleMessage()] context=${e.state.context}::on 'message' error=${q}`),new Error(q);let W=typeof z=="string";if(!W&&z?.type===Fe.KEY_HANDSHAKE_START)return U?void 0:(Z.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received HANDSHAKE_START isOriginator=${e.state.isOriginator}`,z),void((i=e.state.keyExchange)===null||i===void 0||i.start({isOriginator:(s=e.state.isOriginator)!==null&&s!==void 0&&s,force:!0})));if(!W&&(!((a=z?.type)===null||a===void 0)&&a.startsWith("key_handshake")))return U?void 0:(Z.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' emit KEY_EXCHANGE`,z),void e.emit(pd.KEY_EXCHANGE,{message:z,context:e.state.context}));if(W&&!(!((c=e.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let A=!1;try{Z.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' trying to decrypt message`),(l=e.state.keyExchange)===null||l===void 0||l.decryptMessage(z),A=!0}catch(M){Z.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' error`,M)}if(!A)return e.state.isOriginator?(d=e.state.keyExchange)===null||d===void 0||d.start({isOriginator:(f=e.state.isOriginator)!==null&&f!==void 0&&f}):e.sendMessage({type:Fe.KEY_HANDSHAKE_START}).catch(M=>{}),void Z.SocketService(`Message ignored because invalid key exchange status. step=${(h=e.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(p=e.state.keyExchange)===null||p===void 0?void 0:p.getKeyInfo(),z);Z.SocketService("Invalid key exchange status detected --- updating it."),(u=e.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!W&&z?.type)return void e.emit(ie.MESSAGE,z);if(!W)return void e.emit(ie.MESSAGE,z);let $=(g=e.state.keyExchange)===null||g===void 0?void 0:g.decryptMessage(z),R=JSON.parse($??"{}");if(N&&N?.length>0&&(Z.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' ackid=${N} channelId=${t}`),(w=e.state.socket)===null||w===void 0||w.emit(ie.MESSAGE_ACK,{ackId:N,channelId:t,clientType:e.state.isOriginator?"dapp":"wallet"})),e.state.clientsPaused=R?.type===We.PAUSE,e.state.isOriginator&&R.data){let A=R.data,M=e.state.rpcMethodTracker[A.id];if(M){let k=Date.now()-M.timestamp;Z.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received answer for id=${A.id} method=${M.method} responseTime=${k}`,R),e.remote.state.analytics&&ED.includes(M.method.toLowerCase())&&Tr(Object.assign(Object.assign({id:(m=e.remote.state.channelId)!==null&&m!==void 0?m:"",event:Je.SDK_RPC_REQUEST_DONE,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:vo.version},e.remote.state.originatorInfo),{walletVersion:(D=e.remote.state.walletInfo)===null||D===void 0?void 0:D.version,params:{method:M.method,from:"mobile"}}),e.remote.state.communicationServerUrl).catch(V=>{});let B=Object.assign(Object.assign({},M),{result:A.result,error:A.error?{code:(b=A.error)===null||b===void 0?void 0:b.code,message:(O=A.error)===null||O===void 0?void 0:O.message}:void 0,elapsedTime:k});e.state.rpcMethodTracker[A.id]=B,e.emit(ie.RPC_UPDATE,B)}}e.emit(ie.MESSAGE,{message:R})}}},{event:ie.REJECTED,handler:function(e,t){return n=>te(this,void 0,void 0,function*(){var r;e.state.isOriginator&&!e.remote.state.ready?(Z.SocketService(`[SocketService: handleChannelRejected()] context=${e.state.context} channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`,e.remote.state.originatorInfo),Tr(Object.assign(Object.assign({id:t,event:Je.REJECTED},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:vo.version,walletVersion:(r=e.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),e.remote.state.communicationServerUrl).catch(o=>{}),yield e.remote.disconnect({terminate:!0}),e.remote.emit(ie.REJECTED,{channelId:t}),e.remote.setConnectionStatus(gt.DISCONNECTED)):Z.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(e,t){return n=>{Z.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${e.state.context} on 'clients_waiting_to_join-${t}'`,n),e.emit(ie.CLIENTS_WAITING,n)}}}],e2=[{event:ie.KEY_INFO,handler:function(e){return t=>{Z.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",t),e.emit(ie.KEY_INFO,t)}}},{event:ie.KEYS_EXCHANGED,handler:function(e){return()=>{var t,n,r;Z.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(t=e.state.keyExchange)===null||t===void 0?void 0:t.areKeysExchanged()}`);let{channelConfig:o}=e.remote.state;if(o){let s=e.getKeyExchange().getKeyInfo().ecies;o.localKey=s.private,o.otherKey=s.otherPubKey,e.remote.state.channelConfig=o,(n=e.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(o).catch(a=>{})}e.emit(ie.KEYS_EXCHANGED,{keysExchanged:(r=e.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:e.state.isOriginator});let i={keyInfo:e.getKeyInfo()};e.emit(ie.SERVICE_STATUS,i)}}}];function x_(e,t){Z.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} setting socket listeners for channel ${t}...`);let{socket:n}=e.state,{keyExchange:r}=e.state;n&&e.state.isOriginator&&(e.state.debug&&(n?.io.on("error",o=>{Z.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=error`,o)}),n?.io.on("reconnect",o=>{Z.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect`,o),Kg(e).catch(i=>{})}),n?.io.on("reconnect_error",o=>{Z.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_error`,o)}),n?.io.on("reconnect_failed",()=>{Z.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_failed`)})),n?.on("disconnect",o=>(Z.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${o}' begin recovery...`),function(i){return s=>{Z.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${i.state.manualDisconnect}`,s),i.state.manualDisconnect||(i.emit(ie.SOCKET_DISCONNECTED),Kg(i).catch(a=>{}))}}(e)(o)))),XO.forEach(({event:o,handler:i})=>{n?.on(`${o}-${t}`,i(e,t))}),e2.forEach(({event:o,handler:i})=>{r?.on(o,i(e))}),e.state.setupChannelListeners=!0}var qg=class extends Es.EventEmitter2{constructor(t){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=t;let{reconnect:n,communicationLayerPreference:r,communicationServerUrl:o,context:i,remote:s,logging:a}=t;this.state.resumed=n,this.state.context=i,this.state.isOriginator=s.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=a?.serviceLayer===!0,this.remote=s,a?.serviceLayer===!0&&Ct.default.enable("SocketService:Layer"),this.state.communicationServerUrl=o,this.state.hasPlaintext=this.state.communicationServerUrl!==ms&&a?.plaintext===!0,Z.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var t;let{otherPublicKey:n,ecies:r,logging:o}=this.options,i={autoConnect:!1,transports:YO,withCredentials:!0},s=this.state.communicationServerUrl;Z.SocketService(`[SocketService: initSocket()] Socket IO url: ${s}`),this.state.socket=ya(s,i),function(c){if(typeof window<"u"&&typeof document<"u"&&(Z.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){let l=()=>{Z.SocketService("Document has focus --- reconnecting socket"),Kg(c).catch(u=>{})};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}}(this);let a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(t=this.state.context)!==null&&t!==void 0?t:"",ecies:r,logging:o};this.state.keyExchange=new zg(a)}resetKeys(){return Z.SocketService("[SocketService: resetKeys()] Resetting keys."),void((t=this.state.keyExchange)===null||t===void 0||t.resetKeys());var t}createChannel(){return te(this,void 0,void 0,function*(){return function(t){return te(this,void 0,void 0,function*(){var n,r,o;if(Z.SocketService(`[SocketService: createChannel()] context=${t.state.context}`),t.state.socket||t.initSocket(),(n=t.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=t.state.socket)===null||r===void 0||r.connect(),t.state.manualDisconnect=!1,t.state.isOriginator=!0;let i=aa();t.state.channelId=i,x_(t,i),yield new Promise((a,c)=>{var l;(l=t.state.socket)===null||l===void 0||l.emit(ie.JOIN_CHANNEL,{channelId:i,context:`${t.state.context}createChannel`,clientType:"dapp"},(u,d)=>te(this,void 0,void 0,function*(){try{yield Vu(t,u,d),a()}catch(f){c(f)}}))});let s=(o=t.state.keyExchange)===null||o===void 0?void 0:o.getKeyInfo();return{channelId:i,pubKey:s?.ecies.public||"",privKey:s?.ecies.private||""}})}(this)})}connectToChannel({channelId:t,withKeyExchange:n=!1,authorized:r}){return function(o){return te(this,arguments,void 0,function*({options:i,instance:s}){let{channelId:a,authorized:c,withKeyExchange:l}=i,{state:u,remote:d}=s,{isOriginator:f=!1,socket:h,keyExchange:p}=u,{channelConfig:g}=d.state;if(h?.connected)throw new Error("socket already connected");if(f&&g?.relayPersistence){let{localKey:w,otherKey:m}=g;w&&m&&p?.setRelayPersistence({localKey:w,otherKey:m})}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:f,channelId:a}),h?.connect(),x_(s,a),!f&&c&&(p?.setKeysExchanged(!0),Object.assign(d.state,{ready:!0,authorized:!0})),new Promise(w=>{var m;let D=(m=p?.getKeyInfo())===null||m===void 0?void 0:m.ecies.public;h?.emit(ie.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:f?"dapp":"wallet",publicKey:c&&!f?D:void 0},(b,O)=>te(this,void 0,void 0,function*(){yield Vu(s,b,O),w()}))})})}({options:{channelId:t,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var t,n;(n=(t=this).state.socket)===null||n===void 0||n.emit(ie.MESSAGE,{id:t.state.channelId,context:t.state.context,message:{type:Fe.KEY_HANDSHAKE_CHECK,pubkey:t.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(t){return te(this,void 0,void 0,function*(){return function(n,r){return te(this,void 0,void 0,function*(){var o,i,s;if(!n.state.channelId)throw Z.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(Z.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(o=n.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged()}`,r),(i=r?.type)===null||i===void 0?void 0:i.startsWith("key_handshake"))return function(c,l){var u;Z.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(ie.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})}(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw Z.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),function(c,l){var u;let d=(u=l?.method)!==null&&u!==void 0?u:"",f=l?.id;c.state.isOriginator&&f&&(c.state.rpcMethodTracker[f]={id:f,timestamp:Date.now(),method:d},c.emit(ie.RPC_UPDATE,c.state.rpcMethodTracker[f]))}(n,r);let a=yield wD(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&ED.includes(r.method.toLowerCase())&&Tr({id:(s=n.remote.state.channelId)!==null&&s!==void 0?s:"",event:Je.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch(c=>{}),function(c,l){return te(this,void 0,void 0,function*(){var u;let d=l?.id,f=(u=l?.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&d)try{let h=M_(d,c.state.rpcMethodTracker,200).then(w=>({type:ls.RPC_CHECK,result:w})),p=te(this,void 0,void 0,function*(){let w=yield(D=>te(void 0,[D],void 0,function*({rpcId:b,instance:O}){for(;O.state.lastRpcId===b||O.state.lastRpcId===void 0;)yield hs(200);return O.state.lastRpcId}))({instance:c,rpcId:d}),m=yield M_(w,c.state.rpcMethodTracker,200);return{type:ls.SKIPPED_RPC,result:m}}),g=yield Promise.race([h,p]);if(g.type===ls.RPC_CHECK){let w=g.result;Z.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${f} ( ${w.elapsedTime} ms)`,w.result)}else{if(g.type!==ls.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${d}`);{let w=Object.assign(Object.assign({},c.state.rpcMethodTracker[d]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(ie.RPC_UPDATE,w);let m={data:Object.assign(Object.assign({},w),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(ie.MESSAGE,{message:m})}}}catch(h){throw h}})}(n,r).catch(c=>{}),a})}(this,t)})}ping(){return function(t){return te(this,void 0,void 0,function*(){var n,r;Z.SocketService(`[SocketService: ping()] context=${t.state.context} originator=${t.state.isOriginator} keysExchanged=${(n=t.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=t.state.socket)===null||r===void 0||r.emit(We.PING,{id:t.state.channelId,context:"ping",clientType:t.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(t){return te(this,void 0,void 0,function*(){var n,r;Z.SocketService(`[SocketService: pause()] context=${t.state.context}`),t.state.manualDisconnect=!0,!((n=t.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield t.sendMessage({type:We.PAUSE})),(r=t.state.socket)===null||r===void 0||r.disconnect()})}(this)}isConnected(){var t;return(t=this.state.socket)===null||t===void 0?void 0:t.connected}resume(){return function(t){return te(this,void 0,void 0,function*(){let{state:n,remote:r}=t,{socket:o,channelId:i,context:s,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(Z.SocketService(`[SocketService: resume()] channelId=${i} context=${s} connected=${o?.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a?.areKeysExchanged()}`),!i)throw Z.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");o?.connected?(Z.SocketService("[SocketService: resume()] already connected."),o.emit(We.PING,{id:i,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a?.areKeysExchanged()||(c?yield t.sendMessage({type:We.READY}):a?.start({isOriginator:!1}))):(o?.connect(),Z.SocketService(`[SocketService: resume()] after connecting socket --> connected=${o?.connected}`),o?.emit(ie.JOIN_CHANNEL,{channelId:i,context:`${s}_resume`,clientType:l?"dapp":"wallet"},(u,d)=>te(this,void 0,void 0,function*(){try{yield Vu(t,u,d)}catch{}}))),n.manualDisconnect=!1,n.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(t){return function(n,r){var o,i,s,a,c;Z.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r?.terminate&&((i=(o=n.state).removeFocusListener)===null||i===void 0||i.call(o),n.state.channelId=r.channelId,(s=n.state.socket)===null||s===void 0||s.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()}(this,t)}},ti,bt,A_;function t2(e){return()=>te(this,void 0,void 0,function*(){var t,n,r;let{state:o}=e;if(o.authorized)return;yield te(this,void 0,void 0,function*(){for(;!o.walletInfo;)yield hs(500)});let i="7.3".localeCompare(((t=o.walletInfo)===null||t===void 0?void 0:t.version)||"");if(Z.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=o.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${i}`),i!==1)return;let s=o.platformType===bt.MobileWeb||o.platformType===bt.ReactNative||o.platformType===bt.MetaMaskMobileWebview;Z.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${o.platformType} secure=${s} channel=${o.channelId} walletVersion=${(r=o.walletInfo)===null||r===void 0?void 0:r.version}`),s&&(o.authorized=!0,e.emit(ie.AUTHORIZED))})}function n2(e){return t=>{let{state:n}=e;Z.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${t}`),e.emit(ie.CHANNEL_CREATED,t)}}function r2(e,t){return()=>{var n,r,o,i;let{state:s}=e;Z.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${s.channelId} keysExchanged=${(r=(n=s.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),s.analytics&&Tr(Object.assign(Object.assign({id:(o=s.channelId)!==null&&o!==void 0?o:"",event:s.reconnection?Je.RECONNECT:s.isOriginator?Je.REQUEST:Je.REQUEST_MOBILE},s.originatorInfo),{commLayer:t,sdkVersion:s.sdkVersion,walletVersion:(i=s.walletInfo)===null||i===void 0?void 0:i.version,commLayerVersion:vo.version}),s.communicationServerUrl).catch(a=>{}),s.clientsConnected=!0,s.originatorInfoSent=!1,e.emit(ie.CLIENTS_CONNECTED)}}function o2(e){return t=>{let{state:n}=e;Z.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${t}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),e.emit(ie.CLIENTS_DISCONNECTED,n.channelId),e.setConnectionStatus(gt.DISCONNECTED)}}function i2(e){return t=>{var n;let{state:r}=e;if(Z.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${t} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),e.setConnectionStatus(gt.WAITING),e.emit(ie.CLIENTS_WAITING,t),r.originatorConnectStarted){Z.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);let o=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,i=setTimeout(()=>{Z.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${o}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||e.setConnectionStatus(gt.TIMEOUT),clearTimeout(i)},o)}}}function s2(e,t){return n=>{var r,o,i,s,a,c,l,u;let{state:d}=e;if(Z.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),(o=(r=d.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||o===void 0?void 0:o.keysExchanged){let f=Object.assign(Object.assign({},d.channelConfig),{channelId:(i=d.channelId)!==null&&i!==void 0?i:"",validUntil:((s=d.channelConfig)===null||s===void 0?void 0:s.validUntil)||ys,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=d.storageManager)===null||a===void 0||a.persistChannelConfig(f).catch(h=>{}),e.setConnectionStatus(gt.LINKED)}(function(f,h){var p,g,w,m,D,b,O,N;let{state:z}=f;Z.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${z.channelId}`,h);let q=Object.assign(Object.assign({},z.channelConfig),{channelId:(p=z.channelId)!==null&&p!==void 0?p:"",validUntil:(w=(g=z.channelConfig)===null||g===void 0?void 0:g.validUntil)!==null&&w!==void 0?w:0,relayPersistence:z.relayPersistence,localKey:(D=(m=z.communicationLayer)===null||m===void 0?void 0:m.state.keyExchange)===null||D===void 0?void 0:D.getKeyInfo().ecies.private,otherKey:(O=(b=z.communicationLayer)===null||b===void 0?void 0:b.state.keyExchange)===null||O===void 0?void 0:O.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(N=z.storageManager)===null||N===void 0||N.persistChannelConfig(q)})(e,new Date),d.analytics&&d.channelId&&Tr(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?Je.CONNECTED:Je.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:t,commLayerVersion:vo.version,walletVersion:(c=d.walletInfo)===null||c===void 0?void 0:c.version}),d.communicationServerUrl).catch(f=>{}),d.isOriginator=n.isOriginator,n.isOriginator||((l=d.communicationLayer)===null||l===void 0||l.sendMessage({type:We.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&((u=d.communicationLayer)===null||u===void 0||u.sendMessage({type:We.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function a2(e){return t=>{let n=t;t.message&&(n=n.message),function(r,o){let{state:i}=o;if(Z.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${i.context} on 'message' typeof=${typeof r}`,r),o.state.ready=!0,i.isOriginator||r.type!==We.ORIGINATOR_INFO)if(i.isOriginator&&r.type===We.WALLET_INFO)(function(s,a){let{state:c}=s;c.walletInfo=a.walletInfo,c.paused=!1})(o,r);else{if(i.isOriginator&&r.type===We.WALLET_INIT)(function(s,a){return te(this,void 0,void 0,function*(){var c,l,u;let{state:d}=s;if(d.isOriginator){let f=a.data||{};if(typeof f=="object"&&"accounts"in f&&"chainId"in f&&"walletKey"in f)try{let{channelConfig:h}=s.state;if(Z.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){let p=f.accounts,g=f.chainId,w=f.walletKey,m,D=!1;"deeplinkProtocol"in f&&(D=!!f.deeplinkProtocol,s.state.deeplinkProtocolAvailable=D),"walletVersion"in f&&(m=f.walletVersion),yield(c=s.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:w,walletVersion:m,deeplinkProtocolAvailable:D,relayPersistence:!0})),yield(l=s.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(p),yield(u=s.state.storageManager)===null||u===void 0?void 0:u.persistChainId(g)}s.emit(ie.WALLET_INIT,{accounts:f.accounts,chainId:f.chainId})}catch{}}})})(o,r).catch(s=>{Z.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)});else if(r.type===We.TERMINATE)(function(s){return te(this,void 0,void 0,function*(){let{state:a}=s;a.isOriginator&&(yield bD({options:{terminate:!0,sendMessage:!1},instance:s}),s.emit(ie.TERMINATE))})})(o).catch(s=>{Z.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)});else if(r.type===We.PAUSE)(function(s){let{state:a}=s;a.paused=!0,s.setConnectionStatus(gt.PAUSED)})(o);else if(r.type===We.READY&&i.isOriginator)(function(s){let{state:a}=s;s.setConnectionStatus(gt.LINKED);let c=a.paused;a.paused=!1,s.emit(ie.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,s.emit(ie.AUTHORIZED))})(o);else{if(r.type===We.OTP&&i.isOriginator)return void function(s,a){var c;let{state:l}=s;s.emit(ie.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&s.emit(ie.SDK_RPC_CALL,{method:QO.ETH_REQUESTACCOUNTS,params:[]})}(o,r);r.type===We.AUTHORIZED&&i.isOriginator&&function(s){let{state:a}=s;a.authorized=!0,s.emit(ie.AUTHORIZED)}(o)}o.emit(ie.MESSAGE,r)}else(function(s,a){var c;let{state:l}=s;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:We.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,s.emit(ie.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(o,r)}(n,e)}}function c2(e){return()=>{let{state:t}=e;Z.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),t.ready=!1,t.authorized=!1,vD(t),e.emitServiceStatusEvent({context:"socket_reconnect"})}}function l2(e){return()=>{let{state:t}=e;Z.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),t.ready=!1}}function u2(e){return()=>te(this,void 0,void 0,function*(){var t,n,r,o,i,s,a;let{state:c}=e;Z.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),e.state.ready=!0,e.state.clientsConnected=!0,e.state.authorized=!0,e.state.relayPersistence=!0,(t=e.state.communicationLayer)===null||t===void 0||t.getKeyExchange().setKeysExchanged(!0),e.emit(ie.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),e.emit(ie.AUTHORIZED),e.emit(ie.CLIENTS_READY),e.emit(ie.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(o=c.channelId)!==null&&o!==void 0?o:"",validUntil:(s=(i=c.channelConfig)===null||i===void 0?void 0:i.validUntil)!==null&&s!==void 0?s:ys,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}})}function k_({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,ecies:r,communicationServerUrl:o=ms,instance:i}){var s,a,c,l,u,d,f,h,p,g,w;let{state:m}=i;if(Z.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(m,null,2)),e!==ti.SOCKET)throw new Error("Invalid communication protocol");m.communicationLayer=new qg({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,transports:m.transports,communicationServerUrl:o,context:m.context,ecies:r,logging:m.logging,remote:i});let D=typeof document<"u"&&document.URL||"",b=typeof document<"u"&&document.title||"";!((s=m.dappMetadata)===null||s===void 0)&&s.url&&(D=m.dappMetadata.url),!((a=m.dappMetadata)===null||a===void 0)&&a.name&&(b=m.dappMetadata.name);let O=(d=(l=(c=m.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=m.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&d!==void 0?d:"N/A",N=typeof window<"u"&&window.location!==void 0&&(f=window.location.hostname)!==null&&f!==void 0?f:O,z={url:D,title:b,source:(h=m.dappMetadata)===null||h===void 0?void 0:h.source,dappId:N,icon:((p=m.dappMetadata)===null||p===void 0?void 0:p.iconUrl)||((g=m.dappMetadata)===null||g===void 0?void 0:g.base64Icon),platform:m.platformType,apiVersion:vo.version,connector:(w=m.dappMetadata)===null||w===void 0?void 0:w.connector};m.originatorInfo=z;let q={[ie.AUTHORIZED]:t2(i),[ie.MESSAGE]:a2(i),[ie.CHANNEL_PERSISTENCE]:u2(i),[ie.CLIENTS_CONNECTED]:r2(i,e),[ie.KEYS_EXCHANGED]:s2(i,e),[ie.SOCKET_DISCONNECTED]:l2(i),[ie.SOCKET_RECONNECT]:c2(i),[ie.CLIENTS_DISCONNECTED]:o2(i),[ie.KEY_INFO]:()=>{},[ie.CHANNEL_CREATED]:n2(i),[ie.CLIENTS_WAITING]:i2(i),[ie.RPC_UPDATE]:U=>{i.emit(ie.RPC_UPDATE,U)}};for(let[U,W]of Object.entries(q))try{m.communicationLayer.on(U,W)}catch{}}function bD(e){return te(this,arguments,void 0,function*({options:t,instance:n}){let{state:r}=n;return Z.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,t),new Promise((o,i)=>{var s,a,c,l,u,d;t?.terminate?(n.state.ready&&Tr({id:(s=n.state.channelId)!==null&&s!==void 0?s:"",event:Je.TERMINATED},n.state.communicationServerUrl).catch(f=>{}),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,t.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&wD(n.state.communicationLayer,{type:We.TERMINATE}).then(()=>{o(!0)}).catch(f=>{i(f)}):o(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=aa(),t.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(t),n.setConnectionStatus(gt.TERMINATED)):((d=r.communicationLayer)===null||d===void 0||d.disconnect(t),n.setConnectionStatus(gt.DISCONNECTED),o(!0))})})}(ti||(ti={})).SOCKET="socket",function(e){e.NonBrowser="nodejs",e.MetaMaskMobileWebview="in-app-browser",e.DesktopWeb="web-desktop",e.MobileWeb="web-mobile",e.ReactNative="react-native"}(bt||(bt={}));var Wg=class extends Es.EventEmitter2{constructor(t){super(),this.state={ready:!1,authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:ms,context:"",persist:!1,clientsConnected:!1,sessionDuration:ys,originatorConnectStarted:!1,debug:!1,_connectionStatus:gt.DISCONNECTED},this._options=t;let{platformType:n,communicationLayerPreference:r,otherPublicKey:o,reconnect:i,walletInfo:s,dappMetadata:a,protocolVersion:c,transports:l,context:u,relayPersistence:d,ecies:f,analytics:h=!1,storage:p,sdkVersion:g,communicationServerUrl:w=ms,logging:m,autoConnect:D={timeout:JO}}=t;this.state.otherPublicKey=o,this.state.dappMetadata=a,this.state.walletInfo=s,this.state.transports=l,this.state.platformType=n,this.state.analytics=h,this.state.protocolVersion=c??1,this.state.isOriginator=!o,this.state.relayPersistence=d,this.state.communicationServerUrl=w,this.state.context=u,this.state.terminated=!1,this.state.sdkVersion=g,this.setMaxListeners(50),this.setConnectionStatus(gt.DISCONNECTED),p?.duration&&(this.state.sessionDuration=ys),this.state.storageOptions=p,this.state.autoConnectOptions=D,this.state.debug=m?.remoteLayer===!0,m?.remoteLayer===!0&&Ct.default.enable("RemoteCommunication:Layer"),m?.serviceLayer===!0&&Ct.default.enable("SocketService:Layer"),m?.eciesLayer===!0&&Ct.default.enable("ECIES:Layer"),m?.keyExchangeLayer===!0&&Ct.default.enable("KeyExchange:Layer"),this.state.logging=m,p?.storageManager&&(this.state.storageManager=p.storageManager),Z.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${c} relayPersistence=${d} isOriginator=${this.state.isOriginator} communicationLayerPreference=${r} otherPublicKey=${o} reconnect=${i}`),this.state.isOriginator||k_({communicationLayerPreference:r,otherPublicKey:o,reconnect:i,ecies:f,communicationServerUrl:w,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return te(this,void 0,void 0,function*(){var t;if(this.state.storageManager){let n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(t=n.deeplinkProtocolAvailable)!==null&&t!==void 0&&t,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(gt.LINKED),yield this.connectToChannel({channelId:n.channelId})))}k_({communicationLayerPreference:ti.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return te(this,void 0,void 0,function*(){return yield function(t){return te(this,void 0,void 0,function*(){var n;let{state:r}=t;if(!r.storageManager)return void Z.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");let o=yield r.storageManager.getPersistedChannelConfig({});if(Z.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,o),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return Z.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),o;if(o){if(o.validUntil>Date.now())return r.channelConfig=o,r.originatorConnectStarted=!0,r.channelId=o?.channelId,r.reconnection=!0,o;Z.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return te(this,void 0,void 0,function*(){return function(t){return te(this,void 0,void 0,function*(){var n,r,o,i,s,a;if(!t.communicationLayer)throw new Error("communication layer not initialized");if(t.ready)throw new Error("Channel already connected");if(t.channelId&&(!((n=t.communicationLayer)===null||n===void 0)&&n.isConnected()))return t.channelConfig=Object.assign(Object.assign({},t.channelConfig),{channelId:t.channelId,validUntil:Date.now()+t.sessionDuration}),(r=t.storageManager)===null||r===void 0||r.persistChannelConfig(t.channelConfig),{channelId:t.channelId,privKey:(i=(o=t.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||i===void 0?void 0:i.ecies.private,pubKey:(a=(s=t.communicationLayer)===null||s===void 0?void 0:s.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};Z.RemoteCommunication("[RemoteCommunication: generateChannelId()]");let c=yield t.communicationLayer.createChannel();Z.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);let l=Object.assign(Object.assign({},t.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+t.sessionDuration});return t.channelId=c.channelId,t.channelConfig=l,{channelId:t.channelId,pubKey:c.pubKey,privKey:c.privKey}})}(this.state)})}clean(){return vD(this.state)}connectToChannel({channelId:t,withKeyExchange:n,authorized:r}){return function(o){return te(this,arguments,void 0,function*({channelId:i,withKeyExchange:s,authorized:a,state:c}){var l,u,d;if(!qi(i))throw Z.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${i}`),new Error(`Invalid channel ${i}`);if(Z.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${i} withKeyExchange=${s}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void Z.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=i,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:i,authorized:a,withKeyExchange:s});let f=Object.assign(Object.assign({},c.channelConfig),{channelId:i,validUntil:Date.now()+c.sessionDuration});c.channelConfig=f,(d=c.storageManager)===null||d===void 0||d.persistChannelConfig(f)})}({channelId:t,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(t){return function(n,r){return te(this,void 0,void 0,function*(){var o,i;let{state:s}=n;Z.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${s.context} paused=${s.paused} ready=${s.ready} relayPersistence=${s.relayPersistence} authorized=${s.authorized} socket=${(o=s.communicationLayer)===null||o===void 0?void 0:o.isConnected()} clientsConnected=${s.clientsConnected} status=${s._connectionStatus}`,r),s.relayPersistence||s.ready&&(!((i=s.communicationLayer)===null||i===void 0)&&i.isConnected())&&s.clientsConnected||(Z.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${s.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(a=>{n.once(ie.CLIENTS_READY,a)}),Z.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${s.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(c,l){return te(this,void 0,void 0,function*(){return new Promise(u=>{var d;let{state:f}=c;Z.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${f.context} ready=${f.ready} authorized=${f.authorized} method=${l.method}`),!f.isOriginator||f.authorized||f.relayPersistence?(d=f.communicationLayer)===null||d===void 0||d.sendMessage(l).then(h=>{u(h)}).catch(h=>{u(!1)}):c.once(ie.AUTHORIZED,()=>{var h;Z.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${f.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(h=f.communicationLayer)===null||h===void 0||h.sendMessage(l).then(p=>{u(p)}).catch(p=>{u(!1)})})})})}(n,r)}catch(a){throw a}})}(this,t)}testStorage(){return te(this,void 0,void 0,function*(){return function(t){return te(this,void 0,void 0,function*(){var n;let r=yield(n=t.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();Z.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var t;return(t=this.state.communicationLayer)===null||t===void 0?void 0:t.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return te(this,void 0,void 0,function*(){var t;Z.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(t=this.state.communicationLayer)===null||t===void 0?void 0:t.ping()})}testLogger(){Z.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),Z.SocketService(`testLogger() channel=${this.state.channelId}`),Z.Ecies(`testLogger() channel=${this.state.channelId}`),Z.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var t;Z.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(t=this.state.communicationLayer)===null||t===void 0||t.keyCheck()}setConnectionStatus(t){this.state._connectionStatus!==t&&(this.state._connectionStatus=t,this.emit(ie.CONNECTION_STATUS,t),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(t={}){this.emit(ie.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var t;return(t=this.state.communicationLayer)===null||t===void 0?void 0:t.getKeyInfo()}resetKeys(){var t;(t=this.state.communicationLayer)===null||t===void 0||t.resetKeys()}setOtherPublicKey(t){var n;let r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==t&&r.setOtherPublicKey(t)}pause(){return te(this,void 0,void 0,function*(){var t;Z.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(t=this.state.communicationLayer)===null||t===void 0?void 0:t.pause(),this.setConnectionStatus(gt.PAUSED)})}getVersion(){return vo.version}hasRelayPersistence(){var t;return(t=this.state.relayPersistence)!==null&&t!==void 0&&t}resume(){return te(this,void 0,void 0,function*(){return function(t){return te(this,void 0,void 0,function*(){var n;let{state:r}=t;Z.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),t.setConnectionStatus(gt.LINKED)})}(this)})}encrypt(t){var n,r,o;let i=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),s=i?.getOtherPublicKey();if(!s)throw new Error("KeyExchange not completed");return(o=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||o===void 0?void 0:o.encrypt(t,s)}decrypt(t){var n,r,o;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(o=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||o===void 0?void 0:o.decrypt(t)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var t;return(t=this.state.communicationLayer)===null||t===void 0?void 0:t.getRPCMethodTracker()}reject({channelId:t}){return function(n){return te(this,arguments,void 0,function*({channelId:r,state:o}){var i,s,a;if(!qi(r))throw Z.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${o.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(o.isOriginator)return void Z.RemoteCommunication(`[RemoteCommunication: reject()] context=${o.context} isOriginator=${o.isOriginator} channelId=${r}`);let{socket:c}=(s=(i=o.communicationLayer)===null||i===void 0?void 0:i.state)!==null&&s!==void 0?s:{};c?.connected||(Z.RemoteCommunication(`[RemoteCommunication: reject()] context=${o.context} socket already connected`),c?.connect()),Tr(Object.assign(Object.assign({id:r,event:Je.REJECTED},o.originatorInfo),{sdkVersion:o.sdkVersion,commLayerVersion:vo.version,walletVersion:(a=o.walletInfo)===null||a===void 0?void 0:a.version}),o.communicationServerUrl).catch(l=>{}),yield new Promise((l,u)=>{c?.emit(ie.REJECTED,{channelId:r},(d,f)=>{Z.RemoteCommunication(`[RemoteCommunication: reject()] context=${o.context} socket=${c?.id}`,{error:d,response:f}),d?u(d):l(f)})})})}({channelId:t,state:this.state})}disconnect(t){return te(this,void 0,void 0,function*(){return bD({options:t,instance:this})})}};(function(e){e.RENEW="renew",e.LINK="link"})(A_||(A_={}));var d2="ERC721",f2="ERC1155",Ye={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function h2(e){let t={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,o)=>{t.ethDecryptDeprecation||n.method!=="eth_decrypt"?t.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!t.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[d2,f2].includes(n.params?.type||"")&&(e.warn(Ye.warnings.rpc.walletWatchAssetNFTExperimental),t.walletWatchAssetNFTExperimental=!0):(e.warn(Ye.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),t.ethGetEncryptionPublicKeyDeprecation=!0):(e.warn(Ye.warnings.rpc.ethDecryptDeprecation),t.ethDecryptDeprecation=!0),o()}}var _D=4294967295,N_=Math.floor(Math.random()*_D);function p2(){return(e,t,n,r)=>{let o=e.id,i=N_=(N_+1)%_D;e.id=i,t.id=i,n(s=>{e.id=o,t.id=o,s()})}}var Rm=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ho=(e,t,n)=>(Rm(e,t,"read from private field"),n?n.call(e):t.get(e)),An=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ku=(e,t,n,r)=>(Rm(e,t,"write to private field"),t.set(e,n),n),Mt=(e,t,n)=>(Rm(e,t,"access private method"),n),co={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},R_={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function O_(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}var gd=(e,t)=>Object.hasOwnProperty.call(e,t),Gg=class extends TypeError{constructor(t,n){let r,l=t,{message:o,explanation:i}=l,s=Xd(l,["message","explanation"]),{path:a}=t,c=a.length===0?o:`At path: ${a.join(".")} -- ${o}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}};function Ir(e){return typeof e=="object"&&e!=null}function nr(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function g2(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:o,branch:i}=t,{type:s}=n,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${nr(r)}\``}=e;return Se(de({value:r,type:s,refinement:a,key:o[o.length-1],path:o,branch:i},e),{message:c})}function*P_(e,t,n,r){(function(o){return Ir(o)&&typeof o[Symbol.iterator]=="function"})(e)||(e=[e]);for(let o of e){let i=g2(o,t,n,r);i&&(yield i)}}function*Om(e,t,n={}){let{path:r=[],branch:o=[e],coerce:i=!1,mask:s=!1}=n,a={path:r,branch:o};if(i&&(e=t.coercer(e,a),s&&t.type!=="type"&&Ir(t.schema)&&Ir(e)&&!Array.isArray(e)))for(let l in e)t.schema[l]===void 0&&delete e[l];let c="valid";for(let l of t.validator(e,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of t.entries(e,a)){let f=Om(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?o:[...o,u],coerce:i,mask:s,message:n.message});for(let h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):i&&(u=h[1],l===void 0?e=u:e instanceof Map?e.set(l,u):e instanceof Set?e.add(u):Ir(e)&&(u!==void 0||l in e)&&(e[l]=u))}if(c!=="not_valid")for(let l of t.refiner(e,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,e])}var Jt=class{constructor(t){let{type:n,schema:r,validator:o,refiner:i,coercer:s=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=r,this.entries=a,this.coercer=s,this.validator=o?(c,l)=>P_(o(c,l),l,this,c):()=>[],this.refiner=i?(c,l)=>P_(i(c,l),l,this,c):()=>[]}assert(t,n){return CD(t,this,n)}create(t,n){return DD(t,this,n)}is(t){return bs(t,this)}mask(t,n){return function(r,o,i){let s=Ha(r,o,{coerce:!0,mask:!0,message:i});if(s[0])throw s[0];return s[1]}(t,this,n)}validate(t,n={}){return Ha(t,this,n)}};function CD(e,t,n){let r=Ha(e,t,{message:n});if(r[0])throw r[0]}function DD(e,t,n){let r=Ha(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function bs(e,t){return!Ha(e,t)[0]}function Ha(e,t,n={}){let r=Om(e,t,n),o=function(i){let{done:s,value:a}=i.next();return s?void 0:a}(r);return o[0]?[new Gg(o[0],function*(){for(let s of r)s[0]&&(yield s[0])}),void 0]:[void 0,o[1]]}function wo(e,t){return new Jt({type:e,schema:null,validator:t})}function L_(e){let t;return new Jt({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function SD(e){return new Jt({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[n,r]of t.entries())yield[n,r,e]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${nr(t)}`})}function ID(e){let t=nr(e),n=typeof e;return new Jt({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${nr(r)}`})}function TD(){return wo("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${nr(e)}`)}function MD(e){let t=e?Object.keys(e):[],n=wo("never",()=>!1);return new Jt({type:"object",schema:e||null,*entries(r){if(e&&Ir(r)){let o=new Set(Object.keys(r));for(let i of t)o.delete(i),yield[i,r[i],e[i]];for(let i of o)yield[i,r[i],n]}},validator:r=>Ir(r)||`Expected an object, but received: ${nr(r)}`,coercer:r=>Ir(r)?de({},r):r})}function F_(e){return new Jt(Se(de({},e),{validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)}))}function xD(e,t){return new Jt({type:"record",schema:null,*entries(n){if(Ir(n))for(let r in n){let o=n[r];yield[r,r,e],yield[r,o,t]}},validator:n=>Ir(n)||`Expected an object, but received: ${nr(n)}`})}function Eo(){return wo("string",e=>typeof e=="string"||`Expected a string, but received: ${nr(e)}`)}function Fd(e){let t=e.map(n=>n.type).join(" | ");return new Jt({type:"union",schema:null,coercer(n){for(let r of e){let[o,i]=r.validate(n,{coerce:!0});if(!o)return i}return n},validator(n,r){let o=[];for(let i of e){let[...s]=Om(n,i,r),[a]=s;if(!a[0])return[];for(let[c]of s)c&&o.push(c)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${nr(n)}`,...o]}})}function m2(e){return function(t){return function(n){return typeof n=="object"&&n!==null&&"message"in n}(t)&&typeof t.message=="string"?t.message:t==null?"":String(t)}(e).replace(/\.$/u,"")}function y2(e,t){return n=e,typeof n?.prototype?.constructor?.name=="string"?new e({message:t}):e({message:t});var n}var v2=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};function AD(){throw new Error("setTimeout has not been defined")}function kD(){throw new Error("clearTimeout has not been defined")}var no=AD,ro=kD;function ND(e){if(no===setTimeout)return setTimeout(e,0);if((no===AD||!no)&&setTimeout)return no=setTimeout,setTimeout(e,0);try{return no(e,0)}catch{try{return no.call(null,e,0)}catch{return no.call(this,e,0)}}}typeof kt.setTimeout=="function"&&(no=setTimeout),typeof kt.clearTimeout=="function"&&(ro=clearTimeout);var Jo,Sr=[],ps=!1,$u=-1;function w2(){ps&&Jo&&(ps=!1,Jo.length?Sr=Jo.concat(Sr):$u=-1,Sr.length&&RD())}function RD(){if(!ps){var e=ND(w2);ps=!0;for(var t=Sr.length;t;){for(Jo=Sr,Sr=[];++$u<t;)Jo&&Jo[$u].run();$u=-1,t=Sr.length}Jo=null,ps=!1,function(n){if(ro===clearTimeout)return clearTimeout(n);if((ro===kD||!ro)&&clearTimeout)return ro=clearTimeout,clearTimeout(n);try{return ro(n)}catch{try{return ro.call(null,n)}catch{return ro.call(this,n)}}}(e)}}function OD(e,t){this.fun=e,this.array=t}OD.prototype.run=function(){this.fun.apply(null,this.array)};function ri(){}var E2=ri,b2=ri,_2=ri,C2=ri,D2=ri,S2=ri,I2=ri,rs=kt.performance||{},T2=rs.now||rs.mozNow||rs.msNow||rs.oNow||rs.webkitNow||function(){return new Date().getTime()},M2=new Date,Oe={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Sr.push(new OD(e,t)),Sr.length!==1||ps||ND(RD)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:E2,addListener:b2,once:_2,off:C2,removeListener:D2,removeAllListeners:S2,emit:I2,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*T2.call(rs),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M2)/1e3}},za=e=>MD(e);function B_({path:e,branch:t}){let n=e[e.length-1];return gd(t[t.length-2],n)}function md(e){return new Jt(Se(de({},e),{type:`optional ${e.type}`,validator:(t,n)=>!B_(n)||e.validator(t,n),refiner:(t,n)=>!B_(n)||e.refiner(t,n)}))}var Nu,j_,V_,yd=Fd([ID(null),wo("boolean",e=>typeof e=="boolean"),wo("finite number",e=>bs(e,TD())&&Number.isFinite(e)),Eo(),SD(L_(()=>yd)),xD(Eo(),L_(()=>yd))]),Ka=(Nu=yd,j_=wo("any",()=>!0),V_=e=>(function(t,n,r="Assertion failed",o=v2){try{CD(t,n)}catch(i){throw y2(o,`${r}: ${m2(i)}.`)}}(e,yd),JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="__proto__"&&t!=="constructor")return n}))),new Jt(Se(de({},Nu),{coercer:(e,t)=>bs(e,j_)?Nu.coercer(V_(e,t),t):Nu.coercer(e,t)})));function Zg(e){try{return function(t){DD(t,Ka)}(e),!0}catch{return!1}}var xa=ID("2.0"),Uu=function(e){return new Jt(Se(de({},e),{validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)}))}(Fd([TD(),Eo()])),Yg=za({code:wo("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${nr(e)}`),message:Eo(),data:md(Ka),stack:md(Eo())}),PD=Fd([xD(Eo(),Ka),SD(Ka)]),x2=za({id:Uu,jsonrpc:xa,method:Eo(),params:md(PD)}),A2=za({jsonrpc:xa,method:Eo(),params:md(PD)});function $_(e){return bs(e,x2)}function U_(e){return bs(e,Yg)}MD({id:Uu,jsonrpc:xa,result:F_(wo("unknown",()=>!0)),error:F_(Yg)}),Fd([za({id:Uu,jsonrpc:xa,result:Ka}),za({id:Uu,jsonrpc:xa,error:Yg})]);var H_=co.internal,k2="Unspecified error message. This is a bug, please report it.",N2={code:H_,message:LD(H_)},R2="Unspecified server error.";function LD(e,t=k2){if(function(n){return Number.isInteger(n)}(e)){let n=e.toString();if(gd(R_,n))return R_[n].message;if(function(r){return r>=-32099&&r<=-32e3}(e))return R2}return t}function z_(e,{fallbackError:t=N2,shouldIncludeStack:n=!0}={}){if(!U_(t))throw new Error("Must provide fallback error with integer number code and string message.");let r=function(o,i){if(o&&typeof o=="object"&&"serialize"in o&&typeof o.serialize=="function")return o.serialize();if(U_(o))return o;let s=FD(o);return Se(de({},i),{data:{cause:s}})}(e,t);return n||delete r.stack,r}function FD(e){return Array.isArray(e)?e.map(t=>Zg(t)?t:O_(t)?K_(t):null):O_(e)?K_(e):Zg(e)?e:null}function K_(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{let r=e[n];return Zg(r)&&(t[n]=r),t},{})}var BD=Da;Da.default=Da,Da.stable=q_,Da.stableStringify=q_;var vd="[...]",jD="[Circular]",ni=[],Qo=[];function VD(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Da(e,t,n,r){var o;r===void 0&&(r=VD()),Jg(e,"",0,[],void 0,0,r);try{o=Qo.length===0?JSON.stringify(e,t,n):JSON.stringify(e,$D(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ni.length!==0;){var i=ni.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return o}function gs(e,t,n,r){var o=Object.getOwnPropertyDescriptor(r,n);o.get!==void 0?o.configurable?(Object.defineProperty(r,n,{value:e}),ni.push([r,n,t,o])):Qo.push([t,n,e]):(r[n]=e,ni.push([r,n,t]))}function Jg(e,t,n,r,o,i,s){var a;if(i+=1,typeof e=="object"&&e!==null){for(a=0;a<r.length;a++)if(r[a]===e)return void gs(jD,e,t,o);if(s.depthLimit!==void 0&&i>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void gs(vd,e,t,o);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)Jg(e[a],a,a,r,e,i,s);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var l=c[a];Jg(e[l],l,a,r,e,i,s)}}r.pop()}}function O2(e,t){return e<t?-1:e>t?1:0}function q_(e,t,n,r){r===void 0&&(r=VD());var o,i=Qg(e,"",0,[],void 0,0,r)||e;try{o=Qo.length===0?JSON.stringify(i,t,n):JSON.stringify(i,$D(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ni.length!==0;){var s=ni.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function Qg(e,t,n,r,o,i,s){var a;if(i+=1,typeof e=="object"&&e!==null){for(a=0;a<r.length;a++)if(r[a]===e)return void gs(jD,e,t,o);try{if(typeof e.toJSON=="function")return}catch{return}if(s.depthLimit!==void 0&&i>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void gs(vd,e,t,o);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)Qg(e[a],a,a,r,e,i,s);else{var c={},l=Object.keys(e).sort(O2);for(a=0;a<l.length;a++){var u=l[a];Qg(e[u],u,a,r,e,i,s),c[u]=e[u]}if(o===void 0)return c;ni.push([o,t,e]),o[t]=c}r.pop()}}function $D(e){return e=e!==void 0?e:function(t,n){return n},function(t,n){if(Qo.length>0)for(var r=0;r<Qo.length;r++){var o=Qo[r];if(o[1]===t&&o[0]===n){n=o[2],Qo.splice(r,1);break}}return e.call(this,t,n)}}var P2=Pd(BD),wr=class extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a non-empty string.');super(t),this.code=e,n!==void 0&&(this.data=n)}serialize(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data,function(t){if(typeof t!="object"||t===null)return!1;try{let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}catch{return!1}}(this.data)&&(e.data.cause=FD(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return P2(this.serialize(),L2,2)}};function L2(e,t){if(t!=="[Circular]")return t}var Aa=e=>F2(co.invalidRequest,e);function F2(e,t){let[n,r]=function(o){if(o){if(typeof o=="string")return[o];if(typeof o=="object"&&!Array.isArray(o)){let{message:i,data:s}=o;if(i&&typeof i!="string")throw new Error("Must specify string message.");return[i??void 0,s]}}return[]}(t);return new wr(e,n??LD(e),r)}var UD={};function oo(){}function Le(){Le.init.call(this)}function HD(e){return e._maxListeners===void 0?Le.defaultMaxListeners:e._maxListeners}function W_(e,t,n,r){var o,i,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]):(i=e._events=new oo,e._eventsCount=0),s){if(typeof s=="function"?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=HD(e))&&o>0&&s.length>o){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,function(c){typeof console.warn=="function"?console.warn(c):console.log(c)}(a)}}else s=i[t]=n,++e._eventsCount;return e}function G_(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function Z_(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}function ba(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}oo.prototype=Object.create(null),Le.EventEmitter=Le,Le.usingDomains=!1,Le.prototype.domain=void 0,Le.prototype._events=void 0,Le.prototype._maxListeners=void 0,Le.defaultMaxListeners=10,Le.init=function(){this.domain=null,Le.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new oo,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Le.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Le.prototype.getMaxListeners=function(){return HD(this)},Le.prototype.emit=function(e){var t,n,r,o,i,s,a,c=e==="error";if(s=this._events)c=c&&s.error==null;else if(!c)return!1;if(a=this.domain,c){if(t=arguments[1],!a){if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(n=s[e]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(d,f,h){if(f)d.call(h);else for(var p=d.length,g=ba(d,p),w=0;w<p;++w)g[w].call(h)})(n,u,this);break;case 2:(function(d,f,h,p){if(f)d.call(h,p);else for(var g=d.length,w=ba(d,g),m=0;m<g;++m)w[m].call(h,p)})(n,u,this,arguments[1]);break;case 3:(function(d,f,h,p,g){if(f)d.call(h,p,g);else for(var w=d.length,m=ba(d,w),D=0;D<w;++D)m[D].call(h,p,g)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(d,f,h,p,g,w){if(f)d.call(h,p,g,w);else for(var m=d.length,D=ba(d,m),b=0;b<m;++b)D[b].call(h,p,g,w)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];(function(d,f,h,p){if(f)d.apply(h,p);else for(var g=d.length,w=ba(d,g),m=0;m<g;++m)w[m].apply(h,p)})(n,u,this,o)}return!0},Le.prototype.addListener=function(e,t){return W_(this,e,t,!1)},Le.prototype.on=Le.prototype.addListener,Le.prototype.prependListener=function(e,t){return W_(this,e,t,!0)},Le.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,G_(this,e,t)),this},Le.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,G_(this,e,t)),this},Le.prototype.removeListener=function(e,t){var n,r,o,i,s;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)--this._eventsCount==0?this._events=new oo:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new oo,this;delete r[e]}else(function(a,c){for(var l=c,u=l+1,d=a.length;u<d;l+=1,u+=1)a[l]=a[u];a.pop()})(n,o);r.removeListener&&this.emit("removeListener",e,s||t)}return this},Le.prototype.off=function(e,t){return this.removeListener(e,t)},Le.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new oo,this._eventsCount=0):n[e]&&(--this._eventsCount==0?this._events=new oo:delete n[e]),this;if(arguments.length===0){for(var r,o=Object.keys(n),i=0;i<o.length;++i)(r=o[i])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new oo,this._eventsCount=0,this}if(typeof(t=n[e])=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},Le.prototype.listeners=function(e){var t,n,r=this._events;return n=r&&(t=r[e])?typeof t=="function"?[t.listener||t]:function(o){for(var i=new Array(o.length),s=0;s<i.length;++s)i[s]=o[s].listener||o[s];return i}(t):[],n},Le.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Z_.call(e,t)},Le.prototype.listenerCount=Z_,Le.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Pm=Xa(Object.freeze({__proto__:null,EventEmitter:Le,default:Le}));Object.defineProperty(UD,"__esModule",{value:!0});var B2=Pm;function Y_(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}var j2=class extends B2.EventEmitter{emit(e,...t){let n=e==="error",r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let i;if(t.length>0&&([i]=t),i instanceof Error)throw i;let s=new Error("Unhandled error."+(i?` (${i.message})`:""));throw s.context=i,s}let o=r[e];if(o===void 0)return!1;if(typeof o=="function")Y_(o,this,t);else{let i=o.length,s=function(a){let c=a.length,l=new Array(c);for(let u=0;u<c;u+=1)l[u]=a[u];return l}(o);for(let a=0;a<i;a+=1)Y_(s[a],this,t)}return!0}},wd,lo,us,Sa,Hu,zu,Xg,Ku,em,lg,J_,qu,tm,ug,Q_,ka,Ed,dg,X_,zD=UD.default=j2,xn=class Wu extends zD{constructor({notificationHandler:t}={}){super(),An(this,Sa),An(this,zu),An(this,Ku),An(this,wd,!1),An(this,lo,void 0),An(this,us,void 0),ku(this,lo,[]),ku(this,us,t)}destroy(){ho(this,lo).forEach(t=>{"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}),ku(this,lo,[]),ku(this,wd,!0)}push(t){Mt(this,Sa,Hu).call(this),ho(this,lo).push(t)}handle(t,n){if(Mt(this,Sa,Hu).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?n?Mt(this,zu,Xg).call(this,t,n):Mt(this,zu,Xg).call(this,t):n?Mt(this,Ku,em).call(this,t,n):this._promiseHandle(t)}asMiddleware(){return Mt(this,Sa,Hu).call(this),async(t,n,r,o)=>{var i,s;try{let[a,c,l]=await Mt(i=Wu,qu,tm).call(i,t,n,ho(this,lo));return c?(await Mt(s=Wu,ka,Ed).call(s,l),o(a)):r(async u=>{var d;try{await Mt(d=Wu,ka,Ed).call(d,l)}catch(f){return u(f)}return u()})}catch(a){return o(a)}}}async _promiseHandle(t){return new Promise((n,r)=>{Mt(this,Ku,em).call(this,t,(o,i)=>{o&&i===void 0?r(o):n(i)}).catch(r)})}};wd=new WeakMap,lo=new WeakMap,us=new WeakMap,Sa=new WeakSet,Hu=function(){if(ho(this,wd))throw new Error("This engine is destroyed and can no longer be used.")},zu=new WeakSet,Xg=async function(e,t){try{if(e.length===0){let r=[{id:null,jsonrpc:"2.0",error:new wr(co.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,r):r}let n=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter(r=>r!==void 0);return t?t(null,n):n}catch(n){if(t)return t(n);throw n}},Ku=new WeakSet,em=async function(e,t){var n;if(!e||Array.isArray(e)||typeof e!="object"){let s=new wr(co.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(s,{id:null,jsonrpc:"2.0",error:s})}if(typeof e.method!="string"){let s=new wr(co.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return ho(this,us)&&!$_(e)?t(null):t(s,{id:e.id??null,jsonrpc:"2.0",error:s})}if(ho(this,us)&&bs(e,A2)&&!$_(e)){try{await ho(this,us).call(this,e)}catch(s){return t(s)}return t(null)}let r=null,o=de({},e),i={id:o.id,jsonrpc:o.jsonrpc};try{await Mt(n=xn,lg,J_).call(n,o,i,ho(this,lo))}catch(s){r=s}return r&&(delete i.result,i.error||(i.error=z_(r))),t(r,i)},lg=new WeakSet,J_=async function(e,t,n){var r,o,i;let[s,a,c]=await Mt(r=xn,qu,tm).call(r,e,t,n);if(Mt(o=xn,dg,X_).call(o,e,t,a),await Mt(i=xn,ka,Ed).call(i,c),s)throw s},qu=new WeakSet,tm=async function(e,t,n){var r;let o=[],i=null,s=!1;for(let a of n)if([i,s]=await Mt(r=xn,ug,Q_).call(r,e,t,a,o),s)break;return[i,s,o.reverse()]},ug=new WeakSet,Q_=async function(e,t,n,r){return new Promise(o=>{let i=a=>{let c=a||t.error;c&&(t.error=z_(c)),o([c,!0])},s=a=>{t.error?i(t.error):(a&&(typeof a!="function"&&i(new wr(co.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${fg(e)}`,{request:e})),r.push(a)),o([null,!1]))};try{n(e,t,s,i)}catch(a){i(a)}})},ka=new WeakSet,Ed=async function(e){for(let t of e)await new Promise((n,r)=>{t(o=>o?r(o):n())})},dg=new WeakSet,X_=function(e,t,n){if(!gd(t,"result")&&!gd(t,"error"))throw new wr(co.internal,`JsonRpcEngine: Response has no error or result for request:
${fg(e)}`,{request:e});if(!n)throw new wr(co.internal,`JsonRpcEngine: Nothing ended request:
${fg(e)}`,{request:e})},An(xn,lg),An(xn,qu),An(xn,ug),An(xn,ka),An(xn,dg);var V2=xn;function fg(e){return JSON.stringify(e,null,2)}var KD=Object.freeze(["eth_subscription"]),$2=(e=console)=>[p2(),U2(e),h2(e)];function U2(e){return(t,n,r)=>{typeof t.method=="string"&&t.method||(n.error=Aa({message:"The request 'method' must be a non-empty string.",data:t})),r(o=>{let{error:i}=n;return i&&e.error(`MetaMask - RPC Error: ${i.message}`,i),o()})}}var Gu=(e,t,n=!0)=>(r,o)=>{r||o.error?t(r||o.error):!n||Array.isArray(o)?e(o):e(o.result)},qD=e=>!!e&&typeof e=="string"&&e.startsWith("0x"),WD=()=>{};async function eC(e,t){try{let n=await async function(){return{name:H2(window),icon:await z2(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},WD)}catch(n){t.error({message:Ye.errors.sendSiteMetadata(),originalError:n})}}function H2(e){let{document:t}=e,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;let r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:window.location.hostname}async function z2(e){let{document:t}=e,n=t.querySelectorAll('head > link[rel~="icon"]');for(let r of Array.from(n))if(r&&await K2(r.href))return r.href;return null}async function K2(e){return new Promise((t,n)=>{try{let r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(r){n(r)}})}var GD=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Yn=(e,t,n)=>(GD(e,t,"read from private field"),n?n.call(e):t.get(e)),nm=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Er=(e,t,n,r)=>(GD(e,t,"write to private field"),t.set(e,n),n);function tC(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}var rm=class extends Le{emit(t,...n){let r=t==="error",o=this._events;if(o!==void 0)r=r&&o.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;let a=new Error("Unhandled error."+(s?` (${s.message})`:""));throw a.context=s,a}let i=o[t];if(i===void 0)return!1;if(typeof i=="function")tC(i,this,n);else{let s=i.length,a=function(c){let l=c.length,u=new Array(l);for(let d=0;d<l;d+=1)u[d]=c[d];return u}(i);for(let c=0;c<s;c+=1)tC(a[c],this,n)}return!0}},io,Wo,q2=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;o--!=0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;o--!=0;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;o--!=0;){var s=i[o];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n},W2=Pd(q2),ZD=class YD extends rm{constructor({logger:t=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),nm(this,io,void 0),nm(this,Wo,void 0),this._log=t,this.setMaxListeners(n),this._state=de({},YD._defaultState),Er(this,Wo,null),Er(this,io,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);let o=new V2;r.forEach(i=>o.push(i)),this._rpcEngine=o}get chainId(){return Yn(this,io)}get selectedAddress(){return Yn(this,Wo)}isConnected(){return this._state.isConnected}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw Aa({message:Ye.errors.invalidRequestArgs(),data:t});let{method:n,params:r}=t;if(typeof n!="string"||n.length===0)throw Aa({message:Ye.errors.invalidRequestMethod(),data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw Aa({message:Ye.errors.invalidRequestParams(),data:t});let o=r==null?{method:n}:{method:n,params:r};return new Promise((i,s)=>{this._rpcRequest(o,Gu(i,s))})}_initializeState(t){if(this._state.initialized)throw new Error("Provider already initialized.");if(t){let{accounts:n,chainId:r,isUnlocked:o,networkVersion:i}=t;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:i}),this._handleUnlockStateChanged({accounts:n,isUnlocked:o}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(t,n){let r=n;return Array.isArray(t)||(t.jsonrpc||(t.jsonrpc="2.0"),t.method!=="eth_accounts"&&t.method!=="eth_requestAccounts"||(r=(o,i)=>{this._handleAccountsChanged(i.result??[],t.method==="eth_accounts"),n(o,i)})),this._rpcEngine.handle(t,r)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),this._log.debug(Ye.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){let r;this._state.isConnected=!1,t?(r=new wr(1013,n??Ye.errors.disconnected()),this._log.debug(r)):(r=new wr(1011,n??Ye.errors.permanentlyDisconnected()),this._log.error(r),Er(this,io,null),this._state.accounts=null,Er(this,Wo,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:t}={}){qD(t)?(this._handleConnect(t),t!==Yn(this,io)&&(Er(this,io,t),this._state.initialized&&this.emit("chainChanged",Yn(this,io)))):this._log.error(Ye.errors.invalidNetworkParams(),{chainId:t})}_handleAccountsChanged(t,n=!1){let r=t;Array.isArray(t)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",t),r=[]);for(let o of t)if(typeof o!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",t),r=[];break}if(!W2(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Yn(this,Wo)!==r[0]&&Er(this,Wo,r[0]||null),this._state.initialized)){let o=[...r];this.emit("accountsChanged",o)}}_handleUnlockStateChanged({accounts:t,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(t??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};io=new WeakMap,Wo=new WeakMap,ZD._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var nC,rC,G2=ZD,om={exports:{}};function JD(){return rC?nC:(rC=1,nC=Pm.EventEmitter)}var Lm,Fm=Xa(yO);Lm=typeof Object.create=="function"?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var QD=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},Z2=/%[sdj%]/g;function Bd(e){if(!qa(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(er(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(Z2,function(a){if(a==="%%")return"%";if(n>=o)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),s=r[n];n<o;s=r[++n])ec(s)||!oi(s)?i+=" "+s:i+=" "+er(s);return i}function Bm(e,t){if(Qn(kt.process))return function(){return Bm(e,t).apply(this,arguments)};if(Oe.noDeprecation===!0)return e;var n=!1;return function(){if(!n){if(Oe.throwDeprecation)throw new Error(t);Oe.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}var hg,Ru={};function XD(e){return Qn(hg)&&(hg=Oe.env.NODE_DEBUG||""),e=e.toUpperCase(),!Ru[e]&&(new RegExp("\\b"+e+"\\b","i").test(hg)?Ru[e]=function(){var t=Bd.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:Ru[e]=function(){}),Ru[e]}function er(e,t){var n={seen:[],stylize:J2};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),jd(t)?n.showHidden=t:t&&Um(n,t),Qn(n.showHidden)&&(n.showHidden=!1),Qn(n.depth)&&(n.depth=2),Qn(n.colors)&&(n.colors=!1),Qn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Y2),bd(n,e,n.depth)}function Y2(e,t){var n=er.styles[t];return n?"\x1B["+er.colors[n][0]+"m"+e+"\x1B["+er.colors[n][1]+"m":e}function J2(e,t){return e}function bd(e,t,n){if(e.customInspect&&t&&Oa(t.inspect)&&t.inspect!==er&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return qa(r)||(r=bd(e,r,n)),r}var o=function(f,h){if(Qn(h))return f.stylize("undefined","undefined");if(qa(h)){var p="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f.stylize(p,"string")}if(Vm(h))return f.stylize(""+h,"number");if(jd(h))return f.stylize(""+h,"boolean");if(ec(h))return f.stylize("null","null")}(e,t);if(o)return o;var i=Object.keys(t),s=function(f){var h={};return f.forEach(function(p,g){h[p]=!0}),h}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),Ra(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return pg(t);if(i.length===0){if(Oa(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Na(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_d(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Ra(t))return pg(t)}var c,l="",u=!1,d=["{","}"];return jm(t)&&(u=!0,d=["[","]"]),Oa(t)&&(l=" [Function"+(t.name?": "+t.name:"")+"]"),Na(t)&&(l=" "+RegExp.prototype.toString.call(t)),_d(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Ra(t)&&(l=" "+pg(t)),i.length!==0||u&&t.length!=0?n<0?Na(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=u?function(f,h,p,g,w){for(var m=[],D=0,b=h.length;D<b;++D)iS(h,String(D))?m.push(gg(f,h,p,g,String(D),!0)):m.push("");return w.forEach(function(O){O.match(/^\d+$/)||m.push(gg(f,h,p,g,O,!0))}),m}(e,t,n,s,i):i.map(function(f){return gg(e,t,n,s,f,u)}),e.seen.pop(),function(f,h,p){var g=f.reduce(function(w,m){return m.indexOf(`
`),w+m.replace(/\u001b\[\d\d?m/g,"").length+1},0);return g>60?p[0]+(h===""?"":h+`
 `)+" "+f.join(`,
  `)+" "+p[1]:p[0]+h+" "+f.join(", ")+" "+p[1]}(c,l,d)):d[0]+l+d[1]}function pg(e){return"["+Error.prototype.toString.call(e)+"]"}function gg(e,t,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),iS(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=ec(n)?bd(e,c.value,null):bd(e,c.value,n-1)).indexOf(`
`)>-1&&(a=i?a.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):`
`+a.split(`
`).map(function(l){return"   "+l}).join(`
`)):a=e.stylize("[Circular]","special")),Qn(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function jm(e){return Array.isArray(e)}function jd(e){return typeof e=="boolean"}function ec(e){return e===null}function eS(e){return e==null}function Vm(e){return typeof e=="number"}function qa(e){return typeof e=="string"}function tS(e){return typeof e=="symbol"}function Qn(e){return e===void 0}function Na(e){return oi(e)&&$m(e)==="[object RegExp]"}function oi(e){return typeof e=="object"&&e!==null}function _d(e){return oi(e)&&$m(e)==="[object Date]"}function Ra(e){return oi(e)&&($m(e)==="[object Error]"||e instanceof Error)}function Oa(e){return typeof e=="function"}function nS(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||e===void 0}function rS(e){return X.isBuffer(e)}function $m(e){return Object.prototype.toString.call(e)}function mg(e){return e<10?"0"+e.toString(10):e.toString(10)}er.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},er.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Q2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function oS(){console.log("%s - %s",function(){var e=new Date,t=[mg(e.getHours()),mg(e.getMinutes()),mg(e.getSeconds())].join(":");return[e.getDate(),Q2[e.getMonth()],t].join(" ")}(),Bd.apply(null,arguments))}function Um(e,t){if(!t||!oi(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function iS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Go=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Hm(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Go&&e[Go]){var t;if(typeof(t=e[Go])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,Go,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var n,r,o=new Promise(function(a,c){n=a,r=c}),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push(function(a,c){a?r(a):n(c)});try{e.apply(this,i)}catch(a){r(a)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Go&&Object.defineProperty(t,Go,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,QD(e))}function X2(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function sS(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if(typeof o!="function")throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};e.apply(this,n).then(function(a){Oe.nextTick(s.bind(null,null,a))},function(a){Oe.nextTick(X2.bind(null,a,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,QD(e)),t}Hm.custom=Go;var yg,oC,vg,iC,eP={inherits:Lm,_extend:Um,log:oS,isBuffer:rS,isPrimitive:nS,isFunction:Oa,isError:Ra,isDate:_d,isObject:oi,isRegExp:Na,isUndefined:Qn,isSymbol:tS,isString:qa,isNumber:Vm,isNullOrUndefined:eS,isNull:ec,isBoolean:jd,isArray:jm,inspect:er,deprecate:Bm,format:Bd,debuglog:XD,promisify:Hm,callbackify:sS},aS=Xa(Object.freeze({__proto__:null,_extend:Um,callbackify:sS,debuglog:XD,default:eP,deprecate:Bm,format:Bd,inherits:Lm,inspect:er,isArray:jm,isBoolean:jd,isBuffer:rS,isDate:_d,isError:Ra,isFunction:Oa,isNull:ec,isNullOrUndefined:eS,isNumber:Vm,isObject:oi,isPrimitive:nS,isRegExp:Na,isString:qa,isSymbol:tS,isUndefined:Qn,log:oS,promisify:Hm}));function tP(){if(oC)return yg;function e(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),u.push.apply(u,d)}return u}function t(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?e(Object(u),!0).forEach(function(d){n(c,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):e(Object(u)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(u,d))})}return c}function n(c,l,u){return(l=o(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&function(d,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,o(p.key),p)}}(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function o(c){var l=function(u,d){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var h=f.call(u,d||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}(c,"string");return typeof l=="symbol"?l:String(l)}oC=1;var i=Fm.Buffer,s=aS.inspect,a=s&&s.custom||"inspect";return yg=function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,d=""+u.data;u=u.next;)d+=l+u.data;return d}},{key:"concat",value:function(l){if(this.length===0)return i.alloc(0);for(var u,d,f,h=i.allocUnsafe(l>>>0),p=this.head,g=0;p;)u=p.data,d=h,f=g,i.prototype.copy.call(u,d,f),g+=p.data.length,p=p.next;return h}},{key:"consume",value:function(l,u){var d;return l<this.head.data.length?(d=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):d=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,d=1,f=u.data;for(l-=f.length;u=u.next;){var h=u.data,p=l>h.length?h.length:l;if(p===h.length?f+=h:f+=h.slice(0,l),(l-=p)===0){p===h.length?(++d,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(p));break}++d}return this.length-=d,f}},{key:"_getBuffer",value:function(l){var u=i.allocUnsafe(l),d=this.head,f=1;for(d.data.copy(u),l-=d.data.length;d=d.next;){var h=d.data,p=l>h.length?h.length:l;if(h.copy(u,u.length-l,0,p),(l-=p)===0){p===h.length?(++f,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=h.slice(p));break}++f}return this.length-=f,u}},{key:a,value:function(l,u){return s(this,t(t({},u),{},{depth:0,customInspect:!1}))}}]),c}(),yg}function cS(){if(iC)return vg;function e(r,o){n(r,o),t(r)}function t(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function n(r,o){r.emit("error",o)}return iC=1,vg={destroy:function(r,o){var i=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(o?o(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Oe.nextTick(n,this,r)):Oe.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(c){!o&&c?i._writableState?i._writableState.errorEmitted?Oe.nextTick(t,i):(i._writableState.errorEmitted=!0,Oe.nextTick(e,i,c)):Oe.nextTick(e,i,c):o?(Oe.nextTick(t,i),o(c)):Oe.nextTick(t,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,o){var i=r._readableState,s=r._writableState;i&&i.autoDestroy||s&&s.autoDestroy?r.destroy(o):r.emit("error",o)}},vg}var ii={},sC,aC,lS={};function dn(e,t,n){n||(n=Error);var r=function(o){var i,s;function a(c,l,u){return o.call(this,function(d,f,h){return typeof t=="string"?t:t(d,f,h)}(c,l,u))||this}return s=o,(i=a).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,a}(n);r.prototype.name=n.name,r.prototype.code=e,lS[e]=r}function cC(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(r){return String(r)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:n===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function uS(){if(aC)return sC;aC=1;var e=ii.codes.ERR_INVALID_OPT_VALUE;return sC={getHighWaterMark:function(t,n,r,o){var i=function(s,a,c){return s.highWaterMark!=null?s.highWaterMark:a?s[c]:null}(n,o,r);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new e(o?r:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}}}dn("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),dn("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,o,i;if(typeof t=="string"&&(o="not ",t.substr(0,o.length)===o)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c}(e," argument"))i="The ".concat(e," ").concat(r," ").concat(cC(t,"type"));else{var s=function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1}(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(s," ").concat(r," ").concat(cC(t,"type"))}return i+=". Received type ".concat(typeof n)},TypeError),dn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),dn("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),dn("ERR_STREAM_PREMATURE_CLOSE","Premature close"),dn("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),dn("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),dn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),dn("ERR_STREAM_WRITE_AFTER_END","write after end"),dn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),dn("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),dn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ii.codes=lS;var wg,lC,Eg,uC,bg,dC,nP=typeof Object.create=="function"?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},tc=Xa(Object.freeze({__proto__:null,default:nP}));function rP(){if(lC)return wg;function e(t){try{if(!vn.localStorage)return!1}catch{return!1}var n=vn.localStorage[t];return n!=null&&String(n).toLowerCase()==="true"}return lC=1,wg=function(t,n){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return t.apply(this,arguments)}},wg}function dS(){if(uC)return Eg;function e(A){var M=this;this.next=null,this.entry=null,this.finish=function(){(function(k,B,V){var E=k.entry;for(k.entry=null;E;){var y=E.callback;B.pendingcb--,y(V),E=E.next}B.corkedRequestsFree.next=k})(M,A)}}var t;uC=1,Eg=N,N.WritableState=O;var n={deprecate:rP()},r=JD(),o=Fm.Buffer,i=(vn!==void 0?vn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,a=cS(),c=uS().getHighWaterMark,l=ii.codes,u=l.ERR_INVALID_ARG_TYPE,d=l.ERR_METHOD_NOT_IMPLEMENTED,f=l.ERR_MULTIPLE_CALLBACK,h=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,w=l.ERR_STREAM_WRITE_AFTER_END,m=l.ERR_UNKNOWN_ENCODING,D=a.errorOrDestroy;function b(){}function O(A,M,k){t=t||vs(),A=A||{},typeof k!="boolean"&&(k=M instanceof t),this.objectMode=!!A.objectMode,k&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=c(this,A,"writableHighWaterMark",k),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var B=A.decodeStrings===!1;this.decodeStrings=!B,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){(function(E,y){var v=E._writableState,S=v.sync,x=v.writecb;if(typeof x!="function")throw new f;if(function(_){_.writing=!1,_.writecb=null,_.length-=_.writelen,_.writelen=0}(v),y)(function(_,T,I,P,H){--T.pendingcb,I?(Oe.nextTick(H,P),Oe.nextTick(R,_,T),_._writableState.errorEmitted=!0,D(_,P)):(H(P),_._writableState.errorEmitted=!0,D(_,P),R(_,T))})(E,v,S,y,x);else{var C=W(v)||E.destroyed;C||v.corked||v.bufferProcessing||!v.bufferedRequest||U(E,v),S?Oe.nextTick(q,E,v,C,x):q(E,v,C,x)}})(M,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function N(A){var M=this instanceof(t=t||vs());if(!M&&!s.call(N,this))return new N(A);this._writableState=new O(A,this,M),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),r.call(this)}function z(A,M,k,B,V,E,y){M.writelen=B,M.writecb=y,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new p("write")):k?A._writev(V,M.onwrite):A._write(V,E,M.onwrite),M.sync=!1}function q(A,M,k,B){k||function(V,E){E.length===0&&E.needDrain&&(E.needDrain=!1,V.emit("drain"))}(A,M),M.pendingcb--,B(),R(A,M)}function U(A,M){M.bufferProcessing=!0;var k=M.bufferedRequest;if(A._writev&&k&&k.next){var B=M.bufferedRequestCount,V=new Array(B),E=M.corkedRequestsFree;E.entry=k;for(var y=0,v=!0;k;)V[y]=k,k.isBuf||(v=!1),k=k.next,y+=1;V.allBuffers=v,z(A,M,!0,M.length,V,"",E.finish),M.pendingcb++,M.lastBufferedRequest=null,E.next?(M.corkedRequestsFree=E.next,E.next=null):M.corkedRequestsFree=new e(M),M.bufferedRequestCount=0}else{for(;k;){var S=k.chunk,x=k.encoding,C=k.callback;if(z(A,M,!1,M.objectMode?1:S.length,S,x,C),k=k.next,M.bufferedRequestCount--,M.writing)break}k===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=k,M.bufferProcessing=!1}function W(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function $(A,M){A._final(function(k){M.pendingcb--,k&&D(A,k),M.prefinished=!0,A.emit("prefinish"),R(A,M)})}function R(A,M){var k=W(M);if(k&&(function(V,E){E.prefinished||E.finalCalled||(typeof V._final!="function"||E.destroyed?(E.prefinished=!0,V.emit("prefinish")):(E.pendingcb++,E.finalCalled=!0,Oe.nextTick($,V,E)))}(A,M),M.pendingcb===0&&(M.finished=!0,A.emit("finish"),M.autoDestroy))){var B=A._readableState;(!B||B.autoDestroy&&B.endEmitted)&&A.destroy()}return k}return tc(N,r),O.prototype.getBuffer=function(){for(var A=this.bufferedRequest,M=[];A;)M.push(A),A=A.next;return M},function(){try{Object.defineProperty(O.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(A){return!!s.call(this,A)||this===N&&A&&A._writableState instanceof O}})):s=function(A){return A instanceof this},N.prototype.pipe=function(){D(this,new h)},N.prototype.write=function(A,M,k){var B,V=this._writableState,E=!1,y=!V.objectMode&&(B=A,o.isBuffer(B)||B instanceof i);return y&&!o.isBuffer(A)&&(A=function(v){return o.from(v)}(A)),typeof M=="function"&&(k=M,M=null),y?M="buffer":M||(M=V.defaultEncoding),typeof k!="function"&&(k=b),V.ending?function(v,S){var x=new w;D(v,x),Oe.nextTick(S,x)}(this,k):(y||function(v,S,x,C){var _;return x===null?_=new g:typeof x=="string"||S.objectMode||(_=new u("chunk",["string","Buffer"],x)),!_||(D(v,_),Oe.nextTick(C,_),!1)}(this,V,A,k))&&(V.pendingcb++,E=function(v,S,x,C,_,T){if(!x){var I=function(j,L,K){return j.objectMode||j.decodeStrings===!1||typeof L!="string"||(L=o.from(L,K)),L}(S,C,_);C!==I&&(x=!0,_="buffer",C=I)}var P=S.objectMode?1:C.length;S.length+=P;var H=S.length<S.highWaterMark;if(H||(S.needDrain=!0),S.writing||S.corked){var F=S.lastBufferedRequest;S.lastBufferedRequest={chunk:C,encoding:_,isBuf:x,callback:T,next:null},F?F.next=S.lastBufferedRequest:S.bufferedRequest=S.lastBufferedRequest,S.bufferedRequestCount+=1}else z(v,S,!1,P,C,_,T);return H}(this,V,y,A,M,k)),E},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,A.writing||A.corked||A.bufferProcessing||!A.bufferedRequest||U(this,A))},N.prototype.setDefaultEncoding=function(A){if(typeof A=="string"&&(A=A.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((A+"").toLowerCase())>-1))throw new m(A);return this._writableState.defaultEncoding=A,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(A,M,k){k(new d("_write()"))},N.prototype._writev=null,N.prototype.end=function(A,M,k){var B=this._writableState;return typeof A=="function"?(k=A,A=null,M=null):typeof M=="function"&&(k=M,M=null),A!=null&&this.write(A,M),B.corked&&(B.corked=1,this.uncork()),B.ending||function(V,E,y){E.ending=!0,R(V,E),y&&(E.finished?Oe.nextTick(y):V.once("finish",y)),E.ended=!0,V.writable=!1}(this,B,k),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),N.prototype.destroy=a.destroy,N.prototype._undestroy=a.undestroy,N.prototype._destroy=function(A,M){M(A)},Eg}function vs(){if(dC)return bg;dC=1;var e=Object.keys||function(l){var u=[];for(var d in l)u.push(d);return u};bg=s;var t=fS(),n=dS();tc(s,t);for(var r=e(n.prototype),o=0;o<r.length;o++){var i=r[o];s.prototype[i]||(s.prototype[i]=n.prototype[i])}function s(l){if(!(this instanceof s))return new s(l);t.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||Oe.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),bg}var oP=X.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Zu(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!oP(t))throw new Error("Unknown encoding: "+t)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=sP;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=aP;break;default:return void(this.write=iP)}this.charBuffer=new X(6),this.charReceived=0,this.charLength=0}function iP(e){return e.toString(this.encoding)}function sP(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function aP(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Zu.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((o=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&o<=56319)){if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var o;if(r=(t+=e.toString(this.encoding,0,r)).length-1,(o=t.charCodeAt(r))>=55296&&o<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)}return t},Zu.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Zu.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,n).toString(o)}return t};var fC=Xa(Object.freeze({__proto__:null,StringDecoder:Zu})),hC=ii.codes.ERR_STREAM_PREMATURE_CLOSE;function cP(){}var _g,pC,gC,mC,Cg,yC,zm=function e(t,n,r){if(typeof n=="function")return e(t,null,n);n||(n={}),r=function(p){var g=!1;return function(){if(!g){g=!0;for(var w=arguments.length,m=new Array(w),D=0;D<w;D++)m[D]=arguments[D];p.apply(this,m)}}}(r||cP);var o=n.readable||n.readable!==!1&&t.readable,i=n.writable||n.writable!==!1&&t.writable,s=function(){t.writable||c()},a=t._writableState&&t._writableState.finished,c=function(){i=!1,a=!0,o||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){o=!1,l=!0,i||r.call(t)},d=function(p){r.call(t,p)},f=function(){var p;return o&&!l?(t._readableState&&t._readableState.ended||(p=new hC),r.call(t,p)):i&&!a?(t._writableState&&t._writableState.ended||(p=new hC),r.call(t,p)):void 0},h=function(){t.req.on("finish",c)};return function(p){return p.setHeader&&typeof p.abort=="function"}(t)?(t.on("complete",c),t.on("abort",f),t.req?h():t.on("request",h)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",c),n.error!==!1&&t.on("error",d),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",h),t.req&&t.req.removeListener("finish",c),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",c),t.removeListener("end",u),t.removeListener("error",d),t.removeListener("close",f)}};function lP(){if(pC)return _g;var e;function t(g,w,m){return(w=function(D){var b=function(O,N){if(typeof O!="object"||O===null)return O;var z=O[Symbol.toPrimitive];if(z!==void 0){var q=z.call(O,N||"default");if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(O)}(D,"string");return typeof b=="symbol"?b:String(b)}(w))in g?Object.defineProperty(g,w,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[w]=m,g}pC=1;var n=zm,r=Symbol("lastResolve"),o=Symbol("lastReject"),i=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(g,w){return{value:g,done:w}}function d(g){var w=g[r];if(w!==null){var m=g[l].read();m!==null&&(g[a]=null,g[r]=null,g[o]=null,w(u(m,!1)))}}function f(g){Oe.nextTick(d,g)}var h=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((t(e={get stream(){return this[l]},next:function(){var g=this,w=this[i];if(w!==null)return Promise.reject(w);if(this[s])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise(function(O,N){Oe.nextTick(function(){g[i]?N(g[i]):O(u(void 0,!0))})});var m,D=this[a];if(D)m=new Promise(function(O,N){return function(z,q){O.then(function(){N[s]?z(u(void 0,!0)):N[c](z,q)},q)}}(D,this));else{var b=this[l].read();if(b!==null)return Promise.resolve(u(b,!1));m=new Promise(this[c])}return this[a]=m,m}},Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var g=this;return new Promise(function(w,m){g[l].destroy(null,function(D){D?m(D):w(u(void 0,!0))})})}),e),h);return _g=function(g){var w,m=Object.create(p,(t(w={},l,{value:g,writable:!0}),t(w,r,{value:null,writable:!0}),t(w,o,{value:null,writable:!0}),t(w,i,{value:null,writable:!0}),t(w,s,{value:g._readableState.endEmitted,writable:!0}),t(w,c,{value:function(D,b){var O=m[l].read();O?(m[a]=null,m[r]=null,m[o]=null,D(u(O,!1))):(m[r]=D,m[o]=b)},writable:!0}),w));return m[a]=null,n(g,function(D){if(D&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=m[o];return b!==null&&(m[a]=null,m[r]=null,m[o]=null,b(D)),void(m[i]=D)}var O=m[r];O!==null&&(m[a]=null,m[r]=null,m[o]=null,O(u(void 0,!0))),m[s]=!0}),g.on("readable",f.bind(null,m)),m},_g}function fS(){if(yC)return Cg;var e;yC=1,Cg=N,N.ReadableState=O,Pm.EventEmitter;var t=function(C,_){return C.listeners(_).length},n=JD(),r=Fm.Buffer,o=(vn!==void 0?vn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},i,s=aS;i=s&&s.debuglog?s.debuglog("stream"):function(){};var a,c,l,u=tP(),d=cS(),f=uS().getHighWaterMark,h=ii.codes,p=h.ERR_INVALID_ARG_TYPE,g=h.ERR_STREAM_PUSH_AFTER_EOF,w=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;tc(N,n);var D=d.errorOrDestroy,b=["error","close","destroy","pause","resume"];function O(C,_,T){e=e||vs(),C=C||{},typeof T!="boolean"&&(T=_ instanceof e),this.objectMode=!!C.objectMode,T&&(this.objectMode=this.objectMode||!!C.readableObjectMode),this.highWaterMark=f(this,C,"readableHighWaterMark",T),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.destroyed=!1,this.defaultEncoding=C.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,C.encoding&&(a||(a=fC.StringDecoder),this.decoder=new a(C.encoding),this.encoding=C.encoding)}function N(C){if(e=e||vs(),!(this instanceof N))return new N(C);var _=this instanceof e;this._readableState=new O(C,this,_),this.readable=!0,C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy)),n.call(this)}function z(C,_,T,I,P){i("readableAddChunk",_);var H,F=C._readableState;if(_===null)F.reading=!1,function(j,L){if(i("onEofChunk"),!L.ended){if(L.decoder){var K=L.decoder.end();K&&K.length&&(L.buffer.push(K),L.length+=L.objectMode?1:K.length)}L.ended=!0,L.sync?$(j):(L.needReadable=!1,L.emittedReadable||(L.emittedReadable=!0,R(j)))}}(C,F);else if(P||(H=function(j,L){var K;G=L,r.isBuffer(G)||G instanceof o||typeof L=="string"||L===void 0||j.objectMode||(K=new p("chunk",["string","Buffer","Uint8Array"],L));var G;return K}(F,_)),H)D(C,H);else if(F.objectMode||_&&_.length>0)if(typeof _=="string"||F.objectMode||Object.getPrototypeOf(_)===r.prototype||(_=function(j){return r.from(j)}(_)),I)F.endEmitted?D(C,new m):q(C,F,_,!0);else if(F.ended)D(C,new g);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!T?(_=F.decoder.write(_),F.objectMode||_.length!==0?q(C,F,_,!1):A(C,F)):q(C,F,_,!1)}else I||(F.reading=!1,A(C,F));return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function q(C,_,T,I){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,C.emit("data",T)):(_.length+=_.objectMode?1:T.length,I?_.buffer.unshift(T):_.buffer.push(T),_.needReadable&&$(C)),A(C,_)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(C){this._readableState&&(this._readableState.destroyed=C)}}),N.prototype.destroy=d.destroy,N.prototype._undestroy=d.undestroy,N.prototype._destroy=function(C,_){_(C)},N.prototype.push=function(C,_){var T,I=this._readableState;return I.objectMode?T=!0:typeof C=="string"&&((_=_||I.defaultEncoding)!==I.encoding&&(C=r.from(C,_),_=""),T=!0),z(this,C,_,!1,T)},N.prototype.unshift=function(C){return z(this,C,null,!0,!1)},N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(C){a||(a=fC.StringDecoder);var _=new a(C);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var T=this._readableState.buffer.head,I="";T!==null;)I+=_.write(T.data),T=T.next;return this._readableState.buffer.clear(),I!==""&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var U=1073741824;function W(C,_){return C<=0||_.length===0&&_.ended?0:_.objectMode?1:C!=C?_.flowing&&_.length?_.buffer.head.data.length:_.length:(C>_.highWaterMark&&(_.highWaterMark=function(T){return T>=U?T=U:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}(C)),C<=_.length?C:_.ended?_.length:(_.needReadable=!0,0))}function $(C){var _=C._readableState;i("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(i("emitReadable",_.flowing),_.emittedReadable=!0,Oe.nextTick(R,C))}function R(C){var _=C._readableState;i("emitReadable_",_.destroyed,_.length,_.ended),_.destroyed||!_.length&&!_.ended||(C.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,E(C)}function A(C,_){_.readingMore||(_.readingMore=!0,Oe.nextTick(M,C,_))}function M(C,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var T=_.length;if(i("maybeReadMore read 0"),C.read(0),T===_.length)break}_.readingMore=!1}function k(C){var _=C._readableState;_.readableListening=C.listenerCount("readable")>0,_.resumeScheduled&&!_.paused?_.flowing=!0:C.listenerCount("data")>0&&C.resume()}function B(C){i("readable nexttick read 0"),C.read(0)}function V(C,_){i("resume",_.reading),_.reading||C.read(0),_.resumeScheduled=!1,C.emit("resume"),E(C),_.flowing&&!_.reading&&C.read(0)}function E(C){var _=C._readableState;for(i("flow",_.flowing);_.flowing&&C.read()!==null;);}function y(C,_){return _.length===0?null:(_.objectMode?T=_.buffer.shift():!C||C>=_.length?(T=_.decoder?_.buffer.join(""):_.buffer.length===1?_.buffer.first():_.buffer.concat(_.length),_.buffer.clear()):T=_.buffer.consume(C,_.decoder),T);var T}function v(C){var _=C._readableState;i("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,Oe.nextTick(S,_,C))}function S(C,_){if(i("endReadableNT",C.endEmitted,C.length),!C.endEmitted&&C.length===0&&(C.endEmitted=!0,_.readable=!1,_.emit("end"),C.autoDestroy)){var T=_._writableState;(!T||T.autoDestroy&&T.finished)&&_.destroy()}}function x(C,_){for(var T=0,I=C.length;T<I;T++)if(C[T]===_)return T;return-1}return N.prototype.read=function(C){i("read",C),C=parseInt(C,10);var _=this._readableState,T=C;if(C!==0&&(_.emittedReadable=!1),C===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return i("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?v(this):$(this),null;if((C=W(C,_))===0&&_.ended)return _.length===0&&v(this),null;var I,P=_.needReadable;return i("need readable",P),(_.length===0||_.length-C<_.highWaterMark)&&i("length less than watermark",P=!0),_.ended||_.reading?i("reading or ended",P=!1):P&&(i("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(C=W(T,_))),(I=C>0?y(C,_):null)===null?(_.needReadable=_.length<=_.highWaterMark,C=0):(_.length-=C,_.awaitDrain=0),_.length===0&&(_.ended||(_.needReadable=!0),T!==C&&_.ended&&v(this)),I!==null&&this.emit("data",I),I},N.prototype._read=function(C){D(this,new w("_read()"))},N.prototype.pipe=function(C,_){var T=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=C;break;case 1:I.pipes=[I.pipes,C];break;default:I.pipes.push(C)}I.pipesCount+=1,i("pipe count=%d opts=%j",I.pipesCount,_);var P=(!_||_.end!==!1)&&C!==Oe.stdout&&C!==Oe.stderr?F:se;function H(re,ne){i("onunpipe"),re===T&&ne&&ne.hasUnpiped===!1&&(ne.hasUnpiped=!0,i("cleanup"),C.removeListener("close",ee),C.removeListener("finish",Q),C.removeListener("drain",j),C.removeListener("error",G),C.removeListener("unpipe",H),T.removeListener("end",F),T.removeListener("end",se),T.removeListener("data",K),L=!0,!I.awaitDrain||C._writableState&&!C._writableState.needDrain||j())}function F(){i("onend"),C.end()}I.endEmitted?Oe.nextTick(P):T.once("end",P),C.on("unpipe",H);var j=function(re){return function(){var ne=re._readableState;i("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&t(re,"data")&&(ne.flowing=!0,E(re))}}(T);C.on("drain",j);var L=!1;function K(re){i("ondata");var ne=C.write(re);i("dest.write",ne),ne===!1&&((I.pipesCount===1&&I.pipes===C||I.pipesCount>1&&x(I.pipes,C)!==-1)&&!L&&(i("false write response, pause",I.awaitDrain),I.awaitDrain++),T.pause())}function G(re){i("onerror",re),se(),C.removeListener("error",G),t(C,"error")===0&&D(C,re)}function ee(){C.removeListener("finish",Q),se()}function Q(){i("onfinish"),C.removeListener("close",ee),se()}function se(){i("unpipe"),T.unpipe(C)}return T.on("data",K),function(re,ne,ae){if(typeof re.prependListener=="function")return re.prependListener(ne,ae);re._events&&re._events[ne]?Array.isArray(re._events[ne])?re._events[ne].unshift(ae):re._events[ne]=[ae,re._events[ne]]:re.on(ne,ae)}(C,"error",G),C.once("close",ee),C.once("finish",Q),C.emit("pipe",T),I.flowing||(i("pipe resume"),T.resume()),C},N.prototype.unpipe=function(C){var _=this._readableState,T={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return C&&C!==_.pipes||(C||(C=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,C&&C.emit("unpipe",this,T)),this;if(!C){var I=_.pipes,P=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var H=0;H<P;H++)I[H].emit("unpipe",this,{hasUnpiped:!1});return this}var F=x(_.pipes,C);return F===-1||(_.pipes.splice(F,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),C.emit("unpipe",this,T)),this},N.prototype.on=function(C,_){var T=n.prototype.on.call(this,C,_),I=this._readableState;return C==="data"?(I.readableListening=this.listenerCount("readable")>0,I.flowing!==!1&&this.resume()):C==="readable"&&(I.endEmitted||I.readableListening||(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,i("on readable",I.length,I.reading),I.length?$(this):I.reading||Oe.nextTick(B,this))),T},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(C,_){var T=n.prototype.removeListener.call(this,C,_);return C==="readable"&&Oe.nextTick(k,this),T},N.prototype.removeAllListeners=function(C){var _=n.prototype.removeAllListeners.apply(this,arguments);return C!=="readable"&&C!==void 0||Oe.nextTick(k,this),_},N.prototype.resume=function(){var C=this._readableState;return C.flowing||(i("resume"),C.flowing=!C.readableListening,function(_,T){T.resumeScheduled||(T.resumeScheduled=!0,Oe.nextTick(V,_,T))}(this,C)),C.paused=!1,this},N.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},N.prototype.wrap=function(C){var _=this,T=this._readableState,I=!1;for(var P in C.on("end",function(){if(i("wrapped end"),T.decoder&&!T.ended){var F=T.decoder.end();F&&F.length&&_.push(F)}_.push(null)}),C.on("data",function(F){i("wrapped data"),T.decoder&&(F=T.decoder.write(F)),T.objectMode&&F==null||(T.objectMode||F&&F.length)&&(_.push(F)||(I=!0,C.pause()))}),C)this[P]===void 0&&typeof C[P]=="function"&&(this[P]=function(F){return function(){return C[F].apply(C,arguments)}}(P));for(var H=0;H<b.length;H++)C.on(b[H],this.emit.bind(this,b[H]));return this._read=function(F){i("wrapped _read",F),I&&(I=!1,C.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=lP()),c(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(C){this._readableState&&(this._readableState.flowing=C)}}),N._fromList=y,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(N.from=function(C,_){return l===void 0&&(l=mC?gC:(mC=1,gC=function(){throw new Error("Readable.from is not available in the browser")})),l(N,C,_)}),Cg}var hS=br,Vd=ii.codes,uP=Vd.ERR_METHOD_NOT_IMPLEMENTED,dP=Vd.ERR_MULTIPLE_CALLBACK,fP=Vd.ERR_TRANSFORM_ALREADY_TRANSFORMING,hP=Vd.ERR_TRANSFORM_WITH_LENGTH_0,Yu=vs();function pP(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new dP);n.writechunk=null,n.writecb=null,t!=null&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function br(e){if(!(this instanceof br))return new br(e);Yu.call(this,e),this._transformState={afterTransform:pP.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",gP)}function gP(){var e=this;typeof this._flush!="function"||this._readableState.destroyed?vC(this,null,null):this._flush(function(t,n){vC(e,t,n)})}function vC(e,t,n){if(t)return e.emit("error",t);if(n!=null&&e.push(n),e._writableState.length)throw new hP;if(e._transformState.transforming)throw new fP;return e.push(null)}tc(br,Yu),br.prototype.push=function(e,t){return this._transformState.needTransform=!1,Yu.prototype.push.call(this,e,t)},br.prototype._transform=function(e,t,n){n(new uP("_transform()"))},br.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},br.prototype._read=function(e){var t=this._transformState;t.writechunk===null||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},br.prototype._destroy=function(e,t){Yu.prototype._destroy.call(this,e,function(n){t(n)})};var Dg,mP=Wa,pS=hS;function Wa(e){if(!(this instanceof Wa))return new Wa(e);pS.call(this,e)}tc(Wa,pS),Wa.prototype._transform=function(e,t,n){n(null,e)};var gS=ii.codes,yP=gS.ERR_MISSING_ARGS,vP=gS.ERR_STREAM_DESTROYED;function wC(e){if(e)throw e}function EC(e){e()}function wP(e,t){return e.pipe(t)}var EP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=function(s){return s.length?typeof s[s.length-1]!="function"?wC:s.pop():wC}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new yP("streams");var i=t.map(function(s,a){var c=a<t.length-1;return function(l,u,d,f){f=function(g){var w=!1;return function(){w||(w=!0,g.apply(void 0,arguments))}}(f);var h=!1;l.on("close",function(){h=!0}),Dg===void 0&&(Dg=zm),Dg(l,{readable:u,writable:d},function(g){if(g)return f(g);h=!0,f()});var p=!1;return function(g){if(!h&&!p)return p=!0,function(w){return w.setHeader&&typeof w.abort=="function"}(l)?l.abort():typeof l.destroy=="function"?l.destroy():void f(g||new vP("pipe"))}}(s,c,a>0,function(l){r||(r=l),l&&i.forEach(EC),c||(i.forEach(EC),o(r))})});return t.reduce(wP)};(function(e,t){(t=om.exports=fS()).Stream=t,t.Readable=t,t.Writable=dS(),t.Duplex=vs(),t.Transform=hS,t.PassThrough=mP,t.finished=zm,t.pipeline=EP})(0,om.exports);var ws=om.exports;function bP(e={}){let t={},n=new ws.Duplex({objectMode:!0,read:()=>{},write:function(i,s,a){let c=null;try{i.id?function(l){let{id:u}=l;if(u===null)return;let d=t[u];if(!d)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete t[u],Object.assign(d.res,l),setTimeout(d.end)}(i):function(l){e?.retryOnMessage&&l.method===e.retryOnMessage&&Object.values(t).forEach(({req:u,retryCount:d=0})=>{if(!u.id)return;if(d>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);let f=t[u.id];f&&(f.retryCount=d+1),o(u)}),r.emit("notification",l)}(i)}catch(l){c=l}a(c)}}),r=new zD;return{events:r,middleware:(i,s,a,c)=>{t[i.id]={req:i,res:s,next:a,end:c},o(i)},stream:n};function o(i){n.push(i)}}var Cd={},im={exports:{}},_P=function e(t,n){if(t&&n)return e(t)(n);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(o){r[o]=t[o]}),r;function r(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var s=t.apply(this,o),a=o[o.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach(function(c){s[c]=a[c]}),s}},bC=_P;function Ou(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function _C(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}im.exports=bC(Ou),im.exports.strict=bC(_C),Ou.proto=Ou(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ou(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return _C(this)},configurable:!0})});var CP=im.exports,Dd={};Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.Substream=void 0;var DP=ws,sm=class extends DP.Duplex{constructor({parent:t,name:n}){super({objectMode:!0}),this._parent=t,this._name=n}_read(){}_write(t,n,r){this._parent.push({name:this._name,data:t}),r()}};Dd.Substream=sm;var SP=vn&&vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.ObjectMultiplex=void 0;var Sg=ws,IP=SP(CP),TP=Dd,CC=Symbol("IGNORE_SUBSTREAM"),MP=class extends Sg.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);let t=new TP.Substream({parent:this,name:e});return this._substreams[e]=t,function(n,r){let o=(0,IP.default)(r);(0,Sg.finished)(n,{readable:!1},o),(0,Sg.finished)(n,{writable:!1},o)}(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=CC}_read(){}_write(e,t,n){let{name:r,data:o}=e;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();let i=this._substreams[r];return i?(i!==CC&&i.push(o),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};Cd.ObjectMultiplex=MP;var xP=Pd(Cd.ObjectMultiplex),Kn=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Kn.writable=e=>Kn(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object",Kn.readable=e=>Kn(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object",Kn.duplex=e=>Kn.writable(e)&&Kn.readable(e),Kn.transform=e=>Kn.duplex(e)&&typeof e._transform=="function";var qn,AP=Kn,kP=class extends G2{constructor(e,{jsonRpcStreamName:t,logger:n=console,maxEventListeners:r=100,rpcMiddleware:o=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:o}),!AP.duplex(e))throw new Error(Ye.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);let i=new xP;ws.pipeline(e,i,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=bP({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),ws.pipeline(this._jsonRpcConnection.stream,i.createStream(t),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",s=>{let{method:a,params:c}=s;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):KD.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&e.destroy(new Error(Ye.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let e;try{e=await this.request({method:"metamask_getProviderState"})}catch(t){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",t)}this._initializeState(e)}_handleStreamDisconnect(e,t){let n=`MetaMask: Lost connection to "${e}".`;t?.stack&&(n+=`
${t.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){qD(e)&&(n=>!!n&&typeof n=="string")(t)?t==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:e}):this._log.error(Ye.errors.invalidNetworkParams(),{chainId:e,networkVersion:t})}},NP=class extends kP{constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:o}={}){if(super(e,{jsonRpcStreamName:t,logger:n,maxEventListeners:r,rpcMiddleware:$2(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},nm(this,qn,void 0),this._initializeStateAsync(),Er(this,qn,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",i=>{let{method:s}=i;KD.includes(s)&&(this.emit("data",i),this.emit("notification",i.params.result))}),o)if(document.readyState==="complete")eC(this._rpcEngine,this._log);else{let i=()=>{eC(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",i)};window.addEventListener("DOMContentLoaded",i)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(Ye.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(Ye.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Yn(this,qn)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(Ye.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),Yn(this,qn)&&!e&&Er(this,qn,null)}_warnOfDeprecation(e){this._sentWarnings?.events[e]===!1&&(this._log.warn(Ye.warnings.events[e]),this._sentWarnings.events[e]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(Ye.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},Gu(e,t))}catch(n){t(n)}})}send(e,t){return this._sentWarnings.send||(this._log.warn(Ye.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof e!="string"||t&&!Array.isArray(t)?e&&typeof e=="object"&&typeof t=="function"?this._rpcRequest(e,t):this._sendSync(e):new Promise((n,r)=>{try{this._rpcRequest({method:e,params:t},Gu(n,r,!1))}catch(o){r(o)}})}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(e,WD),t=!0;break;case"net_version":t=Yn(this,qn)??null;break;default:throw new Error(Ye.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(e=>{this.on("_initialized",()=>e())}),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw Aa({message:"Batch requests must be made with an array of request objects.",data:e});return new Promise((t,n)=>{this._rpcRequest(e,Gu(t,n))})}},{get:(e,t,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(Ye.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...n))})}_handleChainChanged({chainId:e,networkVersion:t}={}){super._handleChainChanged({chainId:e,networkVersion:t}),this._state.isConnected&&t!==Yn(this,qn)&&(Er(this,qn,t),this._state.initialized&&this.emit("networkChanged",Yn(this,qn)))}};qn=new WeakMap;var Y=(0,Ct.default)("MM_SDK");Y.color="#FFAC1C";var mS={},mo={};Object.defineProperty(mo,"__esModule",{value:!0}),mo.EthereumProviderError=mo.EthereumRpcError=void 0;var RP=BD,Sd=class extends Error{constructor(t,n,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=t,r!==void 0&&(this.data=r)}serialize(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return RP.default(this.serialize(),OP,2)}};mo.EthereumRpcError=Sd;function OP(e,t){if(t!=="[Circular]")return t}mo.EthereumProviderError=class extends Sd{constructor(e,t,n){if(!function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}};var Km={},uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.errorValues=uo.errorCodes=void 0,uo.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},uo.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;let t=uo,n=mo,r=t.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",i={code:r,message:s(r)};function s(d,f=o){if(Number.isInteger(d)){let h=d.toString();if(u(t.errorValues,h))return t.errorValues[h].message;if(c(d))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return f}function a(d){if(!Number.isInteger(d))return!1;let f=d.toString();return!!t.errorValues[f]||!!c(d)}function c(d){return d>=-32099&&d<=-32e3}function l(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function u(d,f){return Object.prototype.hasOwnProperty.call(d,f)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=s,e.isValidCode=a,e.serializeError=function(d,{fallbackError:f=i,shouldIncludeStack:h=!1}={}){var p,g;if(!f||!Number.isInteger(f.code)||typeof f.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();let w={};if(d&&typeof d=="object"&&!Array.isArray(d)&&u(d,"code")&&a(d.code)){let D=d;w.code=D.code,D.message&&typeof D.message=="string"?(w.message=D.message,u(D,"data")&&(w.data=D.data)):(w.message=s(w.code),w.data={originalError:l(d)})}else{w.code=f.code;let D=(p=d)===null||p===void 0?void 0:p.message;w.message=D&&typeof D=="string"?D:f.message,w.data={originalError:l(d)}}let m=(g=d)===null||g===void 0?void 0:g.stack;return h&&d&&m&&typeof m=="string"&&(w.stack=m),w}}(Km);var Id={};Object.defineProperty(Id,"__esModule",{value:!0}),Id.ethErrors=void 0;var qm=mo,yS=Km,vt=uo;function fn(e,t){let[n,r]=vS(t);return new qm.EthereumRpcError(e,n||yS.getMessageFromCode(e),r)}function _a(e,t){let[n,r]=vS(t);return new qm.EthereumProviderError(e,n||yS.getMessageFromCode(e),r)}function vS(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:t,data:n}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}Id.ethErrors={rpc:{parse:e=>fn(vt.errorCodes.rpc.parse,e),invalidRequest:e=>fn(vt.errorCodes.rpc.invalidRequest,e),invalidParams:e=>fn(vt.errorCodes.rpc.invalidParams,e),methodNotFound:e=>fn(vt.errorCodes.rpc.methodNotFound,e),internal:e=>fn(vt.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return fn(t,e)},invalidInput:e=>fn(vt.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>fn(vt.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>fn(vt.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>fn(vt.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>fn(vt.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>fn(vt.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>_a(vt.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>_a(vt.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>_a(vt.errorCodes.provider.unsupportedMethod,e),disconnected:e=>_a(vt.errorCodes.provider.disconnected,e),chainDisconnected:e=>_a(vt.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:n,data:r}=e;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new qm.EthereumProviderError(t,n,r)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;let t=mo;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});let n=Km;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});let r=Id;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});let o=uo;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(mS);var wS={exports:{}};wS.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(r,o,i){n.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:i})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,o){if(1&o&&(r=n(r)),8&o||4&o&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&o&&typeof r!="string")for(var s in r)n.d(i,s,function(a){return r[a]}.bind(null,s));return i},n.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(o,"a",o),o},n.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),o=function(){function i(){}return i.getFirstMatch=function(s,a){var c=a.match(s);return c&&c.length>0&&c[1]||""},i.getSecondMatch=function(s,a){var c=a.match(s);return c&&c.length>1&&c[2]||""},i.matchAndReturnConst=function(s,a,c){if(s.test(a))return c},i.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},i.getVersionPrecision=function(s){return s.split(".").length},i.compareVersions=function(s,a,c){c===void 0&&(c=!1);var l=i.getVersionPrecision(s),u=i.getVersionPrecision(a),d=Math.max(l,u),f=0,h=i.map([s,a],function(p){var g=d-i.getVersionPrecision(p),w=p+new Array(g+1).join(".0");return i.map(w.split("."),function(m){return new Array(20-m.length).join("0")+m}).reverse()});for(c&&(f=d-Math.min(l,u)),d-=1;d>=f;){if(h[0][d]>h[1][d])return 1;if(h[0][d]===h[1][d]){if(d===f)return 0;d-=1}else if(h[0][d]<h[1][d])return-1}},i.map=function(s,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(c=0;c<s.length;c+=1)l.push(a(s[c]));return l},i.find=function(s,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(c=0,l=s.length;c<l;c+=1){var u=s[c];if(a(u,c))return u}},i.assign=function(s){for(var a,c,l=s,u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[s].concat(d));var h=function(){var p=d[a];typeof p=="object"&&p!==null&&Object.keys(p).forEach(function(g){l[g]=p[g]})};for(a=0,c=d.length;a<c;a+=1)h();return s},i.getBrowserAlias=function(s){return r.BROWSER_ALIASES_MAP[s]},i.getBrowserTypeByAlias=function(s){return r.BROWSER_MAP[s]||""},i}();t.default=o,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,o=(r=n(91))&&r.__esModule?r:{default:r},i=n(18);function s(c,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}var a=function(){function c(){}var l,u,d;return c.getParser=function(f,h){if(h===void 0&&(h=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new o.default(f,h)},c.parse=function(f){return new o.default(f).getResult()},l=c,d=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(u=null)&&s(l.prototype,u),d&&s(l,d),c}();t.default=a,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=c(n(92)),o=c(n(93)),i=c(n(94)),s=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=function(){function u(f,h){if(h===void 0&&(h=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},h!==!0&&this.parse()}var d=u.prototype;return d.getUA=function(){return this._ua},d.test=function(f){return f.test(this._ua)},d.parseBrowser=function(){var f=this;this.parsedResult.browser={};var h=a.default.find(r.default,function(p){if(typeof p.test=="function")return p.test(f);if(p.test instanceof Array)return p.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var f=this;this.parsedResult.os={};var h=a.default.find(o.default,function(p){if(typeof p.test=="function")return p.test(f);if(p.test instanceof Array)return p.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(f){var h=this.getOS().name;return f?String(h).toLowerCase()||"":h||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(f){f===void 0&&(f=!1);var h=this.getPlatform().type;return f?String(h).toLowerCase()||"":h||""},d.parsePlatform=function(){var f=this;this.parsedResult.platform={};var h=a.default.find(i.default,function(p){if(typeof p.test=="function")return p.test(f);if(p.test instanceof Array)return p.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var f=this;this.parsedResult.engine={};var h=a.default.find(s.default,function(p){if(typeof p.test=="function")return p.test(f);if(p.test instanceof Array)return p.test.some(function(g){return f.test(g)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(f){var h=this,p={},g=0,w={},m=0;if(Object.keys(f).forEach(function(W){var $=f[W];typeof $=="string"?(w[W]=$,m+=1):typeof $=="object"&&(p[W]=$,g+=1)}),g>0){var D=Object.keys(p),b=a.default.find(D,function(W){return h.isOS(W)});if(b){var O=this.satisfies(p[b]);if(O!==void 0)return O}var N=a.default.find(D,function(W){return h.isPlatform(W)});if(N){var z=this.satisfies(p[N]);if(z!==void 0)return z}}if(m>0){var q=Object.keys(w),U=a.default.find(q,function(W){return h.isBrowser(W,!0)});if(U!==void 0)return this.compareVersion(w[U])}},d.isBrowser=function(f,h){h===void 0&&(h=!1);var p=this.getBrowserName().toLowerCase(),g=f.toLowerCase(),w=a.default.getBrowserTypeByAlias(g);return h&&w&&(g=w.toLowerCase()),g===p},d.compareVersion=function(f){var h=[0],p=f,g=!1,w=this.getBrowserVersion();if(typeof w=="string")return f[0]===">"||f[0]==="<"?(p=f.substr(1),f[1]==="="?(g=!0,p=f.substr(2)):h=[],f[0]===">"?h.push(1):h.push(-1)):f[0]==="="?p=f.substr(1):f[0]==="~"&&(g=!0,p=f.substr(1)),h.indexOf(a.default.compareVersions(w,p,g))>-1},d.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},d.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},d.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},d.is=function(f,h){return h===void 0&&(h=!1),this.isBrowser(f,h)||this.isOS(f)||this.isPlatform(f)},d.some=function(f){var h=this;return f===void 0&&(f=[]),f.some(function(p){return h.is(p)})},u}();t.default=l,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=o.default.getFirstMatch(i,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(c,a),version:o.default.getSecondMatch(c,a)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/Roku\/DVP/],describe:function(a){var c=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:i.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=o.default.getWindowsVersionName(c);return{name:i.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:i.OS_MAP.iOS},l=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=o.default.getMacOSVersionName(c),u={name:i.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=o.default.getAndroidVersionName(c),u={name:i.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:i.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||o.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:i.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.PlayStation4,version:c}}}];t.default=s,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=o.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=o.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:i.ENGINE_MAP.Blink};var c=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:i.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:i.ENGINE_MAP.Trident},l=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:i.ENGINE_MAP.Presto},l=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:i.ENGINE_MAP.Gecko},l=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:i.ENGINE_MAP.WebKit},l=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];t.default=s,e.exports=t.default}});var ES=Pd(wS.exports),Ft={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"},Nn=class e{constructor({shouldSetOnWindow:t,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:o,sdkInstance:i}){let s=new am({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:t,shouldShimWeb3:o,autoRequestAccounts:!1}),a=new Proxy(s,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=i,t&&typeof window<"u")try{c=s,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){Y("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(o&&typeof window<"u")try{(function(l,u=console){let d=!1,f=!1;if(!window.web3){let h="__isMetaMaskShim__",p={currentProvider:l};Object.defineProperty(p,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),p=new Proxy(p,{get:(g,w,...m)=>(w!=="currentProvider"||d?w==="currentProvider"||w===h||f||(f=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch(D=>{u.debug("MetaMask: Failed to log web3 shim usage.",D)})):(d=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(g,w,...m)),set:(...g)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...g))}),Object.defineProperty(window,"web3",{value:p,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){Y("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",l=>{this.sdkInstance.emit(Ft.DisplayURI,l)}),this.provider.on("_initialized",()=>{let l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Ft.Initialized,l),Y("[Ethereum: constructor()] provider initialized",l)})}static init(t){var n;return Y("[Ethereum: init()] Initializing Ethereum service"),this.instance=new e(t),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var t;if(!(!((t=this.instance)===null||t===void 0)&&t.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var t;if(!(!((t=this.instance)===null||t===void 0)&&t.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}},Td=class e{constructor({useDeepLink:t,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=t,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(t,n,r){return function(o,i,s,a){let{state:c}=o;Y(`[PlatfformManager: openDeeplink()] universalLink --> ${i}`),Y(`[PlatfformManager: openDeeplink()] deepLink --> ${s}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?s:i,a);if(Y(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?s:i}`),c.useDeeplink)typeof window<"u"&&(window.location.href=s);else if(typeof document<"u"){let l=document.createElement("a");l.href=i,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}}(this,t,n,r)}isReactNative(){var t;return this.isNotBrowser()&&typeof window<"u"&&window?.navigator&&((t=window.navigator)===null||t===void 0?void 0:t.product)==="ReactNative"}isMetaMaskInstalled(){return function(){let t=Nn.getProvider()||window?.ethereum;return Y(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${t?.isMetaMask} isConnected=${t?.isConnected()}`),t?.isMetaMask&&t?.isConnected()}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var t,n;let r=ES.parse(window.navigator.userAgent);return((t=r?.platform)===null||t===void 0?void 0:t.type)==="mobile"||((n=r?.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===bt.MobileWeb}static isNotBrowser(){var t;return typeof window>"u"||!window?.navigator||kt!==void 0&&((t=kt?.navigator)===null||t===void 0?void 0:t.product)==="ReactNative"||navigator?.product==="ReactNative"}isNotBrowser(){return e.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return e.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(t){let{state:n}=t;return n.platformType?n.platformType:t.isReactNative()?bt.ReactNative:t.isNotBrowser()?bt.NonBrowser:t.isMetaMaskMobileWebView()?bt.MetaMaskMobileWebview:t.isMobile()?bt.MobileWeb:bt.DesktopWeb}(this)}},bS=e=>te(void 0,void 0,void 0,function*(){if(Td.isBrowser()){let{StorageManagerWeb:n}=yield Promise.resolve().then(function(){return oL});return new n(e)}let t={persistChannelConfig:()=>te(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>te(void 0,void 0,void 0,function*(){}),persistAccounts:()=>te(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>te(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>te(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>te(void 0,void 0,void 0,function*(){}),terminate:()=>te(void 0,void 0,void 0,function*(){})};return Promise.resolve(t)}),am=class extends NP{constructor({connectionStream:t,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(t,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},Y(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return te(this,void 0,void 0,function*(){return Y(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){Y("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var t;let{accounts:n}=this._state;return n&&n.length!==0?((t=n[0])===null||t===void 0?void 0:t.toLowerCase())||"":(Y("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(t){this.state=Object.assign(Object.assign({},this.state),t)}handleAccountsChanged(t,n){return this._handleAccountsChanged(t,n)}handleDisconnect({terminate:t=!1}){(function({terminate:n=!1,instance:r}){let{state:o}=r;Y(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",mS.ethErrors.provider.disconnected()),o.providerStateRequested=!1})({terminate:t,instance:this})}_initializeStateAsync(){return te(this,void 0,void 0,function*(){return function(t){var n,r;return te(this,void 0,void 0,function*(){t.state===void 0&&(t.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});let{state:o}=t,i;if(o.providerStateRequested)Y("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let s;o.providerStateRequested=!0;let a=null,c=!1,l=!1,u=yield bS({enabled:!0});if(u){let d=yield u.getPersistedChannelConfig({});c=(n=d?.relayPersistence)!==null&&n!==void 0&&n,s=yield u.getCachedChainId();let f=yield u.getCachedAccounts();f.length>0&&(a=f[0])}if(Y(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:s,cachedSelectedAddress:a}),c)if(s&&a)i={accounts:[a],chainId:s,isUnlocked:!1},l=!0;else try{i=yield t.request({method:"metamask_getProviderState"})}catch(d){return t._log.error("MetaMask: Failed to get initial state. Please report this bug.",d),void(o.providerStateRequested=!1)}if(((r=i?.accounts)===null||r===void 0?void 0:r.length)===0)if(t.getSelectedAddress())i.accounts=[t.getSelectedAddress()];else{Y("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");let d=yield t.request({method:"eth_requestAccounts",params:[]});i.accounts=d}t._initializeState(i),o.providerStateRequested=!1,l&&(t._state.isConnected=!0,t.emit("connect",{chainId:i?.chainId}))}})}(this)})}_initializeState(t){return Y("[SDKProvider: _initializeState()]",t),function(n,r,o){return Y("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(o)}(this,super._initializeState.bind(this),t)}_handleChainChanged({chainId:t,networkVersion:n}={}){this.state.chainId=t,this.state.networkVersion=n,function({instance:r,chainId:o,networkVersion:i,superHandleChainChanged:s}){Y(`[SDKProvider: handleChainChanged()] chainId=${o} networkVersion=${i}`);let a=i;i||(Y("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),r._state.isConnected=!0,r.emit("connect",{chainId:o}),s({chainId:o,networkVersion:a})}({instance:this,chainId:t,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}},Ga,si={name:"@metamask/sdk",version:"0.32.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"^4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(e){e.INPAGE="metamask-inpage",e.CONTENT_SCRIPT="metamask-contentscript",e.PROVIDER="metamask-provider"})(Ga||(Ga={}));var DC="direct",Za="https://metamask.app.link/connect",Ya="metamask://connect",SC={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},PP=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,ue={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},Ja={[ue.ETH_REQUESTACCOUNTS]:!0,[ue.ETH_SENDTRANSACTION]:!0,[ue.ETH_SIGNTRANSACTION]:!0,[ue.ETH_SIGN]:!0,[ue.PERSONAL_SIGN]:!0,[ue.ETH_ACCOUNTS]:!1,[ue.ETH_CHAINID]:!1,[ue.PERSONAL_SIGN]:!0,[ue.ETH_SIGNTYPEDDATA]:!0,[ue.ETH_SIGNTYPEDDATA_V3]:!0,[ue.ETH_SIGNTYPEDDATA_V4]:!0,[ue.WALLET_REQUESTPERMISSIONS]:!0,[ue.WALLET_GETPERMISSIONS]:!0,[ue.WALLET_WATCHASSET]:!0,[ue.WALLET_ADDETHEREUMCHAIN]:!0,[ue.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[ue.METAMASK_CONNECTSIGN]:!0,[ue.METAMASK_CONNECTWITH]:!0,[ue.PERSONAL_EC_RECOVER]:!0,[ue.METAMASK_BATCH]:!0,[ue.METAMASK_OPEN]:!0},LP=Object.keys(Ja).filter(e=>Ja[e]===!0).map(e=>e.toLowerCase()),_S=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(e=>e.toLowerCase()),Ig=".sdk-comm",Md="providerType",cm=".MMSDK_cached_address",lm=".MMSDK_cached_chainId",zn={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},FP=1e6,tr;(function(e){e.TERMINATE="terminate",e.EXTENSION="extension",e.INITIALIZED="initialized"})(tr||(tr={}));var BP=typeof window<"u"&&window.localStorage;function jP({instance:e,msg:t}){return te(this,void 0,void 0,function*(){if(e._initialized||(Y("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield e.init()),Y(`[MetaMaskSDK: connectAndSign()] activeProvider=${e.activeProvider}`),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");let n=/^0x([0-9A-Fa-f]{2})*$/u.test(t)?t:function(r){let o;if(X!==void 0)o=X.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){let i=new TextEncoder().encode(r);o=Array.from(i).map(s=>s.toString(16).padStart(2,"0")).join("")}else{if(typeof kt!="object"||!("Buffer"in kt))throw new Error("Unable to convert string to hex: No available method.");o=kt.Buffer.from(r,"utf8").toString("hex")}return`0x${o}`}(t);return e.activeProvider.request({method:ue.METAMASK_CONNECTWITH,params:[{method:ue.PERSONAL_SIGN,params:[n]}]})})}function IC(e){var t,n;return te(this,void 0,void 0,function*(){Y("[MetaMaskSDK: connectWithExtensionProvider()] ",e),e.sdkProvider=e.activeProvider,e.activeProvider=window.extension,window.ethereum=window.extension;try{let r=yield(t=window.extension)===null||t===void 0?void 0:t.request({method:"eth_requestAccounts"});Y(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(Md,"extension"),e.extensionActive=!0,e.emit(Ft.ProviderUpdate,tr.EXTENSION),e.options.enableAnalytics&&((n=e.analytics)===null||n===void 0||n.send({event:Je.SDK_USE_EXTENSION}))})}function xd(e){let t;if(X!==void 0)t=X.from(e,"utf8").toString("base64");else if(typeof btoa=="function")t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/gu,(n,r)=>String.fromCharCode(parseInt(r,16))));else{if(typeof kt!="object"||!("Buffer"in kt))throw new Error("Unable to base64 encode: No available method.");t=kt.Buffer.from(e,"utf8").toString("base64")}return t}function VP(e,t,n,r){var o,i,s,a,c,l,u,d,f,h,p,g,w,m,D,b,O,N,z,q;return te(this,void 0,void 0,function*(){let U=(o=e.state.remote)===null||o===void 0?void 0:o.isReady(),W=(i=e.state.remote)===null||i===void 0?void 0:i.isConnected(),$=(s=e.state.remote)===null||s===void 0?void 0:s.isPaused(),R=Nn.getProvider(),A=(a=e.state.remote)===null||a===void 0?void 0:a.getChannelId(),M=(c=e.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:k}=e.state,{method:B,data:V,triggeredInstaller:E}=(x=>{var C,_,T,I;let P;X.isBuffer(x)?(P=x.toJSON(),P._isBuffer=!0):P=x;let H=(C=P?.data)===null||C===void 0?void 0:C.method,F=!1;return typeof((_=P?.data)===null||_===void 0?void 0:_.params)=="object"&&((I=(T=P?.data)===null||T===void 0?void 0:T.params)===null||I===void 0?void 0:I.__triggeredInstaller)===!0&&(F=!0,P.data.params=P.data.params.wrappedParams),{method:H,data:P,triggeredInstaller:F}})(t);if(Y(`[RCPMS: write()] method='${B}' isRemoteReady=${U} channelId=${A} isSocketConnected=${W} isRemotePaused=${$} providerConnected=${R.isConnected()}`,t),!A)return B!==ue.METAMASK_GETPROVIDERSTATE&&Y(`[RCPMS: write()] ${B} --> channelId is undefined`),r(new Error("disconnected"));Y(`[RCPMS: write()] remote.isPaused()=${(l=e.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${M} ready=${U} socketConnected=${W}`,t);let y=(u=e.state.platformManager)===null||u===void 0?void 0:u.isSecure(),v=(f=(d=e.state.platformManager)===null||d===void 0?void 0:d.isMobileWeb())!==null&&f!==void 0&&f,S=(p=(h=e.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&p!==void 0&&p&&v&&M;try{if(!E){let _=JSON.stringify(V?.data);if(_.length>FP)return r(new Error(`Message size ${_.length} exceeds maximum allowed size of 1000000 bytes`));(g=e.state.remote)===null||g===void 0||g.sendMessage(V?.data).then(()=>{Y(`[RCPMS: _write()] ${B} sent successfully`)}).catch(T=>{Y("[RCPMS: _write()] error sending message",T)})}if(!y)return Y(`[RCPMS: _write()] unsecure platform for method ${B} -- return callback`),r();if(E)return Y("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();let x=(D=(m=(w=e.state.remote)===null||w===void 0?void 0:w.getKeyInfo())===null||m===void 0?void 0:m.ecies.public)!==null&&D!==void 0?D:"",C=encodeURI(`channelId=${A}&pubkey=${x}&comm=socket&t=d&v=2`);if(S){let _=JSON.stringify(V?.data),T=(b=e.state.remote)===null||b===void 0?void 0:b.encrypt(_);if(!T)return Y("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));C+=`&scheme=${k}&rpc=${xd(T)}`}if(!(!((O=e.state.platformManager)===null||O===void 0)&&O.isMetaMaskInstalled()))return Y("[RCPMS: _write()] prevent deeplink until installation is completed."),r();Ja[B]?(Y(`[RCPMS: _write()] redirect link for '${B}' socketConnected=${W} connect?${C}`),(N=e.state.platformManager)===null||N===void 0||N.openDeeplink(`${Za}?${C}`,`${Ya}?${C}`,"_self")):!((z=e.state.remote)===null||z===void 0)&&z.isPaused()?(Y(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${B}`),(q=e.state.platformManager)===null||q===void 0||q.openDeeplink(`${Za}?redirect=true&${C}`,`${Ya}?redirect=true&${C}`,"_self")):Y(`[RCPMS: _write()] method ${B} doesn't need redirect.`)}catch(x){return Y("[RCPMS: _write()] error sending message",x),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}var um=class extends ws.Duplex{constructor({name:t,remote:n,deeplinkProtocol:r,platformManager:o}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=t,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=o,this._onMessage=this._onMessage.bind(this),this.state.remote.on(ie.MESSAGE,this._onMessage)}_write(t,n,r){return te(this,void 0,void 0,function*(){return VP(this,t,0,r)})}_read(){}_onMessage(t){return function(n,r){try{if(Y("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof r?.data!="object")return;if(!r?.name)return void Y("[RCPMS: onMessage()] ignore message without name",r);if(r?.name!==Ga.PROVIDER)return void Y(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(X.isBuffer(r)){let o=X.from(r);n.push(o)}else n.push(r)}catch(o){Y(`[RCPMS: onMessage()] ignore message error err=${o}`)}}(this,t)}start(){}},TC=1,CS=e=>new Promise(t=>{setTimeout(()=>{t(!0)},e)}),$P=({checkInstallationOnAllCalls:e=!1,communicationLayerPreference:t,injectProvider:n,shouldShimWeb3:r,platformManager:o,installer:i,sdk:s,remoteConnection:a,debug:c})=>te(void 0,void 0,void 0,function*(){var l,u;let d=(({name:$,remoteConnection:R})=>{if(!R||!R?.getConnector())throw new Error("Missing remote connection parameter");return new um({name:$,remote:R?.getConnector(),deeplinkProtocol:R?.state.deeplinkProtocol,platformManager:R?.getPlatformManager()})})({name:Ga.INPAGE,target:Ga.CONTENT_SCRIPT,platformManager:o,communicationLayerPreference:t,remoteConnection:a}),f=o.getPlatformType(),h=s.options.dappMetadata,p=`Sdk/Javascript SdkVersion/${si.version} Platform/${f} dApp/${(l=h.url)!==null&&l!==void 0?l:h.name} dAppTitle/${h.name}`,g=null,w=null,m=(u=s.options.storage)===null||u===void 0?void 0:u.storageManager;if(m){try{let $=yield m.getCachedAccounts();$.length>0&&(g=$[0])}catch($){console.error(`[initializeMobileProvider] failed to get cached addresses: ${$}`)}try{let $=yield m.getCachedChainId();$&&(w=$)}catch($){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${$}`)}}Y(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${w}`);let D=!(!n||f===bt.NonBrowser||f===bt.ReactNative),b=Nn.init({shouldSetOnWindow:D,connectionStream:d,shouldShimWeb3:r,sdkInstance:s}),O=!1,N=$=>{O=$},z=()=>O,q=($,R,A,M)=>te(void 0,void 0,void 0,function*(){var k,B,V,E,y,v,S,x,C;let _=Nn.getProvider();if(O){_.emit("display_uri",a?.state.qrcodeLink||""),a?.showActiveModal();let G=z();for(;G;){let ee=z(),Q=a?.isAuthorized();G=ee&&!Q,Y(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${ee} authorized: ${Q}`),yield CS(1e3)}return Y("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),A(...R)}let T=o.isMetaMaskInstalled(),I=a?.isConnected(),P=null,H=null,F=null;if(P=(k=_.getSelectedAddress())!==null&&k!==void 0?k:g,F=_.getChainId()||w,P&&m&&P!==g&&m.persistAccounts([P]).catch(G=>{console.error(`[initializeMobileProvider] failed to persist account: ${G}`)}),F&&(w=F,m&&m.persistChainId(F).catch(G=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${G}`)})),Y("[initializeMobileProvider: sendRequest()]",{selectedAddress:P,chainId:F}),M&&Y(`[initializeMobileProvider: sendRequest()] method=${$} ongoing=${O} selectedAddress=${P} isInstalled=${T} checkInstallationOnAllCalls=${e} socketConnected=${I}`),P&&$.toLowerCase()===ue.ETH_ACCOUNTS.toLowerCase())return[P];if(F&&$.toLowerCase()===ue.ETH_CHAINID.toLowerCase())return F;let j=[ue.ETH_REQUESTACCOUNTS,ue.WALLET_REQUESTPERMISSIONS,ue.METAMASK_CONNECTSIGN,ue.METAMASK_CONNECTWITH],L=!Ja[$],K=(B=s.options.readonlyRPCMap)===null||B===void 0?void 0:B[F];if(K&&L)try{let G=(V=R?.[0])===null||V===void 0?void 0:V.params,ee=yield(({rpcEndpoint:Q,method:se,sdkInfo:re,params:ne})=>te(void 0,void 0,void 0,function*(){let ae=JSON.stringify({jsonrpc:"2.0",method:se,params:ne,id:(TC+=1,TC)}),ce={Accept:"application/json","Content-Type":"application/json"},pe;Q.includes("infura")&&(ce["Metamask-Sdk-Info"]=re);try{pe=yield(0,bm.default)(Q,{method:"POST",headers:ce,body:ae})}catch(he){throw he instanceof Error?new Error(`Failed to fetch from RPC: ${he.message}`):new Error(`Failed to fetch from RPC: ${he}`)}if(!pe.ok)throw new Error(`Server responded with a status of ${pe.status}`);return(yield pe.json()).result}))({rpcEndpoint:K,sdkInfo:p,method:$,params:G||[]});return M&&Y(`initializeProvider::ReadOnlyRPCResponse ${ee}`),ee}catch(G){console.warn(`[initializeMobileProvider: sendRequest()] method=${$} readOnlyRPCRequest failed:`,G)}if((!T||T&&!I)&&$!==ue.METAMASK_GETPROVIDERSTATE){let G=((E=R?.[0])===null||E===void 0?void 0:E.params)||[];if(j.indexOf($)!==-1||e){N(!0);let ee=$===ue.METAMASK_CONNECTWITH,Q=`${Date.now()}`;try{yield i.start({wait:!1,connectWith:ee?{method:$,id:Q,params:G}:void 0}),yield new Promise((se,re)=>{a?.isAuthorized()&&(Y("[initializeMobileProvider: sendRequest()] already authorized"),se(!0)),a?.getConnector().once(ie.AUTHORIZED,()=>{se(!0)}),s.once(ie.PROVIDER_UPDATE,ne=>{Y(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${ne}`),ne===tr.EXTENSION?re(ie.PROVIDER_UPDATE):re(new Error("Connection Terminated"))})})}catch(se){if(tr.EXTENSION===se){if(Y(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${$} on the active provider`),$.toLowerCase()===ue.METAMASK_CONNECTSIGN.toLowerCase()){let re=yield(y=s.getProvider())===null||y===void 0?void 0:y.request({method:ue.ETH_REQUESTACCOUNTS,params:[]});if(!re.length)throw new Error("SDK state invalid -- undefined accounts");let ne=yield(v=s.getProvider())===null||v===void 0?void 0:v.request({method:ue.PERSONAL_SIGN,params:[G[0],re[0]]});return s.emit(Ft.ConnectWithResponse,ne),ne}if($.toLowerCase()===ue.METAMASK_CONNECTWITH.toLowerCase()){let[re]=G,ne=yield(({method:ae,sdk:ce,params:pe})=>te(void 0,void 0,void 0,function*(){var he,fe,we,Ce;if(!ce.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");Y("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",ae,pe);let Qe=yield(he=ce.getProvider())===null||he===void 0?void 0:he.request({method:ue.ETH_REQUESTACCOUNTS,params:[]});if(!Qe.length)throw new Error("SDK state invalid -- undefined accounts");if(ae?.toLowerCase()===ue.PERSONAL_SIGN.toLowerCase()){let mt={method:ae,params:[pe[0],Qe[0]]};return yield(fe=ce.getProvider())===null||fe===void 0?void 0:fe.request(mt)}if(ae?.toLowerCase()===ue.ETH_SENDTRANSACTION.toLowerCase()){let mt={method:ae,params:[Object.assign(Object.assign({},pe[0]),{from:Qe[0]})]};return yield(we=ce.getProvider())===null||we===void 0?void 0:we.request(mt)}return _S.includes(ae.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${ae} -- not handled by the extension -- call separately`),Qe):yield(Ce=ce.getProvider())===null||Ce===void 0?void 0:Ce.request({method:ae,params:pe})}))({method:re.method,sdk:s,params:re.params});return s.emit(Ft.ConnectWithResponse,ne),ne}return Y(`[initializeMobileProvider: sendRequest()] sending '${$}' on active provider`,G),yield(S=s.getProvider())===null||S===void 0?void 0:S.request({method:$,params:G})}throw se===ie.REJECTED?(a?.closeModal(),(x=s.getProvider())===null||x===void 0||x.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(Y(`[initializeMobileProvider: sendRequest()] failed to start installer: ${se}`),se)}finally{N(!1)}if($===ue.ETH_REQUESTACCOUNTS)return H=yield new Promise(se=>{let re=setInterval(()=>{let{accounts:ne}=_.getState();ne&&(clearInterval(re),se(ne))},100)}),Y(`[initializeMobileProvider: sendRequest()] selectedAddress: ${P} --- SKIP rpc call`),H;if($===ue.METAMASK_CONNECTWITH)try{let se=0,re=5,ne=({resolve:he,reject:fe})=>{se+=1;let we=a?.getConnector().getRPCMethodTracker(),Ce=we?.[Q];return Y(`TRACKER: update method ${Q}`,Ce),Ce?.result?(Y("[initializeMobileProvider: sendRequest()] found result",Ce.result),s.emit(Ft.ConnectWithResponse,Ce.result),void he(Ce.result)):Ce?.error?(Y("[initializeMobileProvider: sendRequest()] found error",Ce.error),void fe(Ce.error)):se>=re?(Y("[initializeMobileProvider: sendRequest()] max message count reached without result"),void fe(new Error("Max message count reached without result"))):void Y("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")},ae,ce,pe=yield new Promise((he,fe)=>{let we=a?.getConnector().getRPCMethodTracker();Y(`TRACKER: method ${Q}`,we),we?.[Q].result?(Y("[initializeMobileProvider: sendRequest()] found result",we?.[Q].result),he(we?.[Q].result)):we?.[Q].error&&(Y("[initializeMobileProvider: sendRequest()] found error",we?.[Q].error),fe(we?.[Q].error)),ce=()=>ne({resolve:he,reject:fe}),ae=a?.getConnector().on(ie.RPC_UPDATE,ce)});return ce&&ae?.off(ie.RPC_UPDATE,ce),Y("TRACKER: result",pe),pe}catch(se){throw Y("[initializeMobileProvider: sendRequest()] error:",se),se}return R[0]&&typeof R[0]=="object"&&(R[0].params={__triggeredInstaller:!0,wrappedParams:R[0].params}),A(...R)}if(o.isSecure()&&Ja[$])return A(...R);if(s.isExtensionActive())return Y(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${$}' to it`,R,G),yield(C=s.getProvider())===null||C===void 0?void 0:C.request({method:$,params:G});throw Y(`[initializeMobileProvider: sendRequest()] method=${$} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{let G=yield A(...R);if(Y(`[initializeMobileProvider: sendRequest()] method=${$} rpcResponse`,G),$===ue.WALLET_REQUESTPERMISSIONS){let ee=G.reduce((Q,se)=>{var re;if(se.parentCapability==="eth_accounts"){let ne=(re=se.caveats.find(ae=>ae.type==="restrictReturnedAccounts"))===null||re===void 0?void 0:re.value;ne&&Q.push(...ne)}return Q},[]);Y("[initializeMobileProvider: sendRequest()] accountsToPersist:",ee),ee.length>0&&(_.handleAccountsChanged(ee,!1),m?.persistAccounts(ee))}return G}catch(G){throw console.error("[initializeMobileProvider: sendRequest()] error:",G),G}}),{request:U}=b;b.request=(...$)=>te(void 0,void 0,void 0,function*(){return q($?.[0].method,$,U,c)});let{send:W}=b;return b.send=(...$)=>te(void 0,void 0,void 0,function*(){return q($?.[0],$,W,c)}),Y("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),b});function UP(e){var t,n,r,o;return te(this,void 0,void 0,function*(){let{options:i}=e,s={communicationLayerPreference:(t=i.communicationLayerPreference)!==null&&t!==void 0?t:ti.SOCKET,platformManager:e.platformManager,sdk:e,checkInstallationOnAllCalls:i.checkInstallationOnAllCalls,injectProvider:(n=i.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=i.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(o=i.extensionOnly)===null||o===void 0||o,installer:e.installer,remoteConnection:e.remoteConnection,debug:e.debug},a=yield $P(s);e.activeProvider=a,function(c){var l,u,d,f;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(Ft.ConnectionStatus,h=>{c.emit(Ft.ConnectionStatus,h)}),(f=(d=c.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||f===void 0||f.on(Ft.ServiceStatus,h=>{c.emit(Ft.ServiceStatus,h)})}(e)})}var HP="sdk",dm=class{constructor({serverUrl:t,enabled:n,originatorInfo:r}){this.serverURL=ms,this.serverURL=t,this.originatorInfo=r,this.enabled=n==null||n}send({event:t,params:n}){if(!this.enabled)return;let r=Object.assign(Object.assign({id:HP,event:t,sdkVersion:si.version},this.originatorInfo),{params:n});Y(`[Analytics: send()] event: ${t}`,r),Tr(r,this.serverURL).catch(o=>{Y(`[Analytics: send()] error: ${o}`)})}},zP=()=>{if(typeof document>"u")return;let e,t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)t[n].getAttribute("rel")!=="icon"&&t[n].getAttribute("rel")!=="shortcut icon"||(e=t[n].getAttribute("href"));return e},KP=163400;function MC(e){var t,n,r;let{dappMetadata:o}=e,i=function({url:u,name:d}){var f;let h=u+d,p=xd(h);if(!localStorage)return"";let g=(f=localStorage.getItem(p))!==null&&f!==void 0?f:"";if(!g){g=aa();try{localStorage.setItem(p,g)}catch{return""}}return g}({url:(t=o?.url)!==null&&t!==void 0?t:"no_url",name:(n=o?.name)!==null&&n!==void 0?n:"no_name"}),s=(r=e.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=s===bt.DesktopWeb,c=s===bt.MetaMaskMobileWebview,l="N/A";return a?l="extension":c&&(l="mobile"),{id:i,from:l}}var fm=({provider:e,sdkInstance:t})=>{if("state"in e)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(e,{get:(n,r)=>r==="request"?function(o){var i,s;return te(this,void 0,void 0,function*(){Y("[wrapExtensionProvider()] Overwriting request method",o);let{method:a,params:c}=o,l=LP.includes(a.toLowerCase()),{id:u,from:d}=MC(t);if(l&&((i=t.analytics)===null||i===void 0||i.send({event:Je.SDK_RPC_REQUEST,params:{method:a,from:d,id:u}})),a===ue.METAMASK_BATCH&&Array.isArray(c))return(({target:h,args:p,trackEvent:g,sdkInstance:w})=>te(void 0,void 0,void 0,function*(){var m,D;if(p.method!=="metamask_batch")throw new Error("Invalid usage");let b=[],O=(m=p?.params)!==null&&m!==void 0?m:[];for(let q of O){let U=yield h?.request({method:q.method,params:q.params});b.push(U)}let{id:N,from:z}=MC(w);return g&&((D=w.analytics)===null||D===void 0||D.send({event:Je.SDK_RPC_REQUEST_DONE,params:{method:p.method,from:z,id:N}})),b}))({target:n,args:o,trackEvent:l,sdkInstance:t});if(a.toLowerCase()===ue.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:h,params:p})=>te(void 0,void 0,void 0,function*(){let g=yield h.request({method:ue.ETH_REQUESTACCOUNTS,params:[]});if(!g.length)throw new Error("SDK state invalid -- undefined accounts");return yield h.request({method:ue.PERSONAL_SIGN,params:[p[0],g[0]]})}))({target:n,params:c});if(a.toLowerCase()===ue.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:h,params:p})=>te(void 0,void 0,void 0,function*(){let[g]=p,w=g.method,m=g.params,D=yield h.request({method:ue.ETH_REQUESTACCOUNTS,params:[]});if(!D.length)throw new Error("SDK state invalid -- undefined accounts");return w?.toLowerCase()===ue.PERSONAL_SIGN.toLowerCase()?yield h.request({method:w,params:[m[0],D[0]]}):w?.toLowerCase()===ue.ETH_SENDTRANSACTION.toLowerCase()?yield h.request({method:w,params:[Object.assign(Object.assign({},m[0]),{from:D[0]})]}):_S.includes(w.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${w} -- not handled by the extension -- call separately`),D):yield h.request({method:w,params:m})}))({target:n,params:c});let f;try{return f=yield n.request(o),f}finally{l&&((s=t.analytics)===null||s===void 0||s.send({event:Je.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:u}}))}})}:r==="getChainId"?function(){return e.chainId}:r==="getNetworkVersion"?function(){return e.networkVersion}:r==="getSelectedAddress"?function(){return e.selectedAddress}:r==="isConnected"?function(){return e._state.isConnected}:n[r]})},Ad;function qP({mustBeMetaMask:e,sdkInstance:t}){return te(this,void 0,void 0,function*(){if(typeof window>"u")throw new Error("window not available");try{let n=yield new Promise((r,o)=>{let i=setTimeout(()=>{o(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(Ad.Announce,s=>{let a=s,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:d,uuid:f}=c??{};PP.test(f)&&u.startsWith(SC.NAME)&&SC.RDNS.includes(d)&&(clearTimeout(i),r(l))}),window.dispatchEvent(new Event(Ad.Request))});return fm({provider:n,sdkInstance:t})}catch{if(!e&&window.ethereum)return fm({provider:window.ethereum,sdkInstance:t});throw new Error("Provider not found")}})}(function(e){e.Announce="eip6963:announceProvider",e.Request="eip6963:requestProvider"})(Ad||(Ad={}));var WP=e=>te(void 0,void 0,void 0,function*(){let{options:t}=e,{infuraAPIKey:n}=t;if(!n)return;let r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};e.options.readonlyRPCMap?e.options.readonlyRPCMap=Object.assign(Object.assign({},e.options.readonlyRPCMap),r):e.options.readonlyRPCMap=r}),GP=e=>te(void 0,void 0,void 0,function*(){let{options:t}=e,{readonlyRPCMap:n}=t;if(n)try{Y("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),e.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}});function ZP(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(l){try{c(r.next(l))}catch(u){i(u)}}function a(l){try{c(r.throw(l))}catch(u){i(u)}}function c(l){var u;l.done?o(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(s,a)}c((r=r.apply(e,[])).next())})}function YP(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(u[0]===6&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(d){u=[6,d],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,l])}}}var xC="INSTALLED",AC="NOT_INSTALLED",kC="REGISTERED",NC="REGISTERING",RC="RELOADING",OC={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},Pu="REGISTRATION_IN_PROGRESS",PC="FORWARDER_ID",JP=function(){function e(t){var n=t===void 0?{}:t,r=n.forwarderOrigin,o=r===void 0?"https://fwd.metamask.io":r,i=n.forwarderMode,s=i===void 0?e.FORWARDER_MODE.INJECT:i;this.forwarderOrigin=o,this.forwarderMode=s,this.state=e.isMetaMaskInstalled()?xC:AC;var a=e._detectBrowser();this.downloadUrl=a?OC[a]:OC.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),s===e.FORWARDER_MODE.INJECT&&sessionStorage.getItem(Pu)==="true"&&e._injectForwarder(this.forwarderOrigin)}return e.prototype._onMessage=function(t){if(t.origin===this.forwarderOrigin)return t.data.type==="metamask:reload"?this._onMessageFromForwarder(t):void console.debug("Unknown message from '"+t.origin+"' with data "+JSON.stringify(t.data))},e.prototype._onMessageUnknownStateError=function(t){throw new Error("Unknown state: '"+t+"'")},e.prototype._onMessageFromForwarder=function(t){return ZP(this,0,void 0,function(){return YP(this,function(n){switch(n.label){case 0:switch(this.state){case RC:return[3,1];case AC:return[3,2];case xC:return[3,3];case NC:return[3,5];case kC:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=RC,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=NC,[4,e._register()];case 4:return n.sent(),this.state=kC,t.source.postMessage({type:"metamask:registrationCompleted"},t.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},e.prototype.startOnboarding=function(){sessionStorage.setItem(Pu,"true"),this._openDownloadPage(),this._openForwarder()},e.prototype.stopOnboarding=function(){sessionStorage.getItem(Pu)==="true"&&(this.forwarderMode===e.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),e._removeForwarder()),sessionStorage.setItem(Pu,"false"))},e.prototype._openForwarder=function(){this.forwarderMode===e.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):e._injectForwarder(this.forwarderOrigin)},e.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},e.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},e._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},e._injectForwarder=function(t){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",t),r.setAttribute("id",PC),n.insertBefore(r,n.children[0])},e._removeForwarder=function(){var t;(t=document.getElementById(PC))===null||t===void 0||t.remove()},e._detectBrowser=function(){var t=ES.parse(window.navigator.userAgent);return t.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(t.browser.name||"")?"CHROME":null},e.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},e}();function QP(e,{wait:t=!1}){return te(this,void 0,void 0,function*(){return Y(`[MetamaskInstaller: startInstaller()] wait=${t}`),t&&(yield CS(1e3)),yield e.checkInstallation()})}var hm=class{constructor({remote:t,preferDesktop:n,platformManager:r,debug:o=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=t,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=o}startDesktopOnboarding(){return function(){return te(this,void 0,void 0,function*(){Y("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new JP().startOnboarding()})}()}redirectToProperInstall(){return te(this,void 0,void 0,function*(){return function(t){var n,r;return te(this,void 0,void 0,function*(){let{state:o}=t,i=(n=o.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(Y(`[MetamaskInstaller: redirectToProperInstall()] platform=${i}`),i===bt.MetaMaskMobileWebview)return!1;o.isInstalling=!0;try{yield(r=o.remote)===null||r===void 0?void 0:r.startConnection({connectWith:o.connectWith}),o.isInstalling=!1,o.hasInstalled=!0}catch(s){throw o.isInstalling=!1,s}return!0})}(this)})}checkInstallation(){return te(this,void 0,void 0,function*(){return function(t){var n;return te(this,void 0,void 0,function*(){let{state:r}=t,o=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return Y(`[MetamaskInstaller: checkInstallation()] isInstalled=${o}`),!!o||(yield t.redirectToProperInstall())})}(this)})}start({wait:t=!1,connectWith:n}){return te(this,void 0,void 0,function*(){this.state.connectWith=n,Y(`[MetaMaskInstaller: start()] wait=${t}`,n),yield QP(this,{wait:t})})}},kd=class{constructor({debug:t,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=t!=null&&t,this.sdkVersion=n}loadComponent(t){return te(this,void 0,void 0,function*(){if(!this.defined[t]){this.defined[t]=!0;try{let n=yield Promise.resolve().then(function(){return kL});console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${t} modal:`,n)}}})}renderInstallModal(t){var n;return te(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",t),this.containers.install=t.parentElement,yield this.loadComponent("install");let r=document.createElement("mm-install-modal");r.link=t.link,r.preferDesktop=t.preferDesktop,r.sdkVersion=(n=t.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:o}})=>t.onClose(o)),r.addEventListener("startDesktopOnboarding",t.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",o=>{var i;return(i=t.onAnalyticsEvent)===null||i===void 0?void 0:i.call(t,o.detail)}),t.parentElement.appendChild(r)})}renderSelectModal(t){var n;return te(this,void 0,void 0,function*(){this.containers.select=t.parentElement,yield this.loadComponent("select");let r=document.createElement("mm-select-modal");r.link=t.link,r.sdkVersion=(n=t.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=t.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:o}})=>t.onClose(o)),r.addEventListener("connectWithExtension",t.connectWithExtension),t.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(t.link),100)})}renderPendingModal(t){var n;return te(this,void 0,void 0,function*(){this.containers.pending=t.parentElement,yield this.loadComponent("pending");let r=document.createElement("mm-pending-modal");r.sdkVersion=(n=t.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=t.displayOTP,r.addEventListener("close",t.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:o}})=>t.updateOTPValue(o)),t.onDisconnect&&r.addEventListener("disconnect",t.onDisconnect),t.parentElement.appendChild(r)})}updateOTPValue(t){let n=()=>{var r;let o=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!o&&(o.otpCode=t,!0)};setTimeout(()=>{n()},800)}updateQRCode(t){var n,r;let o=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(o)o.link=t;else{let i=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");i&&(i.link=t)}}unmount(){Object.entries(this.containers).forEach(([t,n])=>{var r;(r=n?.parentNode)===null||r===void 0||r.removeChild(n),this.containers[t]=void 0})}},XP=({link:e,debug:t,installer:n,terminate:r,connectWithExtension:o,preferDesktop:i,onAnalyticsEvent:s})=>{let a=null,c=null;Y("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),Y(`[UI: InstallModal-web: sdkWebInstallModal()] link=${e}`),Y(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${e}" --ios`),Y(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${e}" --android`),Y(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${e}"`);let l=u=>{var d;Y("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c?.parentNode&&((d=c.parentNode)===null||d===void 0||d.removeChild(c)),c=null,a=null,u===!0&&r?.()};return{mount:u=>{if(Y("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new kd({debug:t,sdkVersion:si.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),o?.()},onClose:l,link:e,preferDesktop:i!=null&&i}).catch(d=>{console.error(d)}):a.renderInstallModal({parentElement:c,preferDesktop:i!=null&&i,link:e,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:s}).catch(d=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",d)})},unmount:l}},eL=({onDisconnect:e,debug:t})=>{let n=null,r=null,o=()=>{Y("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n?.parentNode&&n.parentNode.removeChild(n),n=null,r=null},i=a=>{Y("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},s=({displayOTP:a}={displayOTP:!0})=>{Y("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new kd({debug:t,sdkVersion:si.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:o,onDisconnect:e,updateOTPValue:i,displayOTP:a}).catch(c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)}))};return s(),{mount:s,unmount:o,updateOTPValue:i}};function DS(e,t){var n,r,o,i;e.connector||(Y("[RemoteConnection: initializeConnector()] initialize connector"),e.connector=new Wg({platformType:t.platformManager.getPlatformType(),communicationLayerPreference:t.communicationLayerPreference,transports:t.transports,dappMetadata:Object.assign(Object.assign({},t.dappMetadata),{source:t._source}),analytics:t.enableAnalytics,communicationServerUrl:t.communicationServerUrl,sdkVersion:si.version,context:"dapp",ecies:t.ecies,storage:t.storage,logging:t.logging}),t.timer&&(Y("[RemoteConnection: initializeConnector()] reset background timer",t.timer),(r=(n=t.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(i=(o=t.timer)===null||o===void 0?void 0:o.runBackgroundTimer)===null||i===void 0||i.call(o,()=>!1,1e4)))}function pm(e){e.listeners.forEach(({event:t,handler:n})=>{var r;(r=e.connector)===null||r===void 0||r.off(t,n)}),e.listeners=[]}function tL(e,t,n){return te(this,void 0,void 0,function*(){return new Promise((r,o)=>{if(!e.connector)return void o(new Error("No connector available"));Y("[RemoteConnection: connectWithModalInstaller()]",{state:e,options:t,linkParams:n});let i=`${e.useDeeplink?Ya:Za}?${n}`;(function(s,a,c){var l,u,d,f;s.installModal=(u=(l=a.modals).install)===null||u===void 0?void 0:u.call(l,{link:c,preferDesktop:s.preferDesktop,installer:a.getMetaMaskInstaller(),terminate:()=>{Y("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),a.sdk.terminate().catch(h=>{console.warn("[MMSDK] failed to terminate connection",h)})},debug:s.developerMode,connectWithExtension:()=>{var h;return(h=a.connectWithExtensionProvider)===null||h===void 0||h.call(a),!1},onAnalyticsEvent:({event:h,params:p})=>{var g,w,m;let D=Object.assign(Object.assign({},p),{sdkVersion:a.sdk.getVersion(),dappId:(g=a.dappMetadata)===null||g===void 0?void 0:g.name,source:a._source,url:(w=a.dappMetadata)===null||w===void 0?void 0:w.url});(m=s.analytics)===null||m===void 0||m.send({event:h,params:D})}}),(f=(d=s.installModal)===null||d===void 0?void 0:d.mount)===null||f===void 0||f.call(d,c)})(e,t,i),t.sdk.once(ie.PROVIDER_UPDATE,s=>te(this,void 0,void 0,function*(){Y("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),s!==tr.TERMINATE?o(s):o({code:4001,message:"User rejected the request."})})),e.connector.once(ie.AUTHORIZED,()=>{r()}),e.connector.once(ie.REJECTED,()=>{o(ie.REJECTED)}),e.connector.once(ie.CLIENTS_READY,()=>te(this,void 0,void 0,function*(){Y("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),r()}))})})}function SS(e,t){function n(r,o){var i;(i=e.connector)===null||i===void 0||i.on(r,o),e.listeners.push({event:r,handler:o})}e.connector&&(pm(e),n(ie.WALLET_INIT,({accounts:r,chainId:o})=>te(this,void 0,void 0,function*(){Y(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${o}`);let i=Nn.getProvider();i._setConnected();let s={accounts:r,chainId:o,isUnlocked:!1};i._initializeState(s),i.emit("chainChanged",o),i.emit("accountsChanged",r)})),n(ie.AUTHORIZED,()=>te(this,void 0,void 0,function*(){var r,o,i,s;try{Y("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",e.pendingModal,e.installModal);let a=Nn.getProvider();a._setConnected(),(o=(r=e.pendingModal)===null||r===void 0?void 0:r.unmount)===null||o===void 0||o.call(r),(s=(i=e.installModal)===null||i===void 0?void 0:i.unmount)===null||s===void 0||s.call(i,!1),e.otpAnswer=void 0,e.authorized=!0,Y("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})),n(ie.TERMINATE,()=>{var r,o,i,s,a;(o=(r=e.pendingModal)===null||r===void 0?void 0:r.unmount)===null||o===void 0||o.call(r),(s=(i=e.installModal)===null||i===void 0?void 0:i.unmount)===null||s===void 0||s.call(i,!0),e.pendingModal=void 0,e.installModal=void 0,e.otpAnswer=void 0,(a=e.connector)===null||a===void 0||a.disconnect({terminate:!0}),e.authorized=!1,Nn.getProvider().handleDisconnect({terminate:!0}),pm(e),Y("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function nL(e,t,{initialCheck:n,connectWith:r}={}){var o,i,s,a,c,l,u,d,f,h,p,g,w,m,D,b,O,N,z;return te(this,void 0,void 0,function*(){try{if(DS(e,t),!e.connector)throw new Error("no connector defined");SS(e);let q=Nn.getProvider();e.authorized=!1,q.emit("connecting");let U=yield(o=e.connector)===null||o===void 0?void 0:o.originatorSessionConnect();Y(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,U);let W=(i=U?.channelId)!==null&&i!==void 0?i:"",$=(a=(s=e.connector.getKeyInfo())===null||s===void 0?void 0:s.ecies.public)!==null&&a!==void 0?a:"",R=(l=(c=e.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!U)return Promise.resolve();if(!U&&!n){let I=yield e.connector.generateChannelIdConnect();W=(u=I.channelId)!==null&&u!==void 0?u:"",$=(d=I.pubKey)!==null&&d!==void 0?d:"",R=(f=I.privKey)!==null&&f!==void 0?f:"";let P=Date.now();(h=e.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:W,localKey:R,lastActive:P,validUntil:P+ys})}if(n&&U?.channelId)return!((p=e.connector)===null||p===void 0)&&p.isConnected()||(Y(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,U),yield(g=e.connector)===null||g===void 0?void 0:g.connectToChannel({channelId:W})),Promise.resolve();U&&!(!((w=e.connector)===null||w===void 0)&&w.isConnected())&&(Y("[RemoteConnection: startConnection()] reconnecting to channel",U),yield(m=e.connector)===null||m===void 0?void 0:m.connectToChannel({channelId:W}));let A=!((D=e.platformManager)===null||D===void 0)&&D.isSecure()?"":"&t=q",M=si.version,{iconUrl:k,name:B,url:V,scheme:E}=t.dappMetadata||{},y=(b=e.platformManager)===null||b===void 0?void 0:b.getPlatformType(),v="N/A";typeof window<"u"&&window.location&&window.location.hostname?v=window.location.hostname:B!==void 0?v=B:V!==void 0&&(v=V);let S={url:V??"",title:B??"",icon:k,scheme:E??"",apiVersion:M,dappId:v||V||"N/A",platform:y??"",source:(O=t._source)!==null&&O!==void 0?O:""},x=xd(JSON.stringify(S)),C=`channelId=${W}&v=2&comm=${(N=e.communicationLayerPreference)!==null&&N!==void 0?N:""}&pubkey=${$}${A}&originatorInfo=${x}`;if(r){C+=`&rpc=${xd(JSON.stringify(r))}`;let I=e.connector.getRPCMethodTracker();I&&(I[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}let _=encodeURI(C),T=`${e.useDeeplink?Ya:Za}?${C}`;return e.qrcodeLink=T,e.developerMode&&Y(`[RemoteConnection: startConnection()] qrcodeLink=${_}`),q.emit("display_uri",T),!((z=e.platformManager)===null||z===void 0)&&z.isSecure()?(yield function(I,P){var H,F;return te(this,void 0,void 0,function*(){let j=`${Za}?${P}`,L=`${Ya}?${P}`;(F=(H=I.platformManager)===null||H===void 0?void 0:H.openDeeplink)===null||F===void 0||F.call(H,j,L,"_self")})}(e,_),new Promise((I,P)=>{var H,F,j;!((H=e.connector)===null||H===void 0)&&H.isAuthorized()?I():((F=e.connector)===null||F===void 0||F.once(ie.AUTHORIZED,()=>{I()}),(j=e.connector)===null||j===void 0||j.once(ie.REJECTED,()=>{P(ie.REJECTED)}))})):tL(e,t,_)}catch(q){throw console.error("[startConnection] error",q),q}})}var gm=class{constructor(t){var n,r,o;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=t;let i=((n=t.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=t.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=i,this.state.analytics=t.analytics,this.state.preferDesktop=(o=t.preferDesktop)!==null&&o!==void 0&&o,this.state.useDeeplink=t.sdk.options.useDeeplink,this.state.communicationLayerPreference=t.communicationLayerPreference,this.state.platformManager=t.platformManager,t.modals.install||(t.modals.install=XP),t.modals.otp||(t.modals.otp=eL)}startConnection(t){return te(this,void 0,void 0,function*(){return nL(this.state,this.options,t)})}initRemoteCommunication({sdkInstance:t}){var n,r,o;return te(this,void 0,void 0,function*(){let i=yield(r=(n=t.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){let s={privateKey:i?.localKey};this.options.ecies=s}DS(this.state,this.options),yield(o=this.getConnector())===null||o===void 0?void 0:o.initFromDappStorage(),SS(this.state,this.options)})}showActiveModal(){return function(t){var n,r,o,i;t.authorized?Y("[RemoteConnection: showActiveModal()] already authorized"):t.pendingModal?(r=(n=t.pendingModal).mount)===null||r===void 0||r.call(n):t.installModal&&((i=(o=t.installModal).mount)===null||i===void 0||i.call(o,t.qrcodeLink||""))}(this.state)}closeModal(){var t,n,r,o;(n=(t=this.state.pendingModal)===null||t===void 0?void 0:t.unmount)===null||n===void 0||n.call(t),(o=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||o===void 0||o.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var t;return(t=this.state.connector)===null||t===void 0?void 0:t.getChannelConfig()}getKeyInfo(){var t;return(t=this.state.connector)===null||t===void 0?void 0:t.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var t;return((t=this.state.connector)===null||t===void 0?void 0:t.isReady())||!1}isAuthorized(){var t;return((t=this.state.connector)===null||t===void 0?void 0:t.isAuthorized())||!1}isPaused(){var t;return(t=this.state.connector)===null||t===void 0?void 0:t.isPaused()}disconnect(t){var n,r,o;Y("[RemoteConnection: disconnect()]",t),t?.terminate&&(Nn.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(o=this.state.connector)===null||o===void 0||o.disconnect(t),function(i){Y("[RemoteConnection: cleanupConnector()] cleaning up connector"),i.connector&&(pm(i),i.connector.disconnect({terminate:!0}).catch(s=>{Y("[RemoteConnection: cleanupConnector()] error disconnecting connector",s)}))}(this.state)}};function rL(e){var t,n,r,o,i,s,a,c,l,u,d;return te(this,void 0,void 0,function*(){let{options:f}=e;if(f.logging=(t=f.logging)!==null&&t!==void 0?t:{},f.communicationLayerPreference=(n=f.communicationLayerPreference)!==null&&n!==void 0?n:ti.SOCKET,f.enableDebug!==void 0&&(Ct.default.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=(r=f.enableAnalytics)===null||r===void 0||r,f.injectProvider=(o=f.injectProvider)===null||o===void 0||o,f.shouldShimWeb3=(i=f.shouldShimWeb3)===null||i===void 0||i,f.extensionOnly=(s=f.extensionOnly)===null||s===void 0||s,f.useDeeplink=(a=f.useDeeplink)===null||a===void 0||a,f.storage=(c=f.storage)!==null&&c!==void 0?c:{enabled:!0},f.headless){(0,Ct.default)("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");let D=()=>{},b={install:()=>({mount:D,unmount:D})},O={installer:D};f.modals=b,f.ui=O}let h=((l=f.logging)===null||l===void 0?void 0:l.developerMode)===!0;e.debug=((u=f.logging)===null||u===void 0?void 0:u.sdk)||h,Y("[MetaMaskSDK: performSDKInitialization()] options",e.options);let p=Object.assign({},f.logging);h&&(p.sdk=!0,p.eciesLayer=!0,p.keyExchangeLayer=!0,p.remoteLayer=!0,p.serviceLayer=!0,p.plaintext=!0),yield function(D){var b;return te(this,void 0,void 0,function*(){let{options:O}=D;D.platformManager=new Td({useDeepLink:(b=O.useDeeplink)!==null&&b!==void 0&&b,preferredOpenLink:O.openDeeplink,debug:D.debug})})}(e),yield function(D){var b,O,N,z,q,U,W,$,R;return te(this,void 0,void 0,function*(){let{options:A}=D,M=(b=D.platformManager)===null||b===void 0?void 0:b.getPlatformType();D.analytics=new dm({serverUrl:(O=A.communicationServerUrl)!==null&&O!==void 0?O:ms,enabled:A.enableAnalytics,originatorInfo:{url:(N=A.dappMetadata.url)!==null&&N!==void 0?N:"",title:(z=A.dappMetadata.name)!==null&&z!==void 0?z:"",dappId:typeof window>"u"||window.location===void 0?($=(U=(q=A.dappMetadata)===null||q===void 0?void 0:q.name)!==null&&U!==void 0?U:(W=A.dappMetadata)===null||W===void 0?void 0:W.url)!==null&&$!==void 0?$:"N/A":window.location.hostname,platform:M??"",source:(R=A._source)!==null&&R!==void 0?R:""}})})}(e),yield function(D){var b;return te(this,void 0,void 0,function*(){let{options:O}=D;((b=O.storage)===null||b===void 0?void 0:b.enabled)!==!0||O.storage.storageManager||(O.storage.storageManager=yield bS(O.storage))})}(e),yield function(D){return te(this,void 0,void 0,function*(){let{options:b}=D,O=/^(http|https):\/\/[^\s]*$/;if(b.dappMetadata){b.dappMetadata.iconUrl&&!O.test(b.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),b.dappMetadata.iconUrl=void 0),b.dappMetadata.base64Icon&&b.dappMetadata.base64Icon.length>KP&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),b.dappMetadata.base64Icon=void 0),b.dappMetadata.url&&!O.test(b.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");let N=zP();if(N&&!b.dappMetadata.iconUrl&&!b.dappMetadata.base64Icon){let z=`${window.location.protocol}//${window.location.host}${N}`;b.dappMetadata.iconUrl=z}}D.dappMetadata=b.dappMetadata})}(e),yield WP(e),yield GP(e);let{metamaskBrowserExtension:g,preferExtension:w,shouldReturn:m}=yield function(D){var b,O,N,z;return te(this,void 0,void 0,function*(){let{options:q}=D,U,W=!1,$=!1;if(typeof window<"u"&&window.ethereum&&!(!((b=D.platformManager)===null||b===void 0)&&b.isMetaMaskMobileWebView())){W=localStorage.getItem(Md)==="extension";try{U=yield qP({mustBeMetaMask:!0,sdkInstance:D}),window.extension=U,U.on(zn.CHAIN_CHANGED,R=>{Y(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${R}`),D.sdkProvider&&D.getMobileProvider().emit(zn.CHAIN_CHANGED,R)}),U.on(zn.ACCOUNTS_CHANGED,R=>te(this,void 0,void 0,function*(){var A;Y(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${R}`);let M=!!D.sdkProvider,k=!!D.extensionActive;if(M&&D.getMobileProvider().emit(zn.ACCOUNTS_CHANGED,R),k&&R?.length===0&&(yield(A=D.getProvider())===null||A===void 0?void 0:A.request({method:ue.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield D.terminate()}catch(B){Y("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",B)}})),U.on(zn.DISCONNECT,R=>{Y(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${R}`),D.sdkProvider&&D.getMobileProvider().emit(zn.DISCONNECT,R)}),U.on(zn.CONNECT,R=>{Y(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${R}`),D.sdkProvider&&D.getMobileProvider().emit(zn.CONNECT,R)}),U.on(zn.CONNECTED,R=>{Y("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",R),D.sdkProvider&&D.getMobileProvider().emit(zn.CONNECTED,R)})}catch{window.extension=void 0}}else!((O=D.platformManager)===null||O===void 0)&&O.isMetaMaskMobileWebView()&&((N=D.analytics)===null||N===void 0||N.send({event:Je.SDK_USE_INAPP_BROWSER}),D.activeProvider=fm({provider:window.ethereum,sdkInstance:D}),D._initialized=!0,$=!0);return U&&q.extensionOnly&&(Y("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(z=D.analytics)===null||z===void 0||z.send({event:Je.SDK_USE_EXTENSION}),D.activeProvider=U,D.extensionActive=!0,D.extension=U,D._initialized=!0,$=!0),{preferExtension:W,shouldReturn:$,metamaskBrowserExtension:U}})}(e);if(m)Y("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(D,b){var O,N,z,q,U;return te(this,void 0,void 0,function*(){let{options:W}=D,$=Object.assign({},W.logging);D.remoteConnection=new gm({preferDesktop:(O=W.preferDesktop)!==null&&O!==void 0&&O,communicationLayerPreference:(N=W.communicationLayerPreference)!==null&&N!==void 0?N:ti.SOCKET,analytics:D.analytics,dappMetadata:W.dappMetadata,_source:W._source,enableAnalytics:(z=W.enableAnalytics)===null||z===void 0||z,timer:W.timer,sdk:D,platformManager:D.platformManager,transports:W.transports,communicationServerUrl:W.communicationServerUrl,storage:(q=W.storage)!==null&&q!==void 0?q:{enabled:!0},getMetaMaskInstaller:()=>{if(!D.installer)throw new Error("Invalid SDK status -- installer not initialized");return D.installer},logging:$,connectWithExtensionProvider:b===void 0?void 0:()=>IC(D),modals:Object.assign(Object.assign({},W.modals),{onPendingModalDisconnect:D.terminate.bind(D)})}),yield D.remoteConnection.initRemoteCommunication({sdkInstance:D}),D.installer=new hm({remote:D.remoteConnection,preferDesktop:(U=W.preferDesktop)!==null&&U!==void 0&&U,platformManager:D.platformManager,debug:D.debug})})}(e,g),yield UP(e),yield function(D,b){var O,N;return te(this,void 0,void 0,function*(){let{options:z}=D;b?(Y("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(O=D.analytics)===null||O===void 0||O.send({event:Je.SDK_EXTENSION_UTILIZED}),IC(D).catch(q=>{console.warn("Can't connect with MetaMask extension...",q),localStorage.removeItem(Md)})):z.checkInstallationImmediately&&(!((N=D.platformManager)===null||N===void 0)&&N.isDesktopWeb()?(Y("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),D.connect().catch(q=>{Y(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${q}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),D._initialized=!0})}(e,w);try{yield(d=e.remoteConnection)===null||d===void 0?void 0:d.startConnection({initialCheck:!0})}catch(D){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",D)}e.emit(Ft.ProviderUpdate,tr.INITIALIZED)}})}var Nd=class extends Es.default{constructor(t={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:DC,i18nOptions:{enabled:!1}}){var n,r,o;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],Ct.default.disable();let i=((n=t.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=t.logging)===null||r===void 0)&&r.sdk||i)&&Ct.default.enable("MM_SDK"),Y("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((o=t.dappMetadata)===null||o===void 0)&&o.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");t.dappMetadata=Object.assign(Object.assign({},t.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=t,this.options._source||(t._source=DC),this.init().then(()=>{Y("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)}).catch(s=>{console.error("[MetaMaskSDK: constructor()] error during initialization",s)})}init(){return te(this,void 0,void 0,function*(){return function(t){var n;return te(this,void 0,void 0,function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return Y("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(t._initialized)return Y("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),t.sdkInitPromise;if(t.sdkInitPromise)return Y("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),t.sdkInitPromise;try{t.sdkInitPromise=rL(t),yield t.sdkInitPromise}catch(r){throw console.error(r),r}return t.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var t;return typeof window<"u"&&!!(!((t=window.ethereum)===null||t===void 0)&&t.isMetaMask)}connect(){return te(this,void 0,void 0,function*(){return function(t){return te(this,void 0,void 0,function*(){if(t._initialized||(Y("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield t.init()),Y(`[MetaMaskSDK: connect()] isExtensionActive=${t.isExtensionActive()} activeProvider`,t.activeProvider),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");let n=t.activeProvider.getSelectedAddress();return n?[n]:t.activeProvider.request({method:ue.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:t}){return te(this,void 0,void 0,function*(){return jP({instance:this,msg:t})})}connectWith(t){return te(this,void 0,void 0,function*(){return function({instance:n,rpc:r}){return te(this,void 0,void 0,function*(){if(n._initialized||(Y("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),Y(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:ue.METAMASK_CONNECTWITH,params:[r]})})}({instance:this,rpc:t})})}resume(){return function(t){var n,r,o;return te(this,void 0,void 0,function*(){if(!(!((r=(n=t.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return Y("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((o=t.remoteConnection)===null||o===void 0||o.startConnection());Y("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var t;(t=this.remoteConnection)===null||t===void 0||t.isAuthorized()}terminate(){return function(t){var n,r,o;return te(this,void 0,void 0,function*(){if(!(!((n=t.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(BP&&(window.localStorage.removeItem(Md),window.localStorage.removeItem(lm),window.localStorage.removeItem(cm)),t.extensionActive){try{yield(r=t.activeProvider)===null||r===void 0?void 0:r.request({method:ue.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(i){Y("[MetaMaskSDK: terminate()] error revoking permissions",i)}return t.options.extensionOnly?(t.emit(Ft.ProviderUpdate,tr.TERMINATE),void Y("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(t.activeProvider=t.sdkProvider,window.ethereum=t.activeProvider,t.extensionActive=!1,void t.emit(Ft.ProviderUpdate,tr.TERMINATE))}t.emit(Ft.ProviderUpdate,tr.TERMINATE),Y(`[MetaMaskSDK: terminate()] remoteConnection=${t.remoteConnection}`),(o=t.remoteConnection)===null||o===void 0||o.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(t){this.readonlyRPCCalls=t}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var t;let n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var t,n;return(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var t,n;return(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return si.version}getWalletStatus(){var t,n;return(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var t;return(t=this.remoteConnection)===null||t===void 0?void 0:t.getChannelConfig()}_ping(){var t,n;(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var t,n;(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var t,n;return(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var t;return(t=this.remoteConnection)===null||t===void 0?void 0:t.getKeyInfo()}_resetKeys(){var t,n;(n=(t=this.remoteConnection)===null||t===void 0?void 0:t.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(t,n){return super.emit(t,n)}on(t,n){return super.on(t,n)}},oL=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:e}={enabled:!1}){this.enabled=!1,this.enabled=e}persistChannelConfig(e){return te(this,void 0,void 0,function*(){let t=JSON.stringify(e);Y(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,e),localStorage.setItem(Ig,t)})}getPersistedChannelConfig(){return te(this,void 0,void 0,function*(){let e;try{if(Y(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),e=localStorage.getItem(Ig),Y("[StorageManagerWeb: getPersistedChannelConfig()]",e),!e)return;let t=JSON.parse(e);return Y("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",t),t}catch(t){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",t)}})}persistAccounts(e){return te(this,void 0,void 0,function*(){Y(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,e);let t=JSON.stringify(e);localStorage.setItem(cm,t)})}getCachedAccounts(){return te(this,void 0,void 0,function*(){try{let e=localStorage.getItem(cm);return e?JSON.parse(e):[]}catch(e){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",e),e}})}persistChainId(e){return te(this,void 0,void 0,function*(){Y(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,e),localStorage.setItem(lm,e)})}getCachedChainId(){return te(this,void 0,void 0,function*(){try{let e=localStorage.getItem(lm);return e??void 0}catch(e){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",e),e}})}terminate(){return te(this,void 0,void 0,function*(){Y(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(Ig)})}}}),iL="hydrated",sL=!1,aL=!1,cL=!0,lL=Object.defineProperty,Wm=new WeakMap,go=e=>Wm.get(e),Gm=(e,t)=>Wm.set(t.$lazyInstance$=e,t),LC=(e,t)=>t in e,Xo=(e,t)=>(0,console.error)(e,t),Tg=new Map,Ju=new Map,IS="slot-fb{display:contents}slot-fb[hidden]{display:none}",$d=typeof window<"u"?window:{},Xn=$d.document||{head:{}},pt={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},TS=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),mm=!1,FC=[],MS=[],uL=(e,t)=>n=>{e.push(n),mm||(mm=!0,4&pt.$flags$?Zm(ym):pt.raf(ym))},BC=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Xo(n)}e.length=0},ym=()=>{BC(FC),BC(MS),(mm=FC.length>0)&&pt.raf(ym)},Zm=e=>(t=>Promise.resolve(t))().then(e),dL=uL(MS),jC={},Ym=e=>(e=typeof e)=="object"||e==="function";function xS(e){var t,n,r;return(r=(n=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((e,t)=>{for(var n in t)lL(e,n,{get:t[n],enumerable:!0})})({},{err:()=>AS,map:()=>fL,ok:()=>vm,unwrap:()=>hL,unwrapErr:()=>pL});var vm=e=>({isOk:!0,isErr:!1,value:e}),AS=e=>({isOk:!1,isErr:!0,value:e});function fL(e,t){if(e.isOk){let n=t(e.value);return n instanceof Promise?n.then(r=>vm(r)):vm(n)}if(e.isErr){let n=e.value;return AS(n)}throw"should never get here"}var Qu,Jm,hL=e=>{if(e.isOk)return e.value;throw e.value},pL=e=>{if(e.isErr)return e.value;throw e.value},J=(e,t,...n)=>{let r=null,o=!1,i=!1,s=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!Ym(r))&&(r=String(r)),o&&i?s[s.length-1].$text$+=r:s.push(o?Rd(null,r):r),i=o)};if(a(n),t){let l=t.className||t.class;l&&(t.class=typeof l!="object"?l:Object.keys(l).filter(u=>l[u]).join(" "))}if(typeof e=="function")return e(t===null?{}:t,s,mL);let c=Rd(e,null);return c.$attrs$=t,s.length>0&&(c.$children$=s),c},Rd=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null}),gL={},mL={forEach:(e,t)=>e.map(VC).forEach(t),map:(e,t)=>e.map(VC).map(t).map(yL)},VC=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),yL=e=>{if(typeof e.vtag=="function"){let n=de({},e.vattrs);return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),J(e.vtag,n,...e.vchildren||[])}let t=Rd(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Ud=e=>go(e).$hostElement$,yo=(e,t,n)=>{let r=Ud(e);return{emit:o=>kS(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:o})}},kS=(e,t,n)=>{let r=pt.ce(t,n);return e.dispatchEvent(r),r},$C=new WeakMap,vL=e=>{let t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,o=(t.$tagName$,()=>{}),i=((s,a,c)=>{var l;let u=NS(a),d=Ju.get(u);if(s=s.nodeType===11?s:Xn,d)if(typeof d=="string"){s=s.head||s;let f,h=$C.get(s);if(h||$C.set(s,h=new Set),!h.has(u)){{f=Xn.createElement("style"),f.innerHTML=d;let p=(l=pt.$nonce$)!=null?l:xS(Xn);if(p!=null&&f.setAttribute("nonce",p),!(1&a.$flags$))if(s.nodeName==="HEAD"){let g=s.querySelectorAll("link[rel=preconnect]"),w=g.length>0?g[g.length-1].nextSibling:s.querySelector("style");s.insertBefore(f,w)}else if("host"in s)if(TS){let g=new CSSStyleSheet;g.replaceSync(d),s.adoptedStyleSheets=[g,...s.adoptedStyleSheets]}else{let g=s.querySelector("style");g?g.innerHTML=d+g.innerHTML:s.prepend(f)}else s.append(f);1&a.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(f,null)}4&a.$flags$&&(f.innerHTML+=IS),h&&h.add(u)}}else s.adoptedStyleSheets.includes(d)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,d]);return u})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h")),o()},NS=(e,t)=>"sc-"+e.$tagName$,UC=(e,t,n,r,o,i)=>{if(n!==r){let s=LC(e,t),a=t.toLowerCase();if(t==="class"){let c=e.classList,l=HC(n),u=HC(r);c.remove(...l.filter(d=>d&&!u.includes(d))),c.add(...u.filter(d=>d&&!l.includes(d)))}else if(t==="style"){for(let c in n)r&&r[c]!=null||(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(let c in r)n&&r[c]===n[c]||(c.includes("-")?e.style.setProperty(c,r[c]):e.style[c]=r[c])}else if(s||t[0]!=="o"||t[1]!=="n"){let c=Ym(r);if((s||c&&r!==null)&&!o)try{if(e.tagName.includes("-"))e[t]=r;else{let l=r??"";t==="list"?s=!1:n!=null&&e[t]==l||(typeof e.__lookupSetter__(t)=="function"?e[t]=l:e.setAttribute(t,l))}}catch{}r==null||r===!1?r===!1&&e.getAttribute(t)!==""||e.removeAttribute(t):(!s||4&i||o)&&!c&&(r=r===!0?"":r,e.setAttribute(t,r))}else if(t=t[2]==="-"?t.slice(3):LC($d,a)?a.slice(2):a[2]+t.slice(3),n||r){let c=t.endsWith(RS);t=t.replace(EL,""),n&&pt.rel(e,t,n,c),r&&pt.ael(e,t,r,c)}}},wL=/\s/,HC=e=>e?e.split(wL):[],RS="Capture",EL=new RegExp(RS+"$"),OS=(e,t,n)=>{let r=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||jC,i=t.$attrs$||jC;for(let s of zC(Object.keys(o)))s in i||UC(r,s,o[s],void 0,n,t.$flags$);for(let s of zC(Object.keys(i)))UC(r,s,o[s],i[s],n,t.$flags$)};function zC(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var PS=!1,yn=!1,Qm=(e,t,n,r)=>{let o=t.$children$[n],i,s,a=0;if(o.$text$!==null)i=o.$elm$=Xn.createTextNode(o.$text$);else{if(yn||(yn=o.$tag$==="svg"),i=o.$elm$=Xn.createElementNS(yn?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!PS&&aL&&2&o.$flags$?"slot-fb":o.$tag$),yn&&o.$tag$==="foreignObject"&&(yn=!1),OS(null,o,yn),i.getRootNode().querySelector("body")&&sL&&(c=>c!=null)(Qu)&&i["s-si"]!==Qu&&i.classList.add(i["s-si"]=Qu),o.$children$)for(a=0;a<o.$children$.length;++a)s=Qm(e,o,a),s&&i.appendChild(s);o.$tag$==="svg"?yn=!1:i.tagName==="foreignObject"&&(yn=!0)}return i["s-hn"]=Jm,i},KC=(e,t,n,r,o,i)=>{let s,a=e;for(a.shadowRoot&&a.tagName===Jm&&(a=a.shadowRoot);o<=i;++o)r[o]&&(s=Qm(null,n,o),s&&(r[o].$elm$=s,Xu(a,s,t)))},qC=(e,t,n)=>{for(let r=t;r<=n;++r){let o=e[r];if(o){let i=o.$elm$;i&&i.remove()}}},Lu=(e,t,n=!1)=>e.$tag$===t.$tag$,Ia=(e,t,n=!1)=>{let r=t.$elm$=e.$elm$,o=e.$children$,i=t.$children$,s=t.$tag$,a=t.$text$;a===null?(OS(e,t,yn=s==="svg"||s!=="foreignObject"&&yn),o!==null&&i!==null?((c,l,u,d,f=!1)=>{let h,p=0,g=0,w=l.length-1,m=l[0],D=l[w],b=d.length-1,O=d[0],N=d[b];for(;p<=w&&g<=b;)m==null?m=l[++p]:D==null?D=l[--w]:O==null?O=d[++g]:N==null?N=d[--b]:Lu(m,O,f)?(Ia(m,O,f),m=l[++p],O=d[++g]):Lu(D,N,f)?(Ia(D,N,f),D=l[--w],N=d[--b]):Lu(m,N,f)?(Ia(m,N,f),Xu(c,m.$elm$,D.$elm$.nextSibling),m=l[++p],N=d[--b]):Lu(D,O,f)?(Ia(D,O,f),Xu(c,D.$elm$,m.$elm$),D=l[--w],O=d[++g]):(h=Qm(l&&l[g],u,g),O=d[++g],h&&Xu(m.$elm$.parentNode,h,m.$elm$));p>w?KC(c,d[b+1]==null?null:d[b+1].$elm$,u,d,g,b):g>b&&qC(l,p,w)})(r,o,t,i,n):i!==null?(e.$text$!==null&&(r.textContent=""),KC(r,null,t,i,0,i.length-1)):!n&&cL&&o!==null&&qC(o,0,o.length-1),yn&&s==="svg"&&(yn=!1)):e.$text$!==a&&(r.data=a)},Xu=(e,t,n)=>e?.insertBefore(t,n),bL=(e,t,n=!1)=>{let r=e.$hostElement$,o=e.$cmpMeta$,i=e.$vnode$||Rd(null,null),s=(a=t)&&a.$tag$===gL?t:J(null,null,t);var a;if(Jm=r.tagName,n&&s.$attrs$)for(let c of Object.keys(s.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(s.$attrs$[c]=r[c]);s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=i.$elm$=r.shadowRoot||r,Qu=r["s-sc"],PS=(1&o.$flags$)!=0,Ia(i,s,n)},LS=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.$onRenderResolve$=n))},Xm=(e,t)=>(e.$flags$|=16,4&e.$flags$?void(e.$flags$|=512):(LS(e,e.$ancestorComponent$),dL(()=>_L(e,t)))),_L=(e,t)=>{let n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),o=e.$lazyInstance$;if(!o)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return r(),CL(void 0,()=>SL(e,o,t))},CL=(e,t)=>DL(e)?e.then(t).catch(n=>{console.error(n),t()}):t(),DL=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",SL=async(e,t,n)=>{var r;let o=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),s=o["s-rc"];n&&vL(e);let a=(e.$cmpMeta$.$tagName$,()=>{});IL(e,t,o,n),s&&(s.map(c=>c()),o["s-rc"]=void 0),a(),i();{let c=(r=o["s-p"])!=null?r:[],l=()=>TL(e);c.length===0?l():(Promise.all(c).then(l),e.$flags$|=4,c.length=0)}},IL=(e,t,n,r)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,bL(e,t,r)}catch(o){Xo(o,e.$hostElement$)}return null},TL=e=>{e.$cmpMeta$.$tagName$;let t=e.$hostElement$,n=()=>{},r=e.$lazyInstance$,o=e.$ancestorComponent$;64&e.$flags$?n():(e.$flags$|=64,BS(t),ey(r,"componentDidLoad"),n(),e.$onReadyResolve$(t),o||FS()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Zm(()=>Xm(e,!1)),e.$flags$&=-517},FS=e=>{BS(Xn.documentElement),Zm(()=>kS($d,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},ey=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){Xo(r)}},BS=e=>{var t;return e.classList.add((t=iL)!=null?t:"hydrated")},ML=(e,t,n,r)=>{let o=go(e);if(!o)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);let i=o.$hostElement$,s=o.$instanceValues$.get(t),a=o.$flags$,c=o.$lazyInstance$;var l,u;l=n,u=r.$members$[t][0],n=l==null||Ym(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;let d=Number.isNaN(s)&&Number.isNaN(n);if((!(8&a)||s===void 0)&&n!==s&&!d&&(o.$instanceValues$.set(t,n),c)){if(r.$watchers$&&128&a){let f=r.$watchers$[t];f&&f.map(h=>{try{c[h](n,s,t)}catch(p){Xo(p,i)}})}(18&a)==2&&Xm(o,!1)}},jS=(e,t,n)=>{var r,o;let i=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);let s=Object.entries((r=t.$members$)!=null?r:{});if(s.map(([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(i,a,{get(){return l=a,go(this).$instanceValues$.get(l);var l},set(l){ML(this,a,l,t)},configurable:!0,enumerable:!0})}),1&n){let a=new Map;i.attributeChangedCallback=function(c,l,u){pt.jmp(()=>{var d;let f=a.get(c);if(this.hasOwnProperty(f))u=this[f],delete this[f];else{if(i.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==u)return;if(f==null){let h=go(this),p=h?.$flags$;if(p&&!(8&p)&&128&p&&u!==l){let g=h.$lazyInstance$,w=(d=t.$watchers$)==null?void 0:d[c];w?.forEach(m=>{g[m]!=null&&g[m].call(g,u,l,c)})}return}}this[f]=(u!==null||typeof this[f]!="boolean")&&u})},e.observedAttributes=Array.from(new Set([...Object.keys((o=t.$watchers$)!=null?o:{}),...s.filter(([c,l])=>15&l[0]).map(([c,l])=>{let u=l[1]||c;return a.set(u,c),u})]))}}return e},xL=async(e,t,n,r)=>{let o;if(!(32&t.$flags$)){if(t.$flags$|=32,n.$lazyBundleId$){let a=((l,u,d)=>{let f=l.$tagName$.replace(/-/g,"_"),h=l.$lazyBundleId$;if(!h)return;let p=Tg.get(h);if(p)return p[f];{let g=w=>(Tg.set(h,w),w[f]);if(h==="mm-install-modal_3")return Promise.resolve().then(function(){return qL}).then(g,Xo)}return XR(`./${h}.entry.js`).then(g=>(Tg.set(h,g),g[f]),Xo)})(n);if(a&&"then"in a){let l=()=>{};o=await a,l()}else o=a;if(!o)throw new Error(`Constructor for "${n.$tagName$}#${t.$modeName$}" was not found`);o.isProxied||(n.$watchers$=o.watchers,jS(o,n,2),o.isProxied=!0);let c=(n.$tagName$,()=>{});t.$flags$|=8;try{new o(t)}catch(l){Xo(l)}t.$flags$&=-9,t.$flags$|=128,c(),wm(t.$lazyInstance$)}else{o=e.constructor;let a=e.localName;customElements.whenDefined(a).then(()=>t.$flags$|=128)}if(o&&o.style){let a;typeof o.style=="string"&&(a=o.style);let c=NS(n);if(!Ju.has(c)){let l=(n.$tagName$,()=>{});((u,d,f)=>{let h=Ju.get(u);TS&&f?(h=h||new CSSStyleSheet,typeof h=="string"?h=d:h.replaceSync(d)):h=d,Ju.set(u,h)})(c,a,!!(1&n.$flags$)),l()}}}let i=t.$ancestorComponent$,s=()=>Xm(t,!0);i&&i["s-rc"]?i["s-rc"].push(s):s()},wm=e=>{ey(e,"connectedCallback")},WC=e=>{ey(e,"disconnectedCallback")},AL=(e,t={})=>{var n;let r=()=>{},o=[],i=t.exclude||[],s=$d.customElements,a=Xn.head,c=a.querySelector("meta[charset]"),l=Xn.createElement("style"),u=[],d,f=!0;Object.assign(pt,t),pt.$resourcesUrl$=new URL(t.resourcesUrl||"./",Xn.baseURI).href;let h=!1;if(e.map(p=>{p[1].map(g=>{var w;let m={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};4&m.$flags$&&(h=!0),m.$members$=g[2],m.$watchers$=(w=g[4])!=null?w:{};let D=m.$tagName$,b=class extends HTMLElement{constructor(O){if(super(O),this.hasRegisteredEventListeners=!1,((N,z)=>{let q={$flags$:0,$hostElement$:N,$cmpMeta$:z,$instanceValues$:new Map};q.$onReadyPromise$=new Promise(U=>q.$onReadyResolve$=U),N["s-p"]=[],N["s-rc"]=[],Wm.set(N,q)})(O=this,m),1&m.$flags$)if(O.shadowRoot){if(O.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${m.$tagName$}! Mode is set to ${O.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else O.attachShadow({mode:"open"})}connectedCallback(){go(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),d&&(clearTimeout(d),d=null),f?u.push(this):pt.jmp(()=>(O=>{if(!(1&pt.$flags$)){let N=go(O),z=N.$cmpMeta$,q=(z.$tagName$,()=>{});if(1&N.$flags$)N?.$lazyInstance$?wm(N.$lazyInstance$):N?.$onReadyPromise$&&N.$onReadyPromise$.then(()=>wm(N.$lazyInstance$));else{N.$flags$|=1;{let U=O;for(;U=U.parentNode||U.host;)if(U["s-p"]){LS(N,N.$ancestorComponent$=U);break}}z.$members$&&Object.entries(z.$members$).map(([U,[W]])=>{if(31&W&&O.hasOwnProperty(U)){let $=O[U];delete O[U],O[U]=$}}),xL(O,N,z)}q()}})(this))}disconnectedCallback(){pt.jmp(()=>(async O=>{if(!(1&pt.$flags$)){let N=go(O);N?.$lazyInstance$?WC(N.$lazyInstance$):N?.$onReadyPromise$&&N.$onReadyPromise$.then(()=>WC(N.$lazyInstance$))}})(this))}componentOnReady(){return go(this).$onReadyPromise$}};m.$lazyBundleId$=p[0],i.includes(D)||s.get(D)||(o.push(D),s.define(D,jS(b,m,1)))})}),o.length>0&&(h&&(l.textContent+=IS),l.textContent+=o.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",l.innerHTML.length)){l.setAttribute("data-styles","");let p=(n=pt.$nonce$)!=null?n:xS(Xn);p!=null&&l.setAttribute("nonce",p),a.insertBefore(l,c?c.nextSibling:a.firstChild)}f=!1,u.length?u.map(p=>p.connectedCallback()):pt.jmp(()=>d=setTimeout(FS,30)),r()};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();var kL=Object.freeze({__proto__:null,defineCustomElements:async(e,t)=>{if(typeof window<"u")return await void 0,AL([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],t)},setNonce:e=>pt.$nonce$=e}),NL={fontFamily:"Roboto, sans-serif"},ty=({className:e},t)=>J("div",{style:NL,class:e},t),Mg=({Icon:e,text:t})=>J("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},J("div",{class:"flexItem1"},J(e,null)),J("div",{class:"flexItem11"},J("span",{style:{lineHeight:"2",color:"black"}},t))),RL=()=>J("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),J("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),OL=()=>J("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),PL=()=>J("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),LL=()=>J("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),J("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),J("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function ny({version:e}){return J("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",e?`v${e}`:"unknown")}var ry=()=>J("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("rect",{width:"16",height:"16",fill:"white"}),J("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),oy=()=>J("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},J("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function qo(e,t){return e.toString(2).padStart(t,"0")}function GC(e,t){let n=e%t;return n>=0?n:t+n}function Yt(e,t){return new Array(e).fill(t)}function ZC(...e){let t=0;for(let r of e)t=Math.max(t,r.length);let n=[];for(let r=0;r<t;r++)for(let o of e)r>=o.length||n.push(o[r]);return new Uint8Array(n)}function YC(e,t,n){if(n<0||n+t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function JC(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);let r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})},encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})}}}var Pa=class e{static size(t,n){if(typeof t=="number"&&(t={height:t,width:t}),!Number.isSafeInteger(t.height)&&t.height!==1/0)throw new Error(`Bitmap: wrong height=${t.height} (${typeof t.height})`);if(!Number.isSafeInteger(t.width)&&t.width!==1/0)throw new Error(`Bitmap: wrong width=${t.width} (${typeof t.width})`);return n!==void 0&&(t={width:Math.min(t.width,n.width),height:Math.min(t.height,n.height)}),t}static fromString(t){let n=(t=t.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,o=new Array(r),i;for(let s of n){let a=s.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(i&&a.length!==i)throw new Error(`Bitmap.fromString different row sizes: width=${i} cur=${a.length}`);i=a.length,o.push(a)}return i||(i=0),new e({height:r,width:i},o)}constructor(t,n){let{height:r,width:o}=e.size(t);this.data=n||Array.from({length:r},()=>Yt(o,void 0)),this.height=r,this.width=o}point(t){return this.data[t.y][t.x]}isInside(t){return 0<=t.x&&t.x<this.width&&0<=t.y&&t.y<this.height}size(t){if(!t)return{height:this.height,width:this.width};let{x:n,y:r}=this.xy(t);return{height:this.height-r,width:this.width-n}}xy(t){if(typeof t=="number"&&(t={x:t,y:t}),!Number.isSafeInteger(t.x))throw new Error(`Bitmap: wrong x=${t.x}`);if(!Number.isSafeInteger(t.y))throw new Error(`Bitmap: wrong y=${t.y}`);return t.x=GC(t.x,this.width),t.y=GC(t.y,this.height),t}rect(t,n,r){let{x:o,y:i}=this.xy(t),{height:s,width:a}=e.size(n,this.size({x:o,y:i}));for(let c=0;c<s;c++)for(let l=0;l<a;l++)this.data[i+c][o+l]=typeof r=="function"?r({x:l,y:c},this.data[i+c][o+l]):r;return this}rectRead(t,n,r){return this.rect(t,n,(o,i)=>(r(o,i),i))}hLine(t,n,r){return this.rect(t,{width:n,height:1},r)}vLine(t,n,r){return this.rect(t,{width:1,height:n},r)}border(t=2,n){let r=this.height+2*t,o=this.width+2*t,i=Yt(t,n),s=Array.from({length:t},()=>Yt(o,n));return new e({height:r,width:o},[...s,...this.data.map(a=>[...i,...a,...i]),...s])}embed(t,n){return this.rect(t,n.size(),({x:r,y:o})=>n.data[o][r])}rectSlice(t,n=this.size()){let r=new e(e.size(n,this.size(this.xy(t))));return this.rect(t,n,({x:o,y:i},s)=>r.data[i][o]=s),r}inverse(){let{height:t,width:n}=this;return new e({height:n,width:t}).rect({x:0,y:0},1/0,({x:r,y:o})=>this.data[r][o])}scale(t){if(!Number.isSafeInteger(t)||t>1024)throw new Error(`Wrong scale factor: ${t}`);let{height:n,width:r}=this;return new e({height:t*n,width:t*r}).rect({x:0,y:0},1/0,({x:o,y:i})=>this.data[Math.floor(i/t)][Math.floor(o/t)])}clone(){return new e(this.size()).rect({x:0,y:0},this.size(),({x:t,y:n})=>this.data[n][t])}assertDrawn(){this.rectRead(0,1/0,(t,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)})}toString(){return this.data.map(t=>t.map(n=>n===void 0?"?":n?"X":" ").join("")).join(`
`)}toASCII(){let{height:t,width:n,data:r}=this,o="";for(let i=0;i<t;i+=2){for(let s=0;s<n;s++){let a=r[i][s],c=i+1>=t||r[i+1][s];a||c?!a&&c?o+="\u2580":a&&!c?o+="\u2584":a&&c&&(o+=" "):o+="\u2588"}o+=`
`}return o}toTerm(){let t="\x1B[0m",n=`\x1B[1;47m  ${t}`,r=`\x1B[40m  ${t}`;return this.data.map(o=>o.map(i=>i?r:n).join("")).join(`
`)}toSVG(){let t=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:n,y:r},o)=>{o&&(t+=`<rect x="${n}" y="${r}" width="1" height="1" />`)}),t+="</svg>",t}toGIF(){let t=a=>[255&a,a>>>8&255],n=[...t(this.width),...t(this.height)],r=[];this.rectRead(0,1/0,(a,c)=>r.push(+(c===!0)));let o=126,i=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Yt(381,0),44,0,0,0,0,...n,0,7],s=Math.floor(r.length/o);for(let a=0;a<s;a++)i.push(127,128,...r.slice(o*a,o*(a+1)).map(c=>+c));return i.push(r.length%o+1,128,...r.slice(s*o).map(a=>+a)),i.push(1,129,0,59),new Uint8Array(i)}toImage(t=!1){let{height:n,width:r}=this.size(),o=new Uint8Array(n*r*(t?3:4)),i=0;for(let s=0;s<n;s++)for(let a=0;a<r;a++){let c=this.data[s][a]?0:255;o[i++]=c,o[i++]=c,o[i++]=c,t||(o[i++]=255)}return{height:n,width:r,data:o}}},QC=["low","medium","quartile","high"],XC=["numeric","alphanumeric","byte","kanji","eci"],FL=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],BL={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},jL={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},_t={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(e===1)return[];let t=_t.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28),o=Math.floor(n/r);o%2?o+=1:n%r*2>=r&&(o+=2);let i=[6];for(let s=1;s<r;s++)i.push(t-(r-s)*o);return i.push(t),i},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){let n=_t.ECCode[e]<<3|t,r=n;for(let o=0;o<10;o++)r=r<<1^1335*(r>>9);return(n<<10|r)^_t.formatMask},versionBits(e){let t=e;for(let n=0;n<12;n++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:JC("0123456789"),alphanumerc:JC("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[t][_t.sizeType(e)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){let n=FL[e-1],r=BL[t][e-1],o=jL[t][e-1],i=Math.floor(n/o)-r,s=o-n%o;return{words:r,numBlocks:o,shortBlocks:s,blockLen:i,capacity:8*(n-r*o),total:(r+i)*o+o-s}}},Em=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,(e,t)=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],le={tables:(e=>{let t=Yt(256,0),n=Yt(256,0);for(let r=0,o=1;r<256;r++)t[r]=o,n[o]=r,o<<=1,256&o&&(o^=285);return{exp:t,log:n}})(),exp:e=>le.tables.exp[e],log(e){if(e===0)throw new Error(`GF.log: wrong arg=${e}`);return le.tables.log[e]%255},mul:(e,t)=>e===0||t===0?0:le.tables.exp[(le.tables.log[e]+le.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>le.tables.exp[le.tables.log[e]*t%255],inv(e){if(e===0)throw new Error(`GF.inverse: wrong arg=${e}`);return le.tables.exp[255-le.tables.log[e]]},polynomial(e){if(e.length==0)throw new Error("GF.polymomial: wrong length");if(e[0]!==0)return e;let t=0;for(;t<e.length-1&&e[t]==0;t++);return e.slice(t)},monomial(e,t){if(e<0)throw new Error(`GF.monomial: wrong degree=${e}`);if(t==0)return[0];let n=Yt(e+1,0);return n[0]=t,le.polynomial(n)},degree:e=>e.length-1,coefficient:(e,t)=>e[le.degree(e)-t],mulPoly(e,t){if(e[0]===0||t[0]===0)return[0];let n=Yt(e.length+t.length-1,0);for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++)n[r+o]=le.add(n[r+o],le.mul(e[r],t[o]));return le.polynomial(n)},mulPolyScalar(e,t){if(t==0)return[0];if(t==1)return e;let n=Yt(e.length,0);for(let r=0;r<e.length;r++)n[r]=le.mul(e[r],t);return le.polynomial(n)},mulPolyMonomial(e,t,n){if(t<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];let r=Yt(e.length+t,0);for(let o=0;o<e.length;o++)r[o]=le.mul(e[o],n);return le.polynomial(r)},addPoly(e,t){if(e[0]===0)return t;if(t[0]===0)return e;let n=e,r=t;n.length>r.length&&([n,r]=[r,n]);let o=Yt(r.length,0),i=r.length-n.length,s=r.slice(0,i);for(let a=0;a<s.length;a++)o[a]=s[a];for(let a=i;a<r.length;a++)o[a]=le.add(n[a-i],r[a]);return le.polynomial(o)},remainderPoly(e,t){let n=Array.from(e);for(let r=0;r<e.length-t.length+1;r++){let o=n[r];if(o!==0)for(let i=1;i<t.length;i++)t[i]!==0&&(n[r+i]=le.add(n[r+i],le.mul(t[i],o)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly(e){let t=[1];for(let n=0;n<e;n++)t=le.mulPoly(t,[1,le.pow(2,n)]);return t},evalPoly(e,t){if(t==0)return le.coefficient(e,0);let n=e[0];for(let r=1;r<e.length;r++)n=le.add(le.mul(t,n),e[r]);return n},euclidian(e,t,n){le.degree(e)<le.degree(t)&&([e,t]=[t,e]);let r=e,o=t,i=[0],s=[1];for(;2*le.degree(o)>=n;){let l=r,u=i;if(r=o,i=s,r[0]===0)throw new Error("rLast[0] === 0");o=l;let d=[0],f=le.inv(r[0]);for(;le.degree(o)>=le.degree(r)&&o[0]!==0;){let h=le.degree(o)-le.degree(r),p=le.mul(o[0],f);d=le.addPoly(d,le.monomial(h,p)),o=le.addPoly(o,le.mulPolyMonomial(r,h,p))}if(d=le.mulPoly(d,i),s=le.addPoly(d,u),le.degree(o)>=le.degree(r))throw new Error(`Division failed r: ${o}, rLast: ${r}`)}let a=le.coefficient(s,0);if(a==0)throw new Error("sigmaTilde(0) was zero");let c=le.inv(a);return[le.mulPolyScalar(s,c),le.mulPolyScalar(o,c)]}};function VL(e,t){let{words:n,shortBlocks:r,numBlocks:o,blockLen:i,total:s}=_t.capacity(e,t),a=(c=n,{encode(l){let u=le.divisorPoly(c),d=Array.from(l);return d.push(...u.slice(0,-1).fill(0)),Uint8Array.from(le.remainderPoly(d,u))},decode(l){let u=l.slice(),d=le.polynomial(Array.from(l)),f=Yt(c,0),h=!1;for(let b=0;b<c;b++){let O=le.evalPoly(d,le.exp(b));f[f.length-1-b]=O,O!==0&&(h=!0)}if(!h)return u;f=le.polynomial(f);let p=le.monomial(c,1),[g,w]=le.euclidian(p,f,c),m=Yt(le.degree(g),0),D=0;for(let b=1;b<256&&D<m.length;b++)le.evalPoly(g,b)===0&&(m[D++]=le.inv(b));if(D!==m.length)throw new Error("RS.decode: wrong errors number");for(let b=0;b<m.length;b++){let O=u.length-1-le.log(m[b]);if(O<0)throw new Error("RS.decode: wrong error location");let N=le.inv(m[b]),z=1;for(let q=0;q<m.length;q++)b!==q&&(z=le.mul(z,le.add(1,le.mul(m[q],N))));u[O]=le.add(u[O],le.mul(le.evalPoly(w,N),le.inv(z)))}return u}});var c;return{encode(l){let u=[],d=[];for(let g=0;g<o;g++){let w=i+(g<r?0:1);u.push(l.subarray(0,w)),d.push(a.encode(l.subarray(0,w))),l=l.subarray(w)}let f=ZC(...u),h=ZC(...d),p=new Uint8Array(f.length+h.length);return p.set(f),p.set(h,f.length),p},decode(l){if(l.length!==s)throw new Error(`interleave.decode: len(data)=${l.length}, total=${s}`);let u=[];for(let h=0;h<o;h++){let p=h<r;u.push(new Uint8Array(n+i+(p?0:1)))}let d=0;for(let h=0;h<i;h++)for(let p=0;p<o;p++)u[p][h]=l[d++];for(let h=r;h<o;h++)u[h][i]=l[d++];for(let h=i;h<i+n;h++)for(let p=0;p<o;p++){let g=p<r;u[p][h+(g?0:1)]=l[d++]}let f=[];for(let h of u)f.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(f)}}}function e1(e,t,n,r){let o="",i=n.length;if(r==="numeric"){let d=_t.alphabet.numeric.decode(n.split("")),f=d.length;for(let h=0;h<f-2;h+=3)o+=qo(100*d[h]+10*d[h+1]+d[h+2],10);f%3==1?o+=qo(d[f-1],4):f%3==2&&(o+=qo(10*d[f-2]+d[f-1],7))}else if(r==="alphanumeric"){let d=_t.alphabet.alphanumerc.decode(n.split("")),f=d.length;for(let h=0;h<f-1;h+=2)o+=qo(45*d[h]+d[h+1],11);f%2==1&&(o+=qo(d[f-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{let d=function(f){if(typeof f!="string")throw new Error("utf8ToBytes expected string, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}(n);i=d.length,o=Array.from(d).map(f=>qo(f,8)).join("")}}let{capacity:s}=_t.capacity(e,t),a=qo(i,_t.lengthBits(e,r)),c=_t.modeBits[r]+a+o;if(c.length>s)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,s-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));let l="1110110000010001";for(let d=0;c.length!==s;d++)c+=l[d%16];let u=Uint8Array.from(c.match(/(.{8})/g).map(d=>+`0b${d}`));return VL(e,t).encode(u)}function t1(e,t,n,r,o=!1){let i=function(c,l,u,d=!1){let f=_t.size.encode(c),h=new Pa(f+2),p=new Pa(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,p).embed({x:-p.width,y:0},p).embed({x:0,y:-p.height},p),h=h.rectSlice(1,f);let g=new Pa(1).rect(0,1,!0).border(1,!1).border(1,!0),w=_t.alignmentPatterns(c);for(let m of w)for(let D of w)h.data[m][D]===void 0&&h.embed({x:D-2,y:m-2},g);h=h.hLine({x:0,y:6},1/0,({x:m},D)=>D===void 0?m%2==0:D).vLine({x:6,y:0},1/0,({y:m},D)=>D===void 0?m%2==0:D);{let m=_t.formatBits(l,u),D=b=>!d&&(m>>b&1)==1;for(let b=0;b<6;b++)h.data[b][8]=D(b);for(let b=6;b<8;b++)h.data[b+1][8]=D(b);for(let b=8;b<15;b++)h.data[f-15+b][8]=D(b);for(let b=0;b<8;b++)h.data[8][f-b-1]=D(b);for(let b=8;b<9;b++)h.data[8][15-b-1+1]=D(b);for(let b=9;b<15;b++)h.data[8][15-b-1]=D(b);h.data[f-8][8]=!d}if(c>=7){let m=_t.versionBits(c);for(let D=0;D<18;D+=1){let b=!d&&(m>>D&1)==1,O=Math.floor(D/3),N=D%3+f-8-3;h.data[O][N]=b,h.data[N][O]=b}}return h}(e,t,r,o),s=0,a=8*n.length;if(function(c,l,u){let d=c.height,f=Em[l],h=-1,p=d-1;for(let g=d-1;g>0;g-=2){for(g==6&&(g=5);;p+=h){for(let w=0;w<2;w+=1){let m=g-w;c.data[p][m]===void 0&&u(m,p,f(m,p))}if(p+h<0||p+h>=d)break}h=-h}}(i,r,(c,l,u)=>{let d=!1;s<a&&(d=(n[s>>>3]>>(7-s&7)&1)!=0,s++),i.data[l][c]=d!==u}),s!==a)throw new Error("QR: bytes left after draw");return i}function $L(e){let t=e.inverse(),n=h=>{let p=0;for(let g,w=0,m=1;w<h.length;w++)g===h[w]&&(m++,w!==h.length-1)||(m>=5&&(p+=m-5+3),g=h[w],m=1);return p},r=0;e.data.forEach(h=>r+=n(h)),t.data.forEach(h=>r+=n(h));let o=0,i=e.data,s=e.width-1,a=e.height-1;for(let h=0;h<s;h++)for(let p=0;p<a;p++){let g=h+1,w=p+1;i[h][p]===i[g][p]&&i[g][p]===i[h][w]&&i[g][p]===i[g][w]&&(o+=3)}let c=h=>{let p=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],w=[...p,...g],m=[...g,...p],D=0;for(let b=0;b<h.length;b++)YC(h,w,b)&&(D+=40),YC(h,m,b)&&(D+=40);return D},l=0;for(let h of e.data)l+=c(h);for(let h of t.data)l+=c(h);let u=0;e.rectRead(0,1/0,(h,p)=>u+=p?1:0);let d=u/(e.height*e.width)*100,f=10*Math.floor(Math.abs(d-50)/5);return r+o+l+f}function VS(e,t="raw",n={}){let r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!QC.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${QC}`)})(r);let o=n.encoding!==void 0?n.encoding:function(u){let d="numeric";for(let f of u)if(!_t.alphabet.numeric.has(f)&&(d="alphanumeric",!_t.alphabet.alphanumerc.has(f)))return"byte";return d}(e);(function(u){if(!XC.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${XC}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(o),n.mask!==void 0&&function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!Em[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)}(n.mask);let i,s=n.version,a=new Error("Unknown error");if(s!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(s),i=e1(s,r,e,o);else for(let u=1;u<=40;u++)try{i=e1(u,r,e,o),s=u;break}catch(d){a=d}if(!s||!i)throw a;let c=function(u,d,f,h){if(h===void 0){let p=function(){let g,w=1/0;return{add(m,D){m>=w||(g=D,w=m)},get:()=>g,score:()=>w}}();for(let g=0;g<Em.length;g++)p.add($L(t1(u,d,f,g,!0)),g);h=p.get()}if(h===void 0)throw new Error("Cannot find mask");return t1(u,d,f,h)}(s,r,i,n.mask);c.assertDrawn();let l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),t==="raw")return c.data;if(t==="ascii")return c.toASCII();if(t==="svg")return c.toSVG();if(t==="gif")return c.toGIF();if(t==="term")return c.toTerm();throw new Error(`Unknown output: ${t}`)}var xg={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}},Qa=class{constructor(t){var n;this.translations=xg,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=t?.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(n=>n.toLowerCase().startsWith("en")))return"en";let t=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(t)?t:"en"}async init(t){let n=this.getBrowserLanguage()||t.fallbackLng;await this.loadTranslations(n)}async loadTranslations(t){let n=t.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{let r=`${this.baseUrl}/${n}.json`,o=await fetch(r);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);this.translations=await o.json()}catch(r){console.warn(`\u274C Failed to load ${n} translations, falling back to English:`,r),this.translations=xg}else this.translations=xg}t(t){return this.getNestedTranslation(t,this.translations)||t}getNestedTranslation(t,n){let r=t.split("."),o=n;for(let i of r){if(typeof o!="object")return"";o=o[i]}return typeof o=="string"?o:""}},La;(function(e){e.SDK_MODAL_VIEWED="sdk_modal_viewed",e.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",e.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(La||(La={}));var UL=(()=>{let e=class{constructor(t){Gm(this,t),this.close=yo(this,"close",7),this.startDesktopOnboarding=yo(this,"startDesktopOnboarding",7),this.trackAnalytics=yo(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new Qa}componentDidLoad(){this.trackAnalytics.emit({event:La.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:La.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,n=!1){n&&this.trackAnalytics.emit({event:La.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;let t=o=>this.i18nInstance.t(o),n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=VS(this.link,"svg",{ecc:"medium",scale:2});return J(ty,{className:"install-model"},J("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),J("div",{class:"modal"},J("div",{class:"closeButtonContainer"},J("div",{class:"right"},J("span",{class:"closeButton",onClick:()=>this.onClose(!0)},J(ry,null)))),J("div",{class:"logoContainer"},J(oy,null)),J("div",null,J("div",{class:"tabcontainer"},J("div",{class:"flexContainer"},J("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),J("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),J("div",{style:{display:n===1?"none":"block"}},J("div",{class:"flexContainer"},J("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},r&&J("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:r}),J("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",J("br",null),J("span",{class:"blue"},J("b",null,t("META_MASK_MOBILE_APP"))))))),J("div",{style:{display:n===2?"none":"block"}},J("div",{class:"item"},J(Mg,{Icon:OL,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),J("div",{class:"item"},J(Mg,{Icon:RL,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),J("div",{class:"item"},J(Mg,{Icon:PL,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),J("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},J(LL,null),J("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),J(ny,{version:this.sdkVersion})))}get el(){return Ud(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};return e.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`,e})(),HL=(()=>{let e=class{constructor(t){Gm(this,t),this.close=yo(this,"close",7),this.disconnect=yo(this,"disconnect",7),this.updateOTPValue=yo(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new Qa}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;let n=(t=this.displayOTP)===null||t===void 0||t,r=this.sdkVersion,o=i=>this.i18nInstance.t(i);return J(ty,{className:"pending-modal"},J("div",{class:"backdrop",onClick:()=>this.onClose()}),J("div",{class:"modal"},J("div",{class:"closeButtonContainer"},J("div",{class:"right"},J("span",{class:"closeButton",onClick:()=>this.onClose()},J(ry,null)))),J("div",{class:"logoContainer"},J(oy,null)),J("div",null,J("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},J("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},o(n?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),J("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),n&&J("div",{class:"notice"},"* ",o("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),J("div",{style:{marginTop:"20px"}},J("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},o("PENDING_MODAL.DISCONNECT")))),J(ny,{version:r})))}get el(){return Ud(this)}};return e.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`,e})(),zL=()=>J("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),KL=()=>J("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("rect",{width:"400",height:"300",fill:"white"}),J("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),J("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),J("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),J("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),J("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),J("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),J("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),J("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),J("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),J("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),J("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),J("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),J("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),J("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),J("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),J("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),J("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),J("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),J("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),J("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),J("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),J("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),$S=class{constructor(e){Gm(this,e),this.close=yo(this,"close",7),this.connectWithExtension=yo(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new Qa,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(e=!1){this.close.emit({shouldTerminate:e})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(e){this.tab=e,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;let e=o=>this.i18nInstance.t(o),t=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=VS(this.link,"svg",{ecc:"medium",scale:2});return J(ty,{className:"select-modal"},J("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),J("div",{class:"modal"},J("div",{class:"closeButtonContainer"},J("div",{class:"right"},J("span",{class:"closeButton",onClick:()=>this.onClose(!0)},J(ry,null)))),J("div",{class:"logoContainer"},J(oy,null)),J("div",null,J("div",{class:"tabcontainer"},J("div",{class:"flexContainer"},J("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},e("DESKTOP")),J("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},e("MOBILE")))),J("div",{style:{display:n===1?"none":"block"}},J("div",{class:"flexContainer"},J("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},J("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),J("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT"),J("br",null),J("span",{class:"blue"},J("b",null,e("META_MASK_MOBILE_APP"))))))),J("div",{style:{display:n===2?"none":"block"}},J("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},J(KL,null)),J("div",{class:"extensionLabel"},e("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),J("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},J(zL,null),J("span",{class:"installExtensionText"},e("CONNECT_WITH_EXTENSION"))))),J(ny,{version:t})))}get el(){return Ud(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};$S.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var qL=Object.freeze({__proto__:null,mm_install_modal:UL,mm_pending_modal:HL,mm_select_modal:$S});var _s=class e{MMSDK=new Nd({dappMetadata:{name:"Web3Checkout",url:window.location.href}});ethereum;accounts;ERC20_TRANSFER_METHOD_ID="0xa9059cbb";async setProvider(){let t;if(this.ethereum||(await this.MMSDK.init(),t=this.MMSDK.getProvider()),t)this.ethereum=t;else throw new Nt("No provider","UNKNOWN")}async getUserAddress(){return this.accounts||await this.connectWallet(),this.accounts}async connectWallet(){await this.setProvider(),this.accounts=await this.MMSDK.connect()}async switchNetwork(t){console.log(this.ethereum);let n=`0x${t.toString(16)}`;try{await this.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]})}catch(r){throw r.code===4902?new Nt("Network not found in your wallet.","UNKNOWN"):r}}async sendTransaction(t,n,r){if(this.accounts||await this.connectWallet(),!this.accounts||this.accounts.length===0)throw new Nt("No accounts connected","USER_REJECTED");let o=this.accounts[0],i=t.wallet_address,s=r||n.expected_amount;if(s==null)throw new Nt("No amount specified for transaction","UNKNOWN");await this.switchNetwork(t.network_chain_id);let a=await this.ethereum.request({method:"eth_chainId"}),c=`0x${t.network_chain_id.toString(16)}`;if(a!==c)throw new Nt(`Network switch failed. Expected ${c}, got ${a}`,"WRONG_NETWORK");try{if(n.standard==="NATIVE"){let l=`0x${(s*Math.pow(10,n.decimals)).toString(16)}`,u={from:o,to:i,value:l};return await this.ethereum.request({method:"eth_sendTransaction",params:[u]})}else if(n.standard==="ERC20"){if(!n.contract_address||n.contract_address==="0x")throw new Nt(`Invalid contract address for token ${n.symbol}`,"UNKNOWN");let l=BigInt(Math.floor(s*Math.pow(10,n.decimals))),u=i.substring(2).padStart(64,"0"),d=l.toString(16).padStart(64,"0"),f=`${this.ERC20_TRANSFER_METHOD_ID}${u}${d}`,h={from:o,to:n.contract_address,data:f,value:"0x0"},p=await this.estimateGas(h);return p&&(h.gas=`0x${p.toString(16)}`),await this.ethereum.request({method:"eth_sendTransaction",params:[h]})}else throw new Nt(`Unsupported token standard: ${n.standard}`,"UNKNOWN")}catch(l){throw console.error("Transaction failed:",l),l.code===4001?new Nt("Transaction rejected by user","USER_REJECTED"):l.code===4100?new Nt("Unauthorized","USER_REJECTED"):l.message&&l.message.includes("insufficient funds")?new Nt("Insufficient funds for transaction","INSUFFICIENT_FUNDS"):new Nt(l.message||"Transaction failed","TRANSACTION_FAILED")}}async estimateGas(t){try{let n=await this.ethereum.request({method:"eth_estimateGas",params:[t]});return n?(console.log(n),BigInt(n)*120n/100n):void 0}catch(n){throw console.error("Gas estimation failed:",n),n}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac,providedIn:"root"})};var Nt=class extends Error{type;constructor(t,n){super(t),this.type=n}};var Hd=class e{constructor(t,n,r,o){this.http=t;this.cdr=n;this.elementRef=r;this.walletService=o}destroy$=new Vt;transaction_id=null;selectedPaymentMethod=null;selectedPaymentToken=null;valueToSend=null;transactionData=null;buttonStatus=0;buttonMessage="Unknown error";async ngOnInit(){if(this.transaction_id==null||this.transaction_id=="")throw this.changeButtonStatus(3,"Transaction ID required"),new Error(this.buttonMessage);await this.getTransactionData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}async beginPaymentProcess(){if(!this.selectedPaymentMethod||!this.selectedPaymentToken)throw new Error("Payment method or token is not selected.");try{this.changeButtonStatus(6,"Connecting wallet...");let t=await this.walletService.getUserAddress();this.changeButtonStatus(6,"Approve transaction in your wallet");let n=await this.walletService.sendTransaction(this.selectedPaymentMethod,this.selectedPaymentToken)}catch(t){throw t instanceof Nt?this.changeButtonStatus(5,t.message):this.changeButtonStatus(3,"Unknown error"),t}this.changeButtonStatus(4)}async getTransactionData(){this.http.get(`${JE.apiUrl}/offers/${this.transaction_id}`,{headers:GL}).pipe(Cf(this.destroy$),Fc(t=>{throw this.changeButtonStatus(3,"Cannot get transaction data"),new Error(t)})).subscribe(t=>{this.transactionData=t,console.log(this.transactionData)})}changeButtonStatus(t,n){n&&(this.buttonMessage=n),this.buttonStatus=t,this.cdr.detectChanges()}dispatchCustomEvent(t,n){let r=new CustomEvent(t,{detail:n,bubbles:!0,composed:!0});this.elementRef.nativeElement.dispatchEvent(r)}static \u0275fac=function(n){return new(n||e)(Re(xp),Re(Pi),Re(Un),Re(_s))};static \u0275cmp=Ri({type:e,selectors:[["crypto-checkout"]],inputs:{transaction_id:"transaction_id"},features:[Uo([_s])],decls:3,vars:4,consts:[[1,"container"],[3,"beginPaymentProcessEvent","isTransactionDataNull","buttonStatus","buttonMessage"],[3,"paymentMethodChanged","paymentTokenChanged","transactionData"]],template:function(n,r){n&1&&(Ge(0,"div",0)(1,"app-button-panel",1),un("beginPaymentProcessEvent",function(){return r.beginPaymentProcess()}),ze(),Ge(2,"app-info-panel",2),un("paymentMethodChanged",function(i){return r.selectedPaymentMethod=i})("paymentTokenChanged",function(i){return r.selectedPaymentToken=i}),ze()()),n&2&&(qe(),nt("isTransactionDataNull",r.transactionData===null)("buttonStatus",r.buttonStatus)("buttonMessage",r.buttonMessage),qe(),nt("transactionData",r.transactionData))},dependencies:[mp,ql,Xl,eu],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:stretch;flex-wrap:wrap}@media (max-width: 480px){.container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]})},GL=new fr({"Content-Type":"application/json"});var sy=class extends Ll{supportsDOMEvents=!0},ay=class e extends sy{static makeCurrent(){uE(new e)}onAndCancel(t,n,r,o){return t.addEventListener(n,r,o),()=>{t.removeEventListener(n,r,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=ZL();return n==null?null:YL(n)}resetBaseElement(){nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fl(document.cookie,t)}},nc=null;function ZL(){return nc=nc||document.querySelector("base"),nc?nc.getAttribute("href"):null}function YL(e){return new URL(e,document.baseURI).pathname}var JL=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})(),cy=new ge(""),WS=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new ve(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(Me(cy),Me(tt))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})(),Kd=class{_doc;constructor(t){this._doc=t}manager},zd="ng-app-id";function US(e){for(let t of e)t.remove()}function HS(e,t){let n=t.createElement("style");return n.textContent=e,n}function QL(e,t,n,r){let o=e.head?.querySelectorAll(`style[${zd}="${t}"],link[${zd}="${t}"]`);if(o)for(let i of o)i.removeAttribute(zd),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function ly(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var GS=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.isServer=yp(i),QL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,HS);r?.forEach(o=>this.addUsage(o,this.external,ly))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(US(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])US(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,HS(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,ly(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(zd,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(Me(Hn),Me($h),Me(Hh,8),Me($r))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})(),iy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dy=/%COMP%/g;var ZS="%COMP%",XL=`_nghost-${ZS}`,eF=`_ngcontent-${ZS}`,tF=!0,nF=new ge("",{providedIn:"root",factory:()=>tF});function rF(e){return eF.replace(dy,e)}function oF(e){return XL.replace(dy,e)}function YS(e,t){return t.map(n=>n.replace(dy,e))}var zS=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=yp(a),this.defaultRenderer=new rc(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vn.ShadowDom&&(r=Se(de({},r),{encapsulation:Vn.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof qd?o.applyToHost(n):o instanceof oc&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Vn.Emulated:i=new qd(c,l,r,this.appId,u,s,a,d,f);break;case Vn.ShadowDom:return new uy(c,l,n,r,s,a,this.nonce,d,f);default:i=new oc(c,l,r,u,s,a,d,f);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(Me(WS),Me(GS),Me($h),Me(nF),Me(Hn),Me($r),Me(tt),Me(Hh),Me(Ml,8))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})(),rc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(iy[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(KS(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(KS(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new ve(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=iy[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=iy[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(ar.DashCase|ar.Important)?t.style.setProperty(n,r,o&ar.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ar.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,o){if(typeof t=="string"&&(t=Fi().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);let i=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function KS(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var uy=class extends rc{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,o,i,s,a,c,l){super(t,i,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=YS(o.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=o.getExternalStyles?.();if(d)for(let f of d){let h=ly(f,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oc=class extends rc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,c,l){super(t,i,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=l?YS(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},qd=class extends oc{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,c,l){let u=o+"-"+r.id;super(t,n,r,i,s,a,c,l,u),this.contentAttr=rF(u),this.hostAttr=oF(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},iF=(()=>{class e extends Kd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||e)(Me(Hn))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})(),qS=["alt","control","meta","shift"],sF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},cF=(()=>{class e extends Kd{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qS.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=sF[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),qS.forEach(s=>{if(s!==o){let a=aF[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(Me(Hn))};static \u0275prov=Pe({token:e,factory:e.\u0275fac})}return e})();function JS(e){return iE(lF(e))}function lF(e){return{appProviders:[...pF,...e?.providers??[]],platformProviders:hF}}function uF(){ay.makeCurrent()}function dF(){return new Br}function fF(){return hw(document),document}var hF=[{provide:$r,useValue:fE},{provide:Uh,useValue:uF,multi:!0},{provide:Hn,useFactory:fF,deps:[]}];var pF=[{provide:El,useValue:"root"},{provide:Br,useFactory:dF,deps:[]},{provide:cy,useClass:iF,multi:!0,deps:[Hn,tt,$r]},{provide:cy,useClass:cF,multi:!0,deps:[Hn]},zS,GS,WS,{provide:Ii,useExisting:zS},{provide:Li,useClass:JL,deps:[]},[]];var rr=globalThis;function wn(e){return(rr.__Zone_symbol_prefix||"__zone_symbol__")+e}function gF(){let e=rr.performance;function t(V){e&&e.mark&&e.mark(V)}function n(V,E){e&&e.measure&&e.measure(V,E)}t("Zone");let r=(()=>{class V{static{this.__symbol__=wn}static assertZonePatched(){if(rr.Promise!==$.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let y=V.current;for(;y.parent;)y=y.parent;return y}static get current(){return A.zone}static get currentTask(){return M}static __load_patch(y,v,S=!1){if($.hasOwnProperty(y)){let x=rr[wn("forceDuplicateZoneCheck")]===!0;if(!S&&x)throw Error("Already loaded patch: "+y)}else if(!rr["__Zone_disable_"+y]){let x="Zone:"+y;t(x),$[y]=v(rr,V,R),n(x,x)}}get parent(){return this._parent}get name(){return this._name}constructor(y,v){this._parent=y,this._name=v?v.name||"unnamed":"<root>",this._properties=v&&v.properties||{},this._zoneDelegate=new i(this,this._parent&&this._parent._zoneDelegate,v)}get(y){let v=this.getZoneWith(y);if(v)return v._properties[y]}getZoneWith(y){let v=this;for(;v;){if(v._properties.hasOwnProperty(y))return v;v=v._parent}return null}fork(y){if(!y)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,y)}wrap(y,v){if(typeof y!="function")throw new Error("Expecting function got: "+y);let S=this._zoneDelegate.intercept(this,y,v),x=this;return function(){return x.runGuarded(S,this,arguments,v)}}run(y,v,S,x){A={parent:A,zone:this};try{return this._zoneDelegate.invoke(this,y,v,S,x)}finally{A=A.parent}}runGuarded(y,v=null,S,x){A={parent:A,zone:this};try{try{return this._zoneDelegate.invoke(this,y,v,S,x)}catch(C){if(this._zoneDelegate.handleError(this,C))throw C}}finally{A=A.parent}}runTask(y,v,S){if(y.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(y.zone||w).name+"; Execution: "+this.name+")");let x=y,{type:C,data:{isPeriodic:_=!1,isRefreshable:T=!1}={}}=y;if(y.state===m&&(C===W||C===U))return;let I=y.state!=O;I&&x._transitionTo(O,b);let P=M;M=x,A={parent:A,zone:this};try{C==U&&y.data&&!_&&!T&&(y.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,x,v,S)}catch(H){if(this._zoneDelegate.handleError(this,H))throw H}}finally{let H=y.state;if(H!==m&&H!==z)if(C==W||_||T&&H===D)I&&x._transitionTo(b,O,D);else{let F=x._zoneDelegates;this._updateTaskCount(x,-1),I&&x._transitionTo(m,O,m),T&&(x._zoneDelegates=F)}A=A.parent,M=P}}scheduleTask(y){if(y.zone&&y.zone!==this){let S=this;for(;S;){if(S===y.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${y.zone.name}`);S=S.parent}}y._transitionTo(D,m);let v=[];y._zoneDelegates=v,y._zone=this;try{y=this._zoneDelegate.scheduleTask(this,y)}catch(S){throw y._transitionTo(z,D,m),this._zoneDelegate.handleError(this,S),S}return y._zoneDelegates===v&&this._updateTaskCount(y,1),y.state==D&&y._transitionTo(b,D),y}scheduleMicroTask(y,v,S,x){return this.scheduleTask(new s(q,y,v,S,x,void 0))}scheduleMacroTask(y,v,S,x,C){return this.scheduleTask(new s(U,y,v,S,x,C))}scheduleEventTask(y,v,S,x,C){return this.scheduleTask(new s(W,y,v,S,x,C))}cancelTask(y){if(y.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(y.zone||w).name+"; Execution: "+this.name+")");if(!(y.state!==b&&y.state!==O)){y._transitionTo(N,b,O);try{this._zoneDelegate.cancelTask(this,y)}catch(v){throw y._transitionTo(z,N),this._zoneDelegate.handleError(this,v),v}return this._updateTaskCount(y,-1),y._transitionTo(m,N),y.runCount=-1,y}}_updateTaskCount(y,v){let S=y._zoneDelegates;v==-1&&(y._zoneDelegates=null);for(let x=0;x<S.length;x++)S[x]._updateTaskCount(y.type,v)}}return V})(),o={name:"",onHasTask:(V,E,y,v)=>V.hasTask(y,v),onScheduleTask:(V,E,y,v)=>V.scheduleTask(y,v),onInvokeTask:(V,E,y,v,S,x)=>V.invokeTask(y,v,S,x),onCancelTask:(V,E,y,v)=>V.cancelTask(y,v)};class i{get zone(){return this._zone}constructor(E,y,v){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=E,this._parentDelegate=y,this._forkZS=v&&(v&&v.onFork?v:y._forkZS),this._forkDlgt=v&&(v.onFork?y:y._forkDlgt),this._forkCurrZone=v&&(v.onFork?this._zone:y._forkCurrZone),this._interceptZS=v&&(v.onIntercept?v:y._interceptZS),this._interceptDlgt=v&&(v.onIntercept?y:y._interceptDlgt),this._interceptCurrZone=v&&(v.onIntercept?this._zone:y._interceptCurrZone),this._invokeZS=v&&(v.onInvoke?v:y._invokeZS),this._invokeDlgt=v&&(v.onInvoke?y:y._invokeDlgt),this._invokeCurrZone=v&&(v.onInvoke?this._zone:y._invokeCurrZone),this._handleErrorZS=v&&(v.onHandleError?v:y._handleErrorZS),this._handleErrorDlgt=v&&(v.onHandleError?y:y._handleErrorDlgt),this._handleErrorCurrZone=v&&(v.onHandleError?this._zone:y._handleErrorCurrZone),this._scheduleTaskZS=v&&(v.onScheduleTask?v:y._scheduleTaskZS),this._scheduleTaskDlgt=v&&(v.onScheduleTask?y:y._scheduleTaskDlgt),this._scheduleTaskCurrZone=v&&(v.onScheduleTask?this._zone:y._scheduleTaskCurrZone),this._invokeTaskZS=v&&(v.onInvokeTask?v:y._invokeTaskZS),this._invokeTaskDlgt=v&&(v.onInvokeTask?y:y._invokeTaskDlgt),this._invokeTaskCurrZone=v&&(v.onInvokeTask?this._zone:y._invokeTaskCurrZone),this._cancelTaskZS=v&&(v.onCancelTask?v:y._cancelTaskZS),this._cancelTaskDlgt=v&&(v.onCancelTask?y:y._cancelTaskDlgt),this._cancelTaskCurrZone=v&&(v.onCancelTask?this._zone:y._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let S=v&&v.onHasTask,x=y&&y._hasTaskZS;(S||x)&&(this._hasTaskZS=S?v:o,this._hasTaskDlgt=y,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,v.onScheduleTask||(this._scheduleTaskZS=o,this._scheduleTaskDlgt=y,this._scheduleTaskCurrZone=this._zone),v.onInvokeTask||(this._invokeTaskZS=o,this._invokeTaskDlgt=y,this._invokeTaskCurrZone=this._zone),v.onCancelTask||(this._cancelTaskZS=o,this._cancelTaskDlgt=y,this._cancelTaskCurrZone=this._zone))}fork(E,y){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,E,y):new r(E,y)}intercept(E,y,v){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,E,y,v):y}invoke(E,y,v,S,x){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,E,y,v,S,x):y.apply(v,S)}handleError(E,y){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,E,y):!0}scheduleTask(E,y){let v=y;if(this._scheduleTaskZS)this._hasTaskZS&&v._zoneDelegates.push(this._hasTaskDlgtOwner),v=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,E,y),v||(v=y);else if(y.scheduleFn)y.scheduleFn(y);else if(y.type==q)p(y);else throw new Error("Task is missing scheduleFn.");return v}invokeTask(E,y,v,S){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,E,y,v,S):y.callback.apply(v,S)}cancelTask(E,y){let v;if(this._cancelTaskZS)v=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,E,y);else{if(!y.cancelFn)throw Error("Task is not cancelable");v=y.cancelFn(y)}return v}hasTask(E,y){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,E,y)}catch(v){this.handleError(E,v)}}_updateTaskCount(E,y){let v=this._taskCounts,S=v[E],x=v[E]=S+y;if(x<0)throw new Error("More tasks executed then were scheduled.");if(S==0||x==0){let C={microTask:v.microTask>0,macroTask:v.macroTask>0,eventTask:v.eventTask>0,change:E};this.hasTask(this._zone,C)}}}class s{constructor(E,y,v,S,x,C){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=E,this.source=y,this.data=S,this.scheduleFn=x,this.cancelFn=C,!v)throw new Error("callback is not defined");this.callback=v;let _=this;E===W&&S&&S.useG?this.invoke=s.invokeTask:this.invoke=function(){return s.invokeTask.call(rr,_,this,arguments)}}static invokeTask(E,y,v){E||(E=this),k++;try{return E.runCount++,E.zone.runTask(E,y,v)}finally{k==1&&g(),k--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(m,D)}_transitionTo(E,y,v){if(this._state===y||this._state===v)this._state=E,E==m&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${E}', expecting state '${y}'${v?" or '"+v+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let a=wn("setTimeout"),c=wn("Promise"),l=wn("then"),u=[],d=!1,f;function h(V){if(f||rr[c]&&(f=rr[c].resolve(0)),f){let E=f[l];E||(E=f.then),E.call(f,V)}else rr[a](V,0)}function p(V){k===0&&u.length===0&&h(g),V&&u.push(V)}function g(){if(!d){for(d=!0;u.length;){let V=u;u=[];for(let E=0;E<V.length;E++){let y=V[E];try{y.zone.runTask(y,null,null)}catch(v){R.onUnhandledError(v)}}}R.microtaskDrainDone(),d=!1}}let w={name:"NO ZONE"},m="notScheduled",D="scheduling",b="scheduled",O="running",N="canceling",z="unknown",q="microTask",U="macroTask",W="eventTask",$={},R={symbol:wn,currentZoneFrame:()=>A,onUnhandledError:B,microtaskDrainDone:B,scheduleMicroTask:p,showUncaughtError:()=>!r[wn("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:B,patchMethod:()=>B,bindArguments:()=>[],patchThen:()=>B,patchMacroTask:()=>B,patchEventPrototype:()=>B,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>B,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>B,wrapWithCurrentZone:()=>B,filterProperties:()=>[],attachOriginToPatched:()=>B,_redefineProperty:()=>B,patchCallbacks:()=>B,nativeScheduleMicroTask:h},A={parent:null,zone:new r(null,null)},M=null,k=0;function B(){}return n("Zone","Zone"),r}function mF(){let e=globalThis,t=e[wn("forceDuplicateZoneCheck")]===!0;if(e.Zone&&(t||typeof e.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return e.Zone??=gF(),e.Zone}var sc=Object.getOwnPropertyDescriptor,my=Object.defineProperty,yy=Object.getPrototypeOf,yF=Object.create,vF=Array.prototype.slice,vy="addEventListener",wy="removeEventListener",fy=wn(vy),hy=wn(wy),xr="true",Ar="false",ac=wn("");function Ey(e,t){return Zone.current.wrap(e,t)}function by(e,t,n,r,o){return Zone.current.scheduleMacroTask(e,t,n,r,o)}var je=wn,Zd=typeof window<"u",Ss=Zd?window:void 0,rt=Zd&&Ss||globalThis,wF="removeAttribute";function _y(e,t){for(let n=e.length-1;n>=0;n--)typeof e[n]=="function"&&(e[n]=Ey(e[n],t+"_"+n));return e}function EF(e,t){let n=e.constructor.name;for(let r=0;r<t.length;r++){let o=t[r],i=e[o];if(i){let s=sc(e,o);if(!oI(s))continue;e[o]=(a=>{let c=function(){return a.apply(this,_y(arguments,n+"."+o))};return Nr(c,a),c})(i)}}}function oI(e){return e?e.writable===!1?!1:!(typeof e.get=="function"&&typeof e.set>"u"):!0}var iI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Yd=!("nw"in rt)&&typeof rt.process<"u"&&rt.process.toString()==="[object process]",Cy=!Yd&&!iI&&!!(Zd&&Ss.HTMLElement),sI=typeof rt.process<"u"&&rt.process.toString()==="[object process]"&&!iI&&!!(Zd&&Ss.HTMLElement),Gd={},bF=je("enable_beforeunload"),QS=function(e){if(e=e||rt.event,!e)return;let t=Gd[e.type];t||(t=Gd[e.type]=je("ON_PROPERTY"+e.type));let n=this||e.target||rt,r=n[t],o;if(Cy&&n===Ss&&e.type==="error"){let i=e;o=r&&r.call(this,i.message,i.filename,i.lineno,i.colno,i.error),o===!0&&e.preventDefault()}else o=r&&r.apply(this,arguments),e.type==="beforeunload"&&rt[bF]&&typeof o=="string"?e.returnValue=o:o!=null&&!o&&e.preventDefault();return o};function XS(e,t,n){let r=sc(e,t);if(!r&&n&&sc(n,t)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;let o=je("on"+t+"patched");if(e.hasOwnProperty(o)&&e[o])return;delete r.writable,delete r.value;let i=r.get,s=r.set,a=t.slice(2),c=Gd[a];c||(c=Gd[a]=je("ON_PROPERTY"+a)),r.set=function(l){let u=this;if(!u&&e===rt&&(u=rt),!u)return;typeof u[c]=="function"&&u.removeEventListener(a,QS),s&&s.call(u,null),u[c]=l,typeof l=="function"&&u.addEventListener(a,QS,!1)},r.get=function(){let l=this;if(!l&&e===rt&&(l=rt),!l)return null;let u=l[c];if(u)return u;if(i){let d=i.call(this);if(d)return r.set.call(this,d),typeof l[wF]=="function"&&l.removeAttribute(t),d}return null},my(e,t,r),e[o]=!0}function aI(e,t,n){if(t)for(let r=0;r<t.length;r++)XS(e,"on"+t[r],n);else{let r=[];for(let o in e)o.slice(0,2)=="on"&&r.push(o);for(let o=0;o<r.length;o++)XS(e,r[o],n)}}var Rn=je("originalInstance");function ic(e){let t=rt[e];if(!t)return;rt[je(e)]=t,rt[e]=function(){let o=_y(arguments,e);switch(o.length){case 0:this[Rn]=new t;break;case 1:this[Rn]=new t(o[0]);break;case 2:this[Rn]=new t(o[0],o[1]);break;case 3:this[Rn]=new t(o[0],o[1],o[2]);break;case 4:this[Rn]=new t(o[0],o[1],o[2],o[3]);break;default:throw new Error("Arg list too long.")}},Nr(rt[e],t);let n=new t(function(){}),r;for(r in n)e==="XMLHttpRequest"&&r==="responseBlob"||function(o){typeof n[o]=="function"?rt[e].prototype[o]=function(){return this[Rn][o].apply(this[Rn],arguments)}:my(rt[e].prototype,o,{set:function(i){typeof i=="function"?(this[Rn][o]=Ey(i,e+"."+o),Nr(this[Rn][o],i)):this[Rn][o]=i},get:function(){return this[Rn][o]}})}(r);for(r in t)r!=="prototype"&&t.hasOwnProperty(r)&&(rt[e][r]=t[r])}function kr(e,t,n){let r=e;for(;r&&!r.hasOwnProperty(t);)r=yy(r);!r&&e[t]&&(r=e);let o=je(t),i=null;if(r&&(!(i=r[o])||!r.hasOwnProperty(o))){i=r[o]=r[t];let s=r&&sc(r,t);if(oI(s)){let a=n(i,o,t);r[t]=function(){return a(this,arguments)},Nr(r[t],i)}}return i}function _F(e,t,n){let r=null;function o(i){let s=i.data;return s.args[s.cbIdx]=function(){i.invoke.apply(this,arguments)},r.apply(s.target,s.args),i}r=kr(e,t,i=>function(s,a){let c=n(s,a);return c.cbIdx>=0&&typeof a[c.cbIdx]=="function"?by(c.name,a[c.cbIdx],c,o):i.apply(s,a)})}function Nr(e,t){e[je("OriginalDelegate")]=t}var eI=!1,py=!1;function CF(){try{let e=Ss.navigator.userAgent;if(e.indexOf("MSIE ")!==-1||e.indexOf("Trident/")!==-1)return!0}catch{}return!1}function DF(){if(eI)return py;eI=!0;try{let e=Ss.navigator.userAgent;(e.indexOf("MSIE ")!==-1||e.indexOf("Trident/")!==-1||e.indexOf("Edge/")!==-1)&&(py=!0)}catch{}return py}function tI(e){return typeof e=="function"}function nI(e){return typeof e=="number"}var Ds=!1;if(typeof window<"u")try{let e=Object.defineProperty({},"passive",{get:function(){Ds=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{Ds=!1}var SF={useG:!0},En={},cI={},lI=new RegExp("^"+ac+"(\\w+)(true|false)$"),uI=je("propagationStopped");function dI(e,t){let n=(t?t(e):e)+Ar,r=(t?t(e):e)+xr,o=ac+n,i=ac+r;En[e]={},En[e][Ar]=o,En[e][xr]=i}function IF(e,t,n,r){let o=r&&r.add||vy,i=r&&r.rm||wy,s=r&&r.listeners||"eventListeners",a=r&&r.rmAll||"removeAllListeners",c=je(o),l="."+o+":",u="prependListener",d="."+u+":",f=function(D,b,O){if(D.isRemoved)return;let N=D.callback;typeof N=="object"&&N.handleEvent&&(D.callback=U=>N.handleEvent(U),D.originalDelegate=N);let z;try{D.invoke(D,b,[O])}catch(U){z=U}let q=D.options;if(q&&typeof q=="object"&&q.once){let U=D.originalDelegate?D.originalDelegate:D.callback;b[i].call(b,O.type,U,q)}return z};function h(D,b,O){if(b=b||e.event,!b)return;let N=D||b.target||e,z=N[En[b.type][O?xr:Ar]];if(z){let q=[];if(z.length===1){let U=f(z[0],N,b);U&&q.push(U)}else{let U=z.slice();for(let W=0;W<U.length&&!(b&&b[uI]===!0);W++){let $=f(U[W],N,b);$&&q.push($)}}if(q.length===1)throw q[0];for(let U=0;U<q.length;U++){let W=q[U];t.nativeScheduleMicroTask(()=>{throw W})}}}let p=function(D){return h(this,D,!1)},g=function(D){return h(this,D,!0)};function w(D,b){if(!D)return!1;let O=!0;b&&b.useG!==void 0&&(O=b.useG);let N=b&&b.vh,z=!0;b&&b.chkDup!==void 0&&(z=b.chkDup);let q=!1;b&&b.rt!==void 0&&(q=b.rt);let U=D;for(;U&&!U.hasOwnProperty(o);)U=yy(U);if(!U&&D[o]&&(U=D),!U||U[c])return!1;let W=b&&b.eventNameToString,$={},R=U[c]=U[o],A=U[je(i)]=U[i],M=U[je(s)]=U[s],k=U[je(a)]=U[a],B;b&&b.prepend&&(B=U[je(b.prepend)]=U[b.prepend]);function V(L,K){return!Ds&&typeof L=="object"&&L?!!L.capture:!Ds||!K?L:typeof L=="boolean"?{capture:L,passive:!0}:L?typeof L=="object"&&L.passive!==!1?Se(de({},L),{passive:!0}):L:{passive:!0}}let E=function(L){if(!$.isExisting)return R.call($.target,$.eventName,$.capture?g:p,$.options)},y=function(L){if(!L.isRemoved){let K=En[L.eventName],G;K&&(G=K[L.capture?xr:Ar]);let ee=G&&L.target[G];if(ee){for(let Q=0;Q<ee.length;Q++)if(ee[Q]===L){ee.splice(Q,1),L.isRemoved=!0,L.removeAbortListener&&(L.removeAbortListener(),L.removeAbortListener=null),ee.length===0&&(L.allRemoved=!0,L.target[G]=null);break}}}if(L.allRemoved)return A.call(L.target,L.eventName,L.capture?g:p,L.options)},v=function(L){return R.call($.target,$.eventName,L.invoke,$.options)},S=function(L){return B.call($.target,$.eventName,L.invoke,$.options)},x=function(L){return A.call(L.target,L.eventName,L.invoke,L.options)},C=O?E:v,_=O?y:x,T=function(L,K){let G=typeof K;return G==="function"&&L.callback===K||G==="object"&&L.originalDelegate===K},I=b&&b.diff?b.diff:T,P=Zone[je("UNPATCHED_EVENTS")],H=e[je("PASSIVE_EVENTS")];function F(L){if(typeof L=="object"&&L!==null){let K=de({},L);return L.signal&&(K.signal=L.signal),K}return L}let j=function(L,K,G,ee,Q=!1,se=!1){return function(){let re=this||e,ne=arguments[0];b&&b.transferEventName&&(ne=b.transferEventName(ne));let ae=arguments[1];if(!ae)return L.apply(this,arguments);if(Yd&&ne==="uncaughtException")return L.apply(this,arguments);let ce=!1;if(typeof ae!="function"){if(!ae.handleEvent)return L.apply(this,arguments);ce=!0}if(N&&!N(L,ae,re,arguments))return;let pe=Ds&&!!H&&H.indexOf(ne)!==-1,he=F(V(arguments[2],pe)),fe=he?.signal;if(fe?.aborted)return;if(P){for(let Xt=0;Xt<P.length;Xt++)if(ne===P[Xt])return pe?L.call(re,ne,ae,he):L.apply(this,arguments)}let we=he?typeof he=="boolean"?!0:he.capture:!1,Ce=he&&typeof he=="object"?he.once:!1,Qe=Zone.current,mt=En[ne];mt||(dI(ne,W),mt=En[ne]);let ai=mt[we?xr:Ar],On=re[ai],Is=!1;if(On){if(Is=!0,z){for(let Xt=0;Xt<On.length;Xt++)if(I(On[Xt],ae))return}}else On=re[ai]=[];let ci,Rr=re.constructor.name,cc=cI[Rr];cc&&(ci=cc[ne]),ci||(ci=Rr+K+(W?W(ne):ne)),$.options=he,Ce&&($.options.once=!1),$.target=re,$.capture=we,$.eventName=ne,$.isExisting=Is;let bo=O?SF:void 0;bo&&(bo.taskData=$),fe&&($.options.signal=void 0);let jt=Qe.scheduleEventTask(ci,ae,bo,G,ee);if(fe){$.options.signal=fe;let Xt=()=>jt.zone.cancelTask(jt);L.call(fe,"abort",Xt,{once:!0}),jt.removeAbortListener=()=>fe.removeEventListener("abort",Xt)}if($.target=null,bo&&(bo.taskData=null),Ce&&($.options.once=!0),!Ds&&typeof jt.options=="boolean"||(jt.options=he),jt.target=re,jt.capture=we,jt.eventName=ne,ce&&(jt.originalDelegate=ae),se?On.unshift(jt):On.push(jt),Q)return re}};return U[o]=j(R,l,C,_,q),B&&(U[u]=j(B,d,S,_,q,!0)),U[i]=function(){let L=this||e,K=arguments[0];b&&b.transferEventName&&(K=b.transferEventName(K));let G=arguments[2],ee=G?typeof G=="boolean"?!0:G.capture:!1,Q=arguments[1];if(!Q)return A.apply(this,arguments);if(N&&!N(A,Q,L,arguments))return;let se=En[K],re;se&&(re=se[ee?xr:Ar]);let ne=re&&L[re];if(ne)for(let ae=0;ae<ne.length;ae++){let ce=ne[ae];if(I(ce,Q)){if(ne.splice(ae,1),ce.isRemoved=!0,ne.length===0&&(ce.allRemoved=!0,L[re]=null,!ee&&typeof K=="string")){let pe=ac+"ON_PROPERTY"+K;L[pe]=null}return ce.zone.cancelTask(ce),q?L:void 0}}return A.apply(this,arguments)},U[s]=function(){let L=this||e,K=arguments[0];b&&b.transferEventName&&(K=b.transferEventName(K));let G=[],ee=fI(L,W?W(K):K);for(let Q=0;Q<ee.length;Q++){let se=ee[Q],re=se.originalDelegate?se.originalDelegate:se.callback;G.push(re)}return G},U[a]=function(){let L=this||e,K=arguments[0];if(K){b&&b.transferEventName&&(K=b.transferEventName(K));let G=En[K];if(G){let ee=G[Ar],Q=G[xr],se=L[ee],re=L[Q];if(se){let ne=se.slice();for(let ae=0;ae<ne.length;ae++){let ce=ne[ae],pe=ce.originalDelegate?ce.originalDelegate:ce.callback;this[i].call(this,K,pe,ce.options)}}if(re){let ne=re.slice();for(let ae=0;ae<ne.length;ae++){let ce=ne[ae],pe=ce.originalDelegate?ce.originalDelegate:ce.callback;this[i].call(this,K,pe,ce.options)}}}}else{let G=Object.keys(L);for(let ee=0;ee<G.length;ee++){let Q=G[ee],se=lI.exec(Q),re=se&&se[1];re&&re!=="removeListener"&&this[a].call(this,re)}this[a].call(this,"removeListener")}if(q)return this},Nr(U[o],R),Nr(U[i],A),k&&Nr(U[a],k),M&&Nr(U[s],M),!0}let m=[];for(let D=0;D<n.length;D++)m[D]=w(n[D],r);return m}function fI(e,t){if(!t){let i=[];for(let s in e){let a=lI.exec(s),c=a&&a[1];if(c&&(!t||c===t)){let l=e[s];if(l)for(let u=0;u<l.length;u++)i.push(l[u])}}return i}let n=En[t];n||(dI(t),n=En[t]);let r=e[n[Ar]],o=e[n[xr]];return r?o?r.concat(o):r.slice():o?o.slice():[]}function TF(e,t){let n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",r=>function(o,i){o[uI]=!0,r&&r.apply(o,i)})}function MF(e,t){t.patchMethod(e,"queueMicrotask",n=>function(r,o){Zone.current.scheduleMicroTask("queueMicrotask",o[0])})}var Wd=je("zoneTask");function Cs(e,t,n,r){let o=null,i=null;t+=r,n+=r;let s={};function a(l){let u=l.data;u.args[0]=function(){return l.invoke.apply(this,arguments)};let d=o.apply(e,u.args);return nI(d)?u.handleId=d:(u.handle=d,u.isRefreshable=tI(d.refresh)),l}function c(l){let{handle:u,handleId:d}=l.data;return i.call(e,u??d)}o=kr(e,t,l=>function(u,d){if(tI(d[0])){let f={isRefreshable:!1,isPeriodic:r==="Interval",delay:r==="Timeout"||r==="Interval"?d[1]||0:void 0,args:d},h=d[0];d[0]=function(){try{return h.apply(this,arguments)}finally{let{handle:O,handleId:N,isPeriodic:z,isRefreshable:q}=f;!z&&!q&&(N?delete s[N]:O&&(O[Wd]=null))}};let p=by(t,d[0],f,a,c);if(!p)return p;let{handleId:g,handle:w,isRefreshable:m,isPeriodic:D}=p.data;if(g)s[g]=p;else if(w&&(w[Wd]=p,m&&!D)){let b=w.refresh;w.refresh=function(){let{zone:O,state:N}=p;return N==="notScheduled"?(p._state="scheduled",O._updateTaskCount(p,1)):N==="running"&&(p._state="scheduling"),b.call(this)}}return w??g??p}else return l.apply(e,d)}),i=kr(e,n,l=>function(u,d){let f=d[0],h;nI(f)?(h=s[f],delete s[f]):(h=f?.[Wd],h?f[Wd]=null:h=f),h?.type?h.cancelFn&&h.zone.cancelTask(h):l.apply(e,d)})}function xF(e,t){let{isBrowser:n,isMix:r}=t.getGlobalObjects();if(!n&&!r||!e.customElements||!("customElements"in e))return;let o=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];t.patchCallbacks(t,e.customElements,"customElements","define",o)}function AF(e,t){if(Zone[t.symbol("patchEventTarget")])return;let{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:s}=t.getGlobalObjects();for(let c=0;c<n.length;c++){let l=n[c],u=l+i,d=l+o,f=s+u,h=s+d;r[l]={},r[l][i]=f,r[l][o]=h}let a=e.EventTarget;if(!(!a||!a.prototype))return t.patchEventTarget(e,t,[a&&a.prototype]),!0}function kF(e,t){t.patchEventPrototype(e,t)}function hI(e,t,n){if(!n||n.length===0)return t;let r=n.filter(i=>i.target===e);if(!r||r.length===0)return t;let o=r[0].ignoreProperties;return t.filter(i=>o.indexOf(i)===-1)}function rI(e,t,n,r){if(!e)return;let o=hI(e,t,n);aI(e,o,r)}function gy(e){return Object.getOwnPropertyNames(e).filter(t=>t.startsWith("on")&&t.length>2).map(t=>t.substring(2))}function NF(e,t){if(Yd&&!sI||Zone[e.symbol("patchEvents")])return;let n=t.__Zone_ignore_on_properties,r=[];if(Cy){let o=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let i=CF()?[{target:o,ignoreProperties:["error"]}]:[];rI(o,gy(o),n&&n.concat(i),yy(o))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let o=0;o<r.length;o++){let i=t[r[o]];i&&i.prototype&&rI(i.prototype,gy(i.prototype),n)}}function RF(e){e.__load_patch("legacy",t=>{let n=t[e.__symbol__("legacyPatch")];n&&n()}),e.__load_patch("timers",t=>{let n="set",r="clear";Cs(t,n,r,"Timeout"),Cs(t,n,r,"Interval"),Cs(t,n,r,"Immediate")}),e.__load_patch("requestAnimationFrame",t=>{Cs(t,"request","cancel","AnimationFrame"),Cs(t,"mozRequest","mozCancel","AnimationFrame"),Cs(t,"webkitRequest","webkitCancel","AnimationFrame")}),e.__load_patch("blocking",(t,n)=>{let r=["alert","prompt","confirm"];for(let o=0;o<r.length;o++){let i=r[o];kr(t,i,(s,a,c)=>function(l,u){return n.current.run(s,t,u,c)})}}),e.__load_patch("EventTarget",(t,n,r)=>{kF(t,r),AF(t,r);let o=t.XMLHttpRequestEventTarget;o&&o.prototype&&r.patchEventTarget(t,r,[o.prototype])}),e.__load_patch("MutationObserver",(t,n,r)=>{ic("MutationObserver"),ic("WebKitMutationObserver")}),e.__load_patch("IntersectionObserver",(t,n,r)=>{ic("IntersectionObserver")}),e.__load_patch("FileReader",(t,n,r)=>{ic("FileReader")}),e.__load_patch("on_property",(t,n,r)=>{NF(r,t)}),e.__load_patch("customElements",(t,n,r)=>{xF(t,r)}),e.__load_patch("XHR",(t,n)=>{l(t);let r=je("xhrTask"),o=je("xhrSync"),i=je("xhrListener"),s=je("xhrScheduled"),a=je("xhrURL"),c=je("xhrErrorBeforeScheduled");function l(u){let d=u.XMLHttpRequest;if(!d)return;let f=d.prototype;function h(R){return R[r]}let p=f[fy],g=f[hy];if(!p){let R=u.XMLHttpRequestEventTarget;if(R){let A=R.prototype;p=A[fy],g=A[hy]}}let w="readystatechange",m="scheduled";function D(R){let A=R.data,M=A.target;M[s]=!1,M[c]=!1;let k=M[i];p||(p=M[fy],g=M[hy]),k&&g.call(M,w,k);let B=M[i]=()=>{if(M.readyState===M.DONE)if(!A.aborted&&M[s]&&R.state===m){let E=M[n.__symbol__("loadfalse")];if(M.status!==0&&E&&E.length>0){let y=R.invoke;R.invoke=function(){let v=M[n.__symbol__("loadfalse")];for(let S=0;S<v.length;S++)v[S]===R&&v.splice(S,1);!A.aborted&&R.state===m&&y.call(R)},E.push(R)}else R.invoke()}else!A.aborted&&M[s]===!1&&(M[c]=!0)};return p.call(M,w,B),M[r]||(M[r]=R),W.apply(M,A.args),M[s]=!0,R}function b(){}function O(R){let A=R.data;return A.aborted=!0,$.apply(A.target,A.args)}let N=kr(f,"open",()=>function(R,A){return R[o]=A[2]==!1,R[a]=A[1],N.apply(R,A)}),z="XMLHttpRequest.send",q=je("fetchTaskAborting"),U=je("fetchTaskScheduling"),W=kr(f,"send",()=>function(R,A){if(n.current[U]===!0||R[o])return W.apply(R,A);{let M={target:R,url:R[a],isPeriodic:!1,args:A,aborted:!1},k=by(z,b,M,D,O);R&&R[c]===!0&&!M.aborted&&k.state===m&&k.invoke()}}),$=kr(f,"abort",()=>function(R,A){let M=h(R);if(M&&typeof M.type=="string"){if(M.cancelFn==null||M.data&&M.data.aborted)return;M.zone.cancelTask(M)}else if(n.current[q]===!0)return $.apply(R,A)})}}),e.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&EF(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),e.__load_patch("PromiseRejectionEvent",(t,n)=>{function r(o){return function(i){fI(t,o).forEach(a=>{let c=t.PromiseRejectionEvent;if(c){let l=new c(o,{promise:i.promise,reason:i.rejection});a.invoke(l)}})}}t.PromiseRejectionEvent&&(n[je("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),n[je("rejectionHandledHandler")]=r("rejectionhandled"))}),e.__load_patch("queueMicrotask",(t,n,r)=>{MF(t,r)})}function OF(e){e.__load_patch("ZoneAwarePromise",(t,n,r)=>{let o=Object.getOwnPropertyDescriptor,i=Object.defineProperty;function s(F){if(F&&F.toString===Object.prototype.toString){let j=F.constructor&&F.constructor.name;return(j||"")+": "+JSON.stringify(F)}return F?F.toString():Object.prototype.toString.call(F)}let a=r.symbol,c=[],l=t[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,u=a("Promise"),d=a("then"),f="__creationTrace__";r.onUnhandledError=F=>{if(r.showUncaughtError()){let j=F&&F.rejection;j?console.error("Unhandled Promise rejection:",j instanceof Error?j.message:j,"; Zone:",F.zone.name,"; Task:",F.task&&F.task.source,"; Value:",j,j instanceof Error?j.stack:void 0):console.error(F)}},r.microtaskDrainDone=()=>{for(;c.length;){let F=c.shift();try{F.zone.runGuarded(()=>{throw F.throwOriginal?F.rejection:F})}catch(j){p(j)}}};let h=a("unhandledPromiseRejectionHandler");function p(F){r.onUnhandledError(F);try{let j=n[h];typeof j=="function"&&j.call(this,F)}catch{}}function g(F){return F&&F.then}function w(F){return F}function m(F){return _.reject(F)}let D=a("state"),b=a("value"),O=a("finally"),N=a("parentPromiseValue"),z=a("parentPromiseState"),q="Promise.then",U=null,W=!0,$=!1,R=0;function A(F,j){return L=>{try{V(F,j,L)}catch(K){V(F,!1,K)}}}let M=function(){let F=!1;return function(L){return function(){F||(F=!0,L.apply(null,arguments))}}},k="Promise resolved with itself",B=a("currentTaskTrace");function V(F,j,L){let K=M();if(F===L)throw new TypeError(k);if(F[D]===U){let G=null;try{(typeof L=="object"||typeof L=="function")&&(G=L&&L.then)}catch(ee){return K(()=>{V(F,!1,ee)})(),F}if(j!==$&&L instanceof _&&L.hasOwnProperty(D)&&L.hasOwnProperty(b)&&L[D]!==U)y(L),V(F,L[D],L[b]);else if(j!==$&&typeof G=="function")try{G.call(L,K(A(F,j)),K(A(F,!1)))}catch(ee){K(()=>{V(F,!1,ee)})()}else{F[D]=j;let ee=F[b];if(F[b]=L,F[O]===O&&j===W&&(F[D]=F[z],F[b]=F[N]),j===$&&L instanceof Error){let Q=n.currentTask&&n.currentTask.data&&n.currentTask.data[f];Q&&i(L,B,{configurable:!0,enumerable:!1,writable:!0,value:Q})}for(let Q=0;Q<ee.length;)v(F,ee[Q++],ee[Q++],ee[Q++],ee[Q++]);if(ee.length==0&&j==$){F[D]=R;let Q=L;try{throw new Error("Uncaught (in promise): "+s(L)+(L&&L.stack?`
`+L.stack:""))}catch(se){Q=se}l&&(Q.throwOriginal=!0),Q.rejection=L,Q.promise=F,Q.zone=n.current,Q.task=n.currentTask,c.push(Q),r.scheduleMicroTask()}}}return F}let E=a("rejectionHandledHandler");function y(F){if(F[D]===R){try{let j=n[E];j&&typeof j=="function"&&j.call(this,{rejection:F[b],promise:F})}catch{}F[D]=$;for(let j=0;j<c.length;j++)F===c[j].promise&&c.splice(j,1)}}function v(F,j,L,K,G){y(F);let ee=F[D],Q=ee?typeof K=="function"?K:w:typeof G=="function"?G:m;j.scheduleMicroTask(q,()=>{try{let se=F[b],re=!!L&&O===L[O];re&&(L[N]=se,L[z]=ee);let ne=j.run(Q,void 0,re&&Q!==m&&Q!==w?[]:[se]);V(L,!0,ne)}catch(se){V(L,!1,se)}},L)}let S="function ZoneAwarePromise() { [native code] }",x=function(){},C=t.AggregateError;class _{static toString(){return S}static resolve(j){return j instanceof _?j:V(new this(null),W,j)}static reject(j){return V(new this(null),$,j)}static withResolvers(){let j={};return j.promise=new _((L,K)=>{j.resolve=L,j.reject=K}),j}static any(j){if(!j||typeof j[Symbol.iterator]!="function")return Promise.reject(new C([],"All promises were rejected"));let L=[],K=0;try{for(let Q of j)K++,L.push(_.resolve(Q))}catch{return Promise.reject(new C([],"All promises were rejected"))}if(K===0)return Promise.reject(new C([],"All promises were rejected"));let G=!1,ee=[];return new _((Q,se)=>{for(let re=0;re<L.length;re++)L[re].then(ne=>{G||(G=!0,Q(ne))},ne=>{ee.push(ne),K--,K===0&&(G=!0,se(new C(ee,"All promises were rejected")))})})}static race(j){let L,K,G=new this((se,re)=>{L=se,K=re});function ee(se){L(se)}function Q(se){K(se)}for(let se of j)g(se)||(se=this.resolve(se)),se.then(ee,Q);return G}static all(j){return _.allWithCallback(j)}static allSettled(j){return(this&&this.prototype instanceof _?this:_).allWithCallback(j,{thenCallback:K=>({status:"fulfilled",value:K}),errorCallback:K=>({status:"rejected",reason:K})})}static allWithCallback(j,L){let K,G,ee=new this((ne,ae)=>{K=ne,G=ae}),Q=2,se=0,re=[];for(let ne of j){g(ne)||(ne=this.resolve(ne));let ae=se;try{ne.then(ce=>{re[ae]=L?L.thenCallback(ce):ce,Q--,Q===0&&K(re)},ce=>{L?(re[ae]=L.errorCallback(ce),Q--,Q===0&&K(re)):G(ce)})}catch(ce){G(ce)}Q++,se++}return Q-=2,Q===0&&K(re),ee}constructor(j){let L=this;if(!(L instanceof _))throw new Error("Must be an instanceof Promise.");L[D]=U,L[b]=[];try{let K=M();j&&j(K(A(L,W)),K(A(L,$)))}catch(K){V(L,!1,K)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return _}then(j,L){let K=this.constructor?.[Symbol.species];(!K||typeof K!="function")&&(K=this.constructor||_);let G=new K(x),ee=n.current;return this[D]==U?this[b].push(ee,G,j,L):v(this,ee,G,j,L),G}catch(j){return this.then(null,j)}finally(j){let L=this.constructor?.[Symbol.species];(!L||typeof L!="function")&&(L=_);let K=new L(x);K[O]=O;let G=n.current;return this[D]==U?this[b].push(G,K,j,j):v(this,G,K,j,j),K}}_.resolve=_.resolve,_.reject=_.reject,_.race=_.race,_.all=_.all;let T=t[u]=t.Promise;t.Promise=_;let I=a("thenPatched");function P(F){let j=F.prototype,L=o(j,"then");if(L&&(L.writable===!1||!L.configurable))return;let K=j.then;j[d]=K,F.prototype.then=function(G,ee){return new _((se,re)=>{K.call(this,se,re)}).then(G,ee)},F[I]=!0}r.patchThen=P;function H(F){return function(j,L){let K=F.apply(j,L);if(K instanceof _)return K;let G=K.constructor;return G[I]||P(G),K}}return T&&(P(T),kr(t,"fetch",F=>H(F))),Promise[n.__symbol__("uncaughtPromiseErrors")]=c,_})}function PF(e){e.__load_patch("toString",t=>{let n=Function.prototype.toString,r=je("OriginalDelegate"),o=je("Promise"),i=je("Error"),s=function(){if(typeof this=="function"){let u=this[r];if(u)return typeof u=="function"?n.call(u):Object.prototype.toString.call(u);if(this===Promise){let d=t[o];if(d)return n.call(d)}if(this===Error){let d=t[i];if(d)return n.call(d)}}return n.call(this)};s[r]=n,Function.prototype.toString=s;let a=Object.prototype.toString,c="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?c:a.call(this)}})}function LF(e,t,n,r,o){let i=Zone.__symbol__(r);if(t[i])return;let s=t[i]=t[r];t[r]=function(a,c,l){return c&&c.prototype&&o.forEach(function(u){let d=`${n}.${r}::`+u,f=c.prototype;try{if(f.hasOwnProperty(u)){let h=e.ObjectGetOwnPropertyDescriptor(f,u);h&&h.value?(h.value=e.wrapWithCurrentZone(h.value,d),e._redefineProperty(c.prototype,u,h)):f[u]&&(f[u]=e.wrapWithCurrentZone(f[u],d))}else f[u]&&(f[u]=e.wrapWithCurrentZone(f[u],d))}catch{}}),s.call(t,a,c,l)},e.attachOriginToPatched(t[r],s)}function FF(e){e.__load_patch("util",(t,n,r)=>{let o=gy(t);r.patchOnProperties=aI,r.patchMethod=kr,r.bindArguments=_y,r.patchMacroTask=_F;let i=n.__symbol__("BLACK_LISTED_EVENTS"),s=n.__symbol__("UNPATCHED_EVENTS");t[s]&&(t[i]=t[s]),t[i]&&(n[i]=n[s]=t[i]),r.patchEventPrototype=TF,r.patchEventTarget=IF,r.isIEOrEdge=DF,r.ObjectDefineProperty=my,r.ObjectGetOwnPropertyDescriptor=sc,r.ObjectCreate=yF,r.ArraySlice=vF,r.patchClass=ic,r.wrapWithCurrentZone=Ey,r.filterProperties=hI,r.attachOriginToPatched=Nr,r._redefineProperty=Object.defineProperty,r.patchCallbacks=LF,r.getGlobalObjects=()=>({globalSources:cI,zoneSymbolEventNames:En,eventNames:o,isBrowser:Cy,isMix:sI,isNode:Yd,TRUE_STR:xr,FALSE_STR:Ar,ZONE_SYMBOL_PREFIX:ac,ADD_EVENT_LISTENER_STR:vy,REMOVE_EVENT_LISTENER_STR:wy})})}function BF(e){OF(e),PF(e),FF(e)}var pI=mF();BF(pI);RF(pI);var jF={providers:[YE()]};(async()=>{try{let e=await JS(jF),t=sE(Hd,{injector:e.injector});customElements.get("crypto-checkout")||customElements.define("crypto-checkout",t),console.log("Crypto Checkout successfully registered")}catch(e){console.error("Failed to register custom element:",e)}})();
